/*
 * Copyright (C) 2011 Klokan Technologies GmbH (info@klokantech.com)
 *
 * THE COMPLETE SOURCE CODE OF THIS APPLICATION IS AVAILABLE AT:
 *
 *                 http://www.webglearth.org/
 *
 * The JavaScript code in this page is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU GPL for more details.
 *
 * USE OF THIS CODE OR ANY PART OF IT IN A NONFREE SOFTWARE IS NOT ALLOWED
 * WITHOUT PRIOR WRITTEN PERMISSION FROM KLOKAN TECHNOLOGIES GMBH.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 */
function e(a){throw a;}var i=void 0,n=null;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function p(a){return function(){return this[a]}}function q(a){return function(){return a}}var r,ca=ca||{},s=this;function da(a){for(var a=a.split("."),b=s,c;c=a.shift();)if(t(b[c]))b=b[c];else return n;return b}function u(){}function ea(a){a.Ha=function(){return a.Xj||(a.Xj=new a)}}
function fa(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(c=="[object Window]")return"object";if(c=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(c=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b}function w(a){return a!==i}function z(a){return a===n}function t(a){return a!=n}function A(a){return fa(a)=="array"}function B(a){var b=fa(a);return b=="array"||b=="object"&&typeof a.length=="number"}function C(a){return typeof a=="string"}function ga(a){return typeof a=="number"}function ha(a){return fa(a)=="function"}function ia(a){a=fa(a);return a=="object"||a=="array"||a=="function"}
function ja(a){return a[ka]||(a[ka]=++la)}var ka="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),la=0;function ma(a,b,c){return a.call.apply(a.bind,arguments)}function na(a,b,c){a||e(Error());if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}else return function(){return a.apply(b,arguments)}}
function D(a,b,c){D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ma:na;return D.apply(n,arguments)}function oa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var E=Date.now||function(){return+new Date};function F(a,b){function c(){}c.prototype=b.prototype;a.b=b.prototype;a.prototype=new c;a.prototype.constructor=a};function pa(a){return function(){return a}}var qa=pa(!0),ra=pa(n);function sa(a){var b=arguments,c=b.length;return function(){for(var a,f=0;f<c;f++)a=b[f].apply(this,arguments);return a}};function ta(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}function ua(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}var va=/^[a-zA-Z0-9\-_.!~*'()]*$/;function wa(a){a=String(a);return!va.test(a)?encodeURIComponent(a):a}function xa(a){if(!ya.test(a))return a;a.indexOf("&")!=-1&&(a=a.replace(za,"&amp;"));a.indexOf("<")!=-1&&(a=a.replace(Aa,"&lt;"));a.indexOf(">")!=-1&&(a=a.replace(Ba,"&gt;"));a.indexOf('"')!=-1&&(a=a.replace(Ca,"&quot;"));return a}
var za=/&/g,Aa=/</g,Ba=/>/g,Ca=/\"/g,ya=/[&<>\"]/;function Da(a){return String(a).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function Ea(){return Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^E()).toString(36)}
function Fa(a,b){for(var c=0,d=ua(String(a)).split("."),f=ua(String(b)).split("."),g=Math.max(d.length,f.length),h=0;c==0&&h<g;h++){var j=d[h]||"",k=f[h]||"",l=RegExp("(\\d*)(\\D*)","g"),o=RegExp("(\\d*)(\\D*)","g");do{var m=l.exec(j)||["","",""],x=o.exec(k)||["","",""];if(m[0].length==0&&x[0].length==0)break;c=Ga(m[1].length==0?0:parseInt(m[1],10),x[1].length==0?0:parseInt(x[1],10))||Ga(m[2].length==0,x[2].length==0)||Ga(m[2],x[2])}while(c==0)}return c}
function Ga(a,b){if(a<b)return-1;else if(a>b)return 1;return 0};function Ha(){}Ha.prototype.Je=!1;Ha.prototype.j=function(){if(!this.Je)this.Je=!0,this.h()};Ha.prototype.h=function(){this.xj&&Ia.apply(n,this.xj)};function Ja(a){a&&typeof a.j=="function"&&a.j()}function Ia(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];B(d)?Ia.apply(n,d):Ja(d)}};function Ka(a,b,c,d){this.zoom=a||0;this.x=b||0;this.y=c||0;this.Uf=0;this.rc=d||0;this.rd=this.Qc=n;this.state=La}F(Ka,Ha);Ka.prototype.setData=ba("rd");Ka.prototype.xh=ra;function Ma(a){return a.rd?a.xh(a.rd):a.Qc}Ka.prototype.vh=u;Ka.prototype.h=function(){this.Qc=n;if(this.rd)this.vh(this.rd),this.rd=n};var La=0;function G(a,b){this.x=w(a)?a:0;this.y=w(b)?b:0}G.prototype.ga=function(){return new G(this.x,this.y)};function Na(a,b){return new G(a.x-b.x,a.y-b.y)};function Oa(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Oa.prototype.ga=function(){return new Oa(this.top,this.right,this.bottom,this.left)};Oa.prototype.contains=function(a){return!this||!a?!1:a instanceof Oa?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};var Pa,Qa,Ra,Sa,Ta,Ua,Va;function Wa(){return s.navigator?s.navigator.userAgent:n}function Xa(){return s.navigator}Ta=Sa=Ra=Qa=Pa=!1;var Ya;if(Ya=Wa()){var Za=Xa();Pa=Ya.indexOf("Opera")==0;Qa=!Pa&&Ya.indexOf("MSIE")!=-1;Sa=(Ra=!Pa&&Ya.indexOf("WebKit")!=-1)&&Ya.indexOf("Mobile")!=-1;Ta=!Pa&&!Ra&&Za.product=="Gecko"}var $a=Pa,H=Qa,I=Ta,J=Ra,ab=Sa,bb,cb=Xa();bb=cb&&cb.platform||"";Ua=bb.indexOf("Mac")!=-1;Va=bb.indexOf("Win")!=-1;var db=!!Xa()&&(Xa().appVersion||"").indexOf("X11")!=-1,eb;
a:{var fb="",gb;if($a&&s.opera)var hb=s.opera.version,fb=typeof hb=="function"?hb():hb;else if(I?gb=/rv\:([^\);]+)(\)|;)/:H?gb=/MSIE\s+([^\);]+)(\)|;)/:J&&(gb=/WebKit\/(\S+)/),gb)var ib=gb.exec(Wa()),fb=ib?ib[1]:"";if(H){var jb,kb=s.document;jb=kb?kb.documentMode:i;if(jb>parseFloat(fb)){eb=String(jb);break a}}eb=fb}var lb={};function K(a){return lb[a]||(lb[a]=Fa(eb,a)>=0)}var mb={};function nb(){return mb[9]||(mb[9]=H&&document.documentMode&&document.documentMode>=9)};function ob(a,b){for(var c in a)b.call(i,a[c],c,a)}function pb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function qb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function rb(){var a=sb,b;for(b in a)return!1;return!0}function tb(a,b,c){b in a&&e(Error('The object already contains the key "'+b+'"'));a[b]=c}var ub="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");
function vb(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var g=0;g<ub.length;g++)c=ub[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var L=Array.prototype,wb=L.indexOf?function(a,b,c){return L.indexOf.call(a,b,c)}:function(a,b,c){c=c==n?0:c<0?Math.max(0,a.length+c):c;if(C(a))return!C(b)||b.length!=1?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},M=L.forEach?function(a,b,c){L.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=C(a)?a.split(""):a,g=0;g<d;g++)g in f&&b.call(c,f[g],g,a)},xb=L.filter?function(a,b,c){return L.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=[],g=0,h=C(a)?a.split(""):
a,j=0;j<d;j++)if(j in h){var k=h[j];b.call(c,k,j,a)&&(f[g++]=k)}return f},yb=L.map?function(a,b,c){return L.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=Array(d),g=C(a)?a.split(""):a,h=0;h<d;h++)h in g&&(f[h]=b.call(c,g[h],h,a));return f},zb=L.every?function(a,b,c){return L.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=C(a)?a.split(""):a,g=0;g<d;g++)if(g in f&&!b.call(c,f[g],g,a))return!1;return!0};
function Ab(a,b){var c;a:{c=a.length;for(var d=C(a)?a.split(""):a,f=0;f<c;f++)if(f in d&&b.call(i,d[f],f,a)){c=f;break a}c=-1}return c<0?n:C(a)?a.charAt(c):a[c]}function Bb(a,b){return wb(a,b)>=0}function Cb(a,b){var c=wb(a,b),d;(d=c>=0)&&L.splice.call(a,c,1);return d}function Db(a){return L.concat.apply(L,arguments)}function Eb(a){if(A(a))return Db(a);else{for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}}
function Fb(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],f;if(A(d)||(f=B(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(f)for(var g=a.length,h=d.length,j=0;j<h;j++)a[g+j]=d[j];else a.push(d)}}function Gb(a,b,c,d){L.splice.apply(a,Hb(arguments,1))}function Hb(a,b,c){return arguments.length<=2?L.slice.call(a,b):L.slice.call(a,b,c)}function Ib(a,b){L.sort.call(a,b||Jb)}function Jb(a,b){return a>b?1:a<b?-1:0}
function Kb(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];A(d)?b.push.apply(b,Kb.apply(n,d)):b.push(d)}return b};function Lb(a){if(typeof a.wb=="function")a=a.wb();else if(B(a)||C(a))a=a.length;else{var b=0,c;for(c in a)b++;a=b}return a}function Mb(a){if(typeof a.Sa=="function")return a.Sa();if(C(a))return a.split("");if(B(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return pb(a)}function Nb(a){if(typeof a.Mc=="function")return a.Mc();if(typeof a.Sa!="function"){if(B(a)||C(a)){for(var b=[],a=a.length,c=0;c<a;c++)b.push(c);return b}return qb(a)}}
function Ob(a,b,c){if(typeof a.forEach=="function")a.forEach(b,c);else if(B(a)||C(a))M(a,b,c);else for(var d=Nb(a),f=Mb(a),g=f.length,h=0;h<g;h++)b.call(c,f[h],d&&d[h],a)}function Pb(a,b){if(typeof a.every=="function")return a.every(b,i);if(B(a)||C(a))return zb(a,b,i);for(var c=Nb(a),d=Mb(a),f=d.length,g=0;g<f;g++)if(!b.call(i,d[g],c&&c[g],a))return!1;return!0};var Qb="StopIteration"in s?s.StopIteration:Error("StopIteration");function Rb(){}Rb.prototype.next=function(){e(Qb)};Rb.prototype.Md=function(){return this};function Sb(a){if(a instanceof Rb)return a;if(typeof a.Md=="function")return a.Md(!1);if(B(a)){var b=0,c=new Rb;c.next=function(){for(;;)if(b>=a.length&&e(Qb),b in a)return a[b++];else b++};return c}e(Error("Not implemented"))}
function Tb(a,b,c){if(B(a))try{M(a,b,c)}catch(d){d!==Qb&&e(d)}else{a=Sb(a);try{for(;;)b.call(c,a.next(),i,a)}catch(f){f!==Qb&&e(f)}}};function Ub(a,b){this.R={};this.J=[];var c=arguments.length;if(c>1){c%2&&e(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.Cf(a)}r=Ub.prototype;r.z=0;r.ze=0;r.wb=p("z");r.Sa=function(){Vb(this);for(var a=[],b=0;b<this.J.length;b++)a.push(this.R[this.J[b]]);return a};r.Mc=function(){Vb(this);return this.J.concat()};r.rb=function(a){return Wb(this.R,a)};
r.Mf=function(a){for(var b=0;b<this.J.length;b++){var c=this.J[b];if(Wb(this.R,c)&&this.R[c]==a)return!0}return!1};r.equals=function(a,b){if(this===a)return!0;if(this.z!=a.wb())return!1;var c=b||Xb;Vb(this);for(var d,f=0;d=this.J[f];f++)if(!c(this.get(d),a.get(d)))return!1;return!0};function Xb(a,b){return a===b}r.clear=function(){this.R={};this.ze=this.z=this.J.length=0};r.remove=function(a){return Wb(this.R,a)?(delete this.R[a],this.z--,this.ze++,this.J.length>2*this.z&&Vb(this),!0):!1};
function Vb(a){if(a.z!=a.J.length){for(var b=0,c=0;b<a.J.length;){var d=a.J[b];Wb(a.R,d)&&(a.J[c++]=d);b++}a.J.length=c}if(a.z!=a.J.length){for(var f={},c=b=0;b<a.J.length;)d=a.J[b],Wb(f,d)||(a.J[c++]=d,f[d]=1),b++;a.J.length=c}}r.get=function(a,b){return Wb(this.R,a)?this.R[a]:b};r.set=function(a,b){Wb(this.R,a)||(this.z++,this.J.push(a),this.ze++);this.R[a]=b};r.Cf=function(a){var b;a instanceof Ub?(b=a.Mc(),a=a.Sa()):(b=qb(a),a=pb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};r.ga=function(){return new Ub(this)};
r.Md=function(a){Vb(this);var b=0,c=this.J,d=this.R,f=this.ze,g=this,h=new Rb;h.next=function(){for(;;){f!=g.ze&&e(Error("The map has changed since the iterator was created"));b>=c.length&&e(Qb);var h=c[b++];return a?h:d[h]}};return h};function Wb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Yb(a){this.R=new Ub;a&&this.Cf(a)}function Zb(a){var b=typeof a;return b=="object"&&a||b=="function"?"o"+ja(a):b.substr(0,1)+a}r=Yb.prototype;r.wb=function(){return this.R.wb()};r.add=function(a){this.R.set(Zb(a),a)};r.Cf=function(a){for(var a=Mb(a),b=a.length,c=0;c<b;c++)this.add(a[c])};r.Gd=function(a){for(var a=Mb(a),b=a.length,c=0;c<b;c++)this.remove(a[c])};r.remove=function(a){return this.R.remove(Zb(a))};r.clear=function(){this.R.clear()};r.contains=function(a){return this.R.rb(Zb(a))};
r.Wh=function(a){for(var b=new Yb,a=Mb(a),c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};r.Sa=function(){return this.R.Sa()};r.ga=function(){return new Yb(this)};r.equals=function(a){return this.wb()==Lb(a)&&$b(this,a)};
function $b(a,b){var c=Lb(b);if(a.wb()>c)return!1;!(b instanceof Yb)&&c>5&&(b=new Yb(b));return Pb(a,function(a){if(typeof b.contains=="function")a=b.contains(a);else if(typeof b.Mf=="function")a=b.Mf(a);else if(B(b)||C(b))a=Bb(b,a);else a:{for(var c in b)if(b[c]==a){a=!0;break a}a=!1}return a})}r.Md=function(){return this.R.Md(!1)};function ac(a){return bc(a||arguments.callee.caller,[])}
function bc(a,b){var c=[];if(Bb(b,a))c.push("[...circular reference...]");else if(a&&b.length<50){c.push(cc(a)+"(");for(var d=a.arguments,f=0;f<d.length;f++){f>0&&c.push(", ");var g;g=d[f];switch(typeof g){case "object":g=g?"object":"null";break;case "string":break;case "number":g=String(g);break;case "boolean":g=g?"true":"false";break;case "function":g=(g=cc(g))?g:"[fn]";break;default:g=typeof g}g.length>40&&(g=g.substr(0,40)+"...");c.push(g)}b.push(a);c.push(")\n");try{c.push(bc(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function cc(a){if(dc[a])return dc[a];a=String(a);if(!dc[a]){var b=/function ([^\(]+)/.exec(a);dc[a]=b?b[1]:"[Anonymous]"}return dc[a]}var dc={};function ec(a,b,c,d,f){this.reset(a,b,c,d,f)}ec.prototype.fl=0;ec.prototype.Dh=n;ec.prototype.Ch=n;var fc=0;ec.prototype.reset=function(a,b,c,d,f){this.fl=typeof f=="number"?f:fc++;this.Jl=d||E();this.ee=a;this.zk=b;this.Fl=c;delete this.Dh;delete this.Ch};ec.prototype.Di=ba("ee");function gc(a){this.Bk=a}gc.prototype.O=n;gc.prototype.ee=n;gc.prototype.W=n;gc.prototype.Rh=n;function hc(a,b){this.name=a;this.value=b}hc.prototype.toString=p("name");var ic=new hc("SEVERE",1E3),jc=new hc("WARNING",900),kc=new hc("CONFIG",700),lc=new hc("FINE",500),mc=new hc("FINEST",300);gc.prototype.getParent=p("O");gc.prototype.Di=ba("ee");function nc(a){return a.ee?a.ee:a.O?nc(a.O):n}
gc.prototype.log=function(a,b,c){if(a.value>=nc(this).value){a=this.Ej(a,b,c);b="log:"+a.zk;s.console&&(s.console.timeStamp?s.console.timeStamp(b):s.console.markTimeline&&s.console.markTimeline(b));s.msWriteProfilerMark&&s.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.Rh)for(var f=0,g=i;g=c.Rh[f];f++)g(d);b=b.getParent()}}};
gc.prototype.Ej=function(a,b,c){var d=new ec(a,String(b),this.Bk);if(c){d.Dh=c;var f;var g=arguments.callee.caller;try{var h;var j=da("window.location.href");if(C(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:j,stack:"Not available"};else{var k,l,o=!1;try{k=c.lineNumber||c.El||"Not available"}catch(m){k="Not available",o=!0}try{l=c.fileName||c.filename||c.sourceURL||j}catch(x){l="Not available",o=!0}h=o||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,
lineNumber:k,fileName:l,stack:c.stack||"Not available"}:c}f="Message: "+xa(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+xa(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+xa(ac(g)+"-> ")}catch(v){f="Exception trying to expose exception! You win, we lose. "+v}d.Ch=f}return d};function oc(a,b){a.log(lc,b,i)}var pc={},qc=n;
function rc(a){qc||(qc=new gc(""),pc[""]=qc,qc.Di(kc));var b;if(!(b=pc[a])){b=new gc(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=rc(a.substr(0,c));if(!c.W)c.W={};c.W[d]=b;b.O=c;pc[a]=b}return b};function sc(a){this.name=a;this.gb=0;this.Rf=[];this.rk=-1.4844222297453324;this.gk=1.4844222297453324;this.sk=-Math.PI;this.hk=Math.PI;this.If=[]}function tc(a,b){if(!t(a.If[b])){var c=1<<b,d=Math.floor((a.sk/(2*Math.PI)+0.5)*c),f=Math.floor((a.hk/(2*Math.PI)+0.5)*c),g=Math.floor((0.5-uc(a.gk)/(Math.PI*2))*c),c=Math.floor((0.5-uc(a.rk)/(Math.PI*2))*c);a.If[b]=new Oa(g,f,c,d)}return a.If[b]}r=sc.prototype;r.Yd=q(0);r.Kf=q(!1);r.Ug=q(!1);r.og=q(!0);
function vc(a){M(a.Rf,function(a){this.gb--;this.ge(a.kl,a.onload,a.Rk)},a);a.Rf=[]}function wc(a,b,c,d){a.og()?a.ge(b,c,d):(a.Rf.push(new xc(b,c,d)),a.gb++)}r.md=aa();r.Pe=q(n);r.xi=u;r.Nf=u;function yc(a,b,c,d,f){this.oj=a;this.pj=b;this.gl=c;this.hl=d;this.xl=f}function xc(a,b,c){this.kl=a;this.onload=b;this.Rk=c};function zc(a){sc.call(this,a);this.Ng=""}F(zc,sc);zc.prototype.Kf=q(!0);zc.prototype.Ug=function(a){var b=this.Ng!=a;this.Ng=a;return b};zc.prototype.ge=function(a,b,c){var d=new Image;d.onload=D(function(){a.state=20;this.gb--;b(a)},this);d.onerror=D(function(){a.Uf++;a.state=-10;this.gb--;c&&c(a)},this);a.state=10;a.Qc=d;d.crossOrigin="";var f=this.Re(a.zoom,a.x,a.y);d.src=this.Ng+f;this.gb++};function Ac(a){return Math.floor(Math.random()*a)}function N(a,b,c){return Math.min(Math.max(a,b),c)}function Bc(a,b){var c=a%b;return c*b<0?c+b:c}function O(a){return a*Math.PI/180}function Cc(a){return a*180/Math.PI};function Dc(a){var b=w(i),c=new XMLHttpRequest;if(b)c.onreadystatechange=function(){c.readyState==4&&i(c.responseText)};c.open("GET",a,b);c.send(n);return b?"":c.responseText}function Ec(a){a=Bc(a,2*Math.PI);return a>Math.PI?a-2*Math.PI:a};function Fc(a,b,c,d,f,g,h){zc.call(this,a);this.url=b;this.minZoom=c;this.maxZoom=d;this.tileSize=f;this.Bj=g===!0;this.$g=h||[]}F(Fc,zc);Fc.prototype.Yd=p("minZoom");Fc.prototype.xb=p("maxZoom");Fc.prototype.hc=p("tileSize");Fc.prototype.Re=function(a,b,c){var d=this.url.replace("{z}",a.toFixed(0)),d=d.replace("{x}",b.toFixed(0)),d=d.replace("{y}",(this.Bj?(1<<a)-c-1:c).toFixed(0));this.$g.length>0&&(d=d.replace("{sub}",this.$g[Ac(this.$g.length)]));return d};var Gc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function Hc(a,b){var c;a instanceof Hc?(this.Jd(b==n?a.yb:b),Ic(this,a.Vb),Jc(this,a.ye),Kc(this,a.Ic),Lc(this,a.Fd),this.setPath(a.getPath()),Mc(this,a.Bb.ga()),Nc(this,a.Vd)):a&&(c=String(a).match(Gc))?(this.Jd(!!b),Ic(this,c[1]||"",!0),Jc(this,c[2]||"",!0),Kc(this,c[3]||"",!0),Lc(this,c[4]),this.setPath(c[5]||"",!0),Mc(this,c[6]||"",!0),Nc(this,c[7]||"",!0)):(this.Jd(!!b),this.Bb=new Oc(n,this,this.yb))}r=Hc.prototype;r.Vb="";r.ye="";r.Ic="";r.Fd=n;r.Xc="";r.Vd="";r.Yj=!1;r.yb=!1;
r.toString=function(){if(this.$a)return this.$a;var a=[];this.Vb&&a.push(Pc(this.Vb,Qc),":");this.Ic&&(a.push("//"),this.ye&&a.push(Pc(this.ye,Qc),"@"),a.push(C(this.Ic)?encodeURIComponent(this.Ic):n),this.Fd!=n&&a.push(":",String(this.Fd)));this.Xc&&(this.Ic&&this.Xc.charAt(0)!="/"&&a.push("/"),a.push(Pc(this.Xc,this.Xc.charAt(0)=="/"?Rc:Sc)));var b=String(this.Bb);b&&a.push("?",b);this.Vd&&a.push("#",Pc(this.Vd,Tc));return this.$a=a.join("")};
r.ga=function(){var a=this.Vb,b=this.ye,c=this.Ic,d=this.Fd,f=this.Xc,g=this.Bb.ga(),h=this.Vd,j=new Hc(n,this.yb);a&&Ic(j,a);b&&Jc(j,b);c&&Kc(j,c);d&&Lc(j,d);f&&j.setPath(f);g&&Mc(j,g);h&&Nc(j,h);return j};function Ic(a,b,c){Uc(a);delete a.$a;a.Vb=c?b?decodeURIComponent(b):"":b;if(a.Vb)a.Vb=a.Vb.replace(/:$/,"")}function Jc(a,b,c){Uc(a);delete a.$a;a.ye=c?b?decodeURIComponent(b):"":b}function Kc(a,b,c){Uc(a);delete a.$a;a.Ic=c?b?decodeURIComponent(b):"":b}
function Lc(a,b){Uc(a);delete a.$a;b?(b=Number(b),(isNaN(b)||b<0)&&e(Error("Bad port number "+b)),a.Fd=b):a.Fd=n}r.getPath=p("Xc");r.setPath=function(a,b){Uc(this);delete this.$a;this.Xc=b?a?decodeURIComponent(a):"":a;return this};function Mc(a,b,c){Uc(a);delete a.$a;b instanceof Oc?(a.Bb=b,a.Bb.xe=a,a.Bb.Jd(a.yb)):(c||(b=Pc(b,Vc)),a.Bb=new Oc(b,a,a.yb))}function Wc(a,b,c){Uc(a);delete a.$a;A(c)||(c=[String(c)]);a.Bb.setValues(b,c)}
function Nc(a,b,c){Uc(a);delete a.$a;a.Vd=c?b?decodeURIComponent(b):"":b}function Uc(a){a.Yj&&e(Error("Tried to modify a read-only Uri"))}r.Jd=function(a){this.yb=a;this.Bb&&this.Bb.Jd(a);return this};var Xc=/^[a-zA-Z0-9\-_.!~*'():\/;?]*$/;function Pc(a,b){var c=n;C(a)&&(c=a,Xc.test(c)||(c=encodeURI(a)),c.search(b)>=0&&(c=c.replace(b,Yc)));return c}function Yc(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Qc=/[#\/\?@]/g,Sc=/[\#\?:]/g,Rc=/[\#\?]/g,Vc=/[\#\?@]/g,Tc=/#/g;
function Oc(a,b,c){this.Ib=a||n;this.xe=b||n;this.yb=!!c}function Zc(a){if(!a.G&&(a.G=new Ub,a.z=0,a.Ib))for(var b=a.Ib.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),f=n,g=n;d>=0?(f=b[c].substring(0,d),g=b[c].substring(d+1)):f=b[c];f=decodeURIComponent(f.replace(/\+/g," "));f=$c(a,f);a.add(f,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}r=Oc.prototype;r.G=n;r.z=n;r.wb=function(){Zc(this);return this.z};
r.add=function(a,b){Zc(this);ad(this);a=$c(this,a);if(this.rb(a)){var c=this.G.get(a);A(c)?c.push(b):this.G.set(a,[c,b])}else this.G.set(a,b);this.z++;return this};r.remove=function(a){Zc(this);a=$c(this,a);if(this.G.rb(a)){ad(this);var b=this.G.get(a);A(b)?this.z-=b.length:this.z--;return this.G.remove(a)}return!1};r.clear=function(){ad(this);this.G&&this.G.clear();this.z=0};r.rb=function(a){Zc(this);a=$c(this,a);return this.G.rb(a)};r.Mf=function(a){var b=this.Sa();return Bb(b,a)};
r.Mc=function(){Zc(this);for(var a=this.G.Sa(),b=this.G.Mc(),c=[],d=0;d<b.length;d++){var f=a[d];if(A(f))for(var g=0;g<f.length;g++)c.push(b[d]);else c.push(b[d])}return c};r.Sa=function(a){Zc(this);if(a)if(a=$c(this,a),this.rb(a)){var b=this.G.get(a);if(A(b))return b;else a=[],a.push(b)}else a=[];else for(var b=this.G.Sa(),a=[],c=0;c<b.length;c++){var d=b[c];A(d)?Fb(a,d):a.push(d)}return a};
r.set=function(a,b){Zc(this);ad(this);a=$c(this,a);if(this.rb(a)){var c=this.G.get(a);A(c)?this.z-=c.length:this.z--}this.G.set(a,b);this.z++;return this};r.get=function(a,b){Zc(this);a=$c(this,a);if(this.rb(a)){var c=this.G.get(a);return A(c)?c[0]:c}else return b};r.setValues=function(a,b){Zc(this);ad(this);a=$c(this,a);if(this.rb(a)){var c=this.G.get(a);A(c)?this.z-=c.length:this.z--}b.length>0&&(this.G.set(a,b),this.z+=b.length)};
r.toString=function(){if(this.Ib)return this.Ib;if(!this.G)return"";for(var a=[],b=0,c=this.G.Mc(),d=0;d<c.length;d++){var f=c[d],g=wa(f),f=this.G.get(f);if(A(f))for(var h=0;h<f.length;h++)b>0&&a.push("&"),a.push(g),f[h]!==""&&a.push("=",wa(f[h])),b++;else b>0&&a.push("&"),a.push(g),f!==""&&a.push("=",wa(f)),b++}return this.Ib=a.join("")};function ad(a){delete a.Pf;delete a.Ib;a.xe&&delete a.xe.$a}
r.ga=function(){var a=new Oc;if(this.Pf)a.Pf=this.Pf;if(this.Ib)a.Ib=this.Ib;if(this.G)a.G=this.G.ga();return a};function $c(a,b){var c=String(b);a.yb&&(c=c.toLowerCase());return c}r.Jd=function(a){a&&!this.yb&&(Zc(this),ad(this),Ob(this.G,function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.add(d,a))},this));this.yb=a};var bd;function cd(a){return(a=a.className)&&typeof a.split=="function"?a.split(/\s+/):[]}function dd(a,b){var c=cd(a),d=Hb(arguments,1),f;f=c;for(var g=0,h=0;h<d.length;h++)Bb(f,d[h])||(f.push(d[h]),g++);f=g==d.length;a.className=c.join(" ");return f}function ed(a,b){var c=cd(a),d=Hb(arguments,1),f;f=c;for(var g=0,h=0;h<f.length;h++)Bb(d,f[h])&&(Gb(f,h--,1),g++);f=g==d.length;a.className=c.join(" ");return f};function fd(a,b){this.width=a;this.height=b}function gd(a,b){return a==b?!0:!a||!b?!1:a.width==b.width&&a.height==b.height}r=fd.prototype;r.ga=function(){return new fd(this.width,this.height)};r.Rd=function(){return this.width/this.height};r.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};r.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
r.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};r.scale=function(a){this.width*=a;this.height*=a;return this};var hd=!H||nb();!I&&!H||H&&nb()||I&&K("1.9.1");var id=H&&!K("9");function jd(a){return a?new kd(P(a)):bd||(bd=new kd)}function ld(a){return C(a)?document.getElementById(a):a}
function md(a,b,c,d){a=d||a;b=b&&b!="*"?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(!J||nd(document)||K("528"))&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName)if(a=a.getElementsByClassName(c),b){for(var d={},f=0,g=0,h;h=a[g];g++)b==h.nodeName&&(d[f++]=h);d.length=f;return d}else return a;a=a.getElementsByTagName(b||"*");if(c){d={};for(g=f=0;h=a[g];g++)b=h.className,typeof b.split=="function"&&Bb(b.split(/\s+/),c)&&(d[f++]=h);d.length=f;return d}else return a}
function od(a,b){ob(b,function(b,d){d=="style"?a.style.cssText=b:d=="class"?a.className=b:d=="for"?a.htmlFor=b:d in pd?a.setAttribute(pd[d],b):d.lastIndexOf("aria-",0)==0?a.setAttribute(d,b):a[d]=b})}var pd={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};function Q(a,b,c){return qd(document,arguments)}
function qd(a,b){var c=b[0],d=b[1];if(!hd&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',xa(d.name),'"');if(d.type){c.push(' type="',xa(d.type),'"');var f={};vb(f,d);d=f;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);if(d)C(d)?c.className=d:A(d)?dd.apply(n,[c].concat(d)):od(c,d);b.length>2&&rd(a,c,b,2);return c}
function rd(a,b,c,d){function f(c){c&&b.appendChild(C(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var g=c[d];B(g)&&!(ia(g)&&g.nodeType>0)?M(sd(g)?Eb(g):g,f):f(g)}}function nd(a){return a.compatMode=="CSS1Compat"}function td(a,b){rd(P(a),a,arguments,1)}function ud(a){for(var b;b=a.firstChild;)a.removeChild(b)}function vd(a){return a&&a.parentNode?a.parentNode.removeChild(a):n}
function wd(a){if(a.firstElementChild!=i)a=a.firstElementChild;else for(a=a.firstChild;a&&a.nodeType!=1;)a=a.nextSibling;return a}function xd(a,b){if(a.contains&&b.nodeType==1)return a==b||a.contains(b);if(typeof a.compareDocumentPosition!="undefined")return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function P(a){return a.nodeType==9?a:a.ownerDocument||a.document}
function yd(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&a.firstChild.nodeType==3){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else ud(a),a.appendChild(P(a).createTextNode(b))}var zd={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},Ad={IMG:" ",BR:"\n"};function Bd(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?(a=a.tabIndex,ga(a)&&a>=0&&a<32768):!1}function Cd(a){var b=[];Dd(a,b,!1);return b.join("")}
function Dd(a,b,c){if(!(a.nodeName in zd))if(a.nodeType==3)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in Ad)b.push(Ad[a.nodeName]);else for(a=a.firstChild;a;)Dd(a,b,c),a=a.nextSibling}function sd(a){if(a&&typeof a.length=="number")if(ia(a))return typeof a.item=="function"||typeof a.item=="string";else if(ha(a))return typeof a.item=="function";return!1}function kd(a){this.B=a||s.document||document}r=kd.prototype;r.$=jd;
function Ed(a){return a.B}r.d=function(a){return C(a)?this.B.getElementById(a):a};r.t=function(a,b,c){return qd(this.B,arguments)};r.createElement=function(a){return this.B.createElement(a)};r.createTextNode=function(a){return this.B.createTextNode(a)};function Fd(a){return nd(a.B)}function Gd(a){var b=a.B,a=!J&&nd(b)?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new G(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}r.appendChild=function(a,b){a.appendChild(b)};
r.append=td;r.vi=ud;r.removeNode=vd;r.Fh=wd;r.contains=xd;function Hd(a,b){this.xe=new Hc(a);this.nj=b?b:"callback";this.hd=5E3}var Id=0;
Hd.prototype.send=function(a,b,c,d){a=a||n;if(!document.documentElement.firstChild)return c&&c(a),n;d=d||"_"+(Id++).toString(36)+E().toString(36);s._callbacks_||(s._callbacks_={});var f=document.createElement("script"),g=n;this.hd>0&&(g=s.setTimeout(Jd(d,f,a,c),this.hd));c=this.xe.ga();if(a)for(var h in a)(!a.hasOwnProperty||a.hasOwnProperty(h))&&Wc(c,h,a[h]);b&&(s._callbacks_[d]=Kd(d,f,b,g),Wc(c,this.nj,"_callbacks_."+d));od(f,{type:"text/javascript",id:d,charset:"UTF-8",src:c.toString()});document.getElementsByTagName("head")[0].appendChild(f);
return{fb:d,hd:g}};Hd.prototype.cancel=function(a){if(a&&a.fb){var b=ld(a.fb);b&&b.tagName=="SCRIPT"&&typeof s._callbacks_[a.fb]=="function"&&(a.hd&&s.clearTimeout(a.hd),Ld(a.fb,b,!1))}};function Jd(a,b,c,d){return function(){Ld(a,b,!1);d&&d(c)}}function Kd(a,b,c,d){return function(f){s.clearTimeout(d);Ld(a,b,!0);c.apply(i,arguments)}}function Ld(a,b,c){s.setTimeout(function(){vd(b)},0);s._callbacks_[a]&&(c?delete s._callbacks_[a]:s._callbacks_[a]=u)};function Md(a,b){this.ql=a||"http://open.mapquestapi.com/nominatim/v1/search";this.ke=b||{};this.Yh=new Hd(this.ql,"json_callback")}
function Nd(a,b,c,d){a.ke.q=b;a.ke.format="json";a.ke.addressdetails=1;a.ke.limit=c;if(!b||b.length==1)d(b,[]);else{if(c==1)a.Fk=b;if(!(c>1&&b===a.Fk))a.yi!==n&&a.Yh.cancel(a.yi),a.yi=a.Yh.send(a.ke,function(a){var c=xb(a,function(a){return a["class"]=="place"});c.length>0?(M(c,function(a){var b=a.address.country_code=="us"?a.address.state:a.address.country;a.type=="suburb"&&(b=a.address.city+", "+b);a.display_name=a.address[a.type]?a.address[a.type]+", "+b:a.display_name}),d(b,c)):d(b,a)})}};var Od;var Pd=!H||nb(),Qd=H&&!K("8");function Rd(a,b){this.type=a;this.currentTarget=this.target=b}F(Rd,Ha);r=Rd.prototype;r.h=function(){delete this.type;delete this.target;delete this.currentTarget};r.$c=!1;r.ne=!0;r.stopPropagation=function(){this.$c=!0};r.preventDefault=function(){this.ne=!1};function Sd(a){a.preventDefault()};function Ud(a){Ud[" "](a);return a}Ud[" "]=u;function Vd(a,b){a&&this.jc(a,b)}F(Vd,Rd);var Wd=[1,4,2];r=Vd.prototype;r.target=n;r.relatedTarget=n;r.offsetX=0;r.offsetY=0;r.clientX=0;r.clientY=0;r.screenX=0;r.screenY=0;r.button=0;r.keyCode=0;r.charCode=0;r.ctrlKey=!1;r.altKey=!1;r.shiftKey=!1;r.metaKey=!1;r.Uk=!1;r.xa=n;
r.jc=function(a,b){var c=this.type=a.type;Rd.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(I){var f;a:{try{Ud(d.nodeName);f=!0;break a}catch(g){}f=!1}f||(d=n)}}else if(c=="mouseover")d=a.fromElement;else if(c=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Uk=Ua?a.metaKey:a.ctrlKey;this.state=a.state;this.xa=a;delete this.ne;delete this.$c};function Xd(a,b){return Pd?a.xa.button==b:a.type=="click"?b==0:!!(a.xa.button&Wd[b])}function Zd(a){return Xd(a,0)&&!(J&&Ua&&a.ctrlKey)}
r.stopPropagation=function(){Vd.b.stopPropagation.call(this);this.xa.stopPropagation?this.xa.stopPropagation():this.xa.cancelBubble=!0};r.preventDefault=function(){Vd.b.preventDefault.call(this);var a=this.xa;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Qd)try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123)a.keyCode=-1}catch(b){}};r.Dj=p("xa");r.h=function(){Vd.b.h.call(this);this.relatedTarget=this.currentTarget=this.target=this.xa=n};function $d(){}var ae=0;r=$d.prototype;r.key=0;r.ad=!1;r.rh=!1;r.jc=function(a,b,c,d,f,g){ha(a)?this.Xh=!0:a&&a.handleEvent&&ha(a.handleEvent)?this.Xh=!1:e(Error("Invalid listener argument"));this.Bd=a;this.ti=b;this.src=c;this.type=d;this.capture=!!f;this.Te=g;this.rh=!1;this.key=++ae;this.ad=!1};r.handleEvent=function(a){return this.Xh?this.Bd.call(this.Te||this.src,a):this.Bd.handleEvent.call(this.Bd,a)};var be,ce=(be="ScriptEngine"in s&&s.ScriptEngine()=="JScript")?s.ScriptEngineMajorVersion()+"."+s.ScriptEngineMinorVersion()+"."+s.ScriptEngineBuildVersion():"0";function de(a,b){this.ei=b;this.Lc=[];a>this.ei&&e(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Lc.push(this.Gb?this.Gb():{})}F(de,Ha);de.prototype.Gb=n;de.prototype.zh=n;de.prototype.getObject=function(){return this.Lc.length?this.Lc.pop():this.Gb?this.Gb():{}};function ee(a,b){a.Lc.length<a.ei?a.Lc.push(b):fe(a,b)}function fe(a,b){if(a.zh)a.zh(b);else if(ia(b))if(ha(b.j))b.j();else for(var c in b)delete b[c]}
de.prototype.h=function(){de.b.h.call(this);for(var a=this.Lc;a.length;)fe(this,a.pop());delete this.Lc};var ge,he,ie,je,ke,le,me,ne,oe,pe,qe;
(function(){function a(){return{z:0,ib:0}}function b(){return[]}function c(){function a(b){b=h.call(a.src,a.key,b);if(!b)return b}return a}function d(){return new $d}function f(){return new Vd}var g=be&&!(Fa(ce,"5.7")>=0),h;le=function(a){h=a};if(g){ge=function(){return j.getObject()};he=function(a){ee(j,a)};ie=function(){return k.getObject()};je=function(a){ee(k,a)};ke=function(){return l.getObject()};me=function(){ee(l,c())};ne=function(){return o.getObject()};oe=function(a){ee(o,a)};pe=function(){return m.getObject()};
qe=function(a){ee(m,a)};var j=new de(0,600);j.Gb=a;var k=new de(0,600);k.Gb=b;var l=new de(0,600);l.Gb=c;var o=new de(0,600);o.Gb=d;var m=new de(0,600);m.Gb=f}else ge=a,he=u,ie=b,je=u,ke=c,me=u,ne=d,oe=u,pe=f,qe=u})();var re={},se={},te={},ue={};
function R(a,b,c,d,f){if(b)if(A(b)){for(var g=0;g<b.length;g++)R(a,b[g],c,d,f);return n}else{var d=!!d,h=se;b in h||(h[b]=ge());h=h[b];d in h||(h[d]=ge(),h.z++);var h=h[d],j=ja(a),k;h.ib++;if(h[j]){k=h[j];for(g=0;g<k.length;g++)if(h=k[g],h.Bd==c&&h.Te==f){if(h.ad)break;return k[g].key}}else k=h[j]=ie(),h.z++;g=ke();g.src=a;h=ne();h.jc(c,g,a,b,d,f);c=h.key;g.key=c;k.push(h);re[c]=h;te[j]||(te[j]=ie());te[j].push(h);a.addEventListener?(a==s||!a.wh)&&a.addEventListener(b,g,d):a.attachEvent(b in ue?ue[b]:
ue[b]="on"+b,g);return c}else e(Error("Invalid event type"))}function ve(a,b,c,d,f){if(A(b))for(var g=0;g<b.length;g++)ve(a,b[g],c,d,f);else if(d=!!d,a=we(a,b,d))for(g=0;g<a.length;g++)if(a[g].Bd==c&&a[g].capture==d&&a[g].Te==f){S(a[g].key);break}}
function S(a){if(!re[a])return!1;var b=re[a];if(b.ad)return!1;var c=b.src,d=b.type,f=b.ti,g=b.capture;c.removeEventListener?(c==s||!c.wh)&&c.removeEventListener(d,f,g):c.detachEvent&&c.detachEvent(d in ue?ue[d]:ue[d]="on"+d,f);c=ja(c);f=se[d][g][c];if(te[c]){var h=te[c];Cb(h,b);h.length==0&&delete te[c]}b.ad=!0;f.ii=!0;xe(d,g,c,f);delete re[a];return!0}
function xe(a,b,c,d){if(!d.af&&d.ii){for(var f=0,g=0;f<d.length;f++)if(d[f].ad){var h=d[f].ti;h.src=n;me(h);oe(d[f])}else f!=g&&(d[g]=d[f]),g++;d.length=g;d.ii=!1;g==0&&(je(d),delete se[a][b][c],se[a][b].z--,se[a][b].z==0&&(he(se[a][b]),delete se[a][b],se[a].z--),se[a].z==0&&(he(se[a]),delete se[a]))}}
function ye(a){var b,c=0,d=b==n;b=!!b;if(a==n)ob(te,function(a){for(var f=a.length-1;f>=0;f--){var g=a[f];if(d||b==g.capture)S(g.key),c++}});else if(a=ja(a),te[a])for(var a=te[a],f=a.length-1;f>=0;f--){var g=a[f];if(d||b==g.capture)S(g.key),c++}}function we(a,b,c){var d=se;return b in d&&(d=d[b],c in d&&(d=d[c],a=ja(a),d[a]))?d[a]:n}
function ze(a,b,c,d,f){var g=1,b=ja(b);if(a[b]){a.ib--;a=a[b];a.af?a.af++:a.af=1;try{for(var h=a.length,j=0;j<h;j++){var k=a[j];k&&!k.ad&&(g&=Ae(k,f)!==!1)}}finally{a.af--,xe(c,d,b,a)}}return Boolean(g)}function Ae(a,b){var c=a.handleEvent(b);a.rh&&S(a.key);return c}
le(function(a,b){if(!re[a])return!0;var c=re[a],d=c.type,f=se;if(!(d in f))return!0;var f=f[d],g,h;Od===i&&(Od=H&&!s.addEventListener);if(Od){g=b||da("window.event");var j=!0 in f,k=!1 in f;if(j){if(g.keyCode<0||g.returnValue!=i)return!0;a:{var l=!1;if(g.keyCode==0)try{g.keyCode=-1;break a}catch(o){l=!0}if(l||g.returnValue==i)g.returnValue=!0}}l=pe();l.jc(g,this);g=!0;try{if(j){for(var m=ie(),x=l.currentTarget;x;x=x.parentNode)m.push(x);h=f[!0];h.ib=h.z;for(var v=m.length-1;!l.$c&&v>=0&&h.ib;v--)l.currentTarget=
m[v],g&=ze(h,m[v],d,!0,l);if(k){h=f[!1];h.ib=h.z;for(v=0;!l.$c&&v<m.length&&h.ib;v++)l.currentTarget=m[v],g&=ze(h,m[v],d,!1,l)}}else g=Ae(c,l)}finally{if(m)m.length=0,je(m);l.j();qe(l)}return g}d=new Vd(b,this);try{g=Ae(c,d)}finally{d.j()}return g});function T(){}F(T,Ha);r=T.prototype;r.wh=!0;r.kf=n;r.Tg=ba("kf");r.addEventListener=function(a,b,c,d){R(this,a,b,c,d)};r.removeEventListener=function(a,b,c,d){ve(this,a,b,c,d)};
r.dispatchEvent=function(a){var b=a.type||a,c=se;if(b in c){if(C(a))a=new Rd(a,this);else if(a instanceof Rd)a.target=a.target||this;else{var d=a,a=new Rd(b,this);vb(a,d)}var d=1,f,c=c[b],b=!0 in c,g;if(b){f=[];for(g=this;g;g=g.kf)f.push(g);g=c[!0];g.ib=g.z;for(var h=f.length-1;!a.$c&&h>=0&&g.ib;h--)a.currentTarget=f[h],d&=ze(g,f[h],a.type,!0,a)&&a.ne!=!1}if(!1 in c)if(g=c[!1],g.ib=g.z,b)for(h=0;!a.$c&&h<f.length&&g.ib;h++)a.currentTarget=f[h],d&=ze(g,f[h],a.type,!1,a)&&a.ne!=!1;else for(f=this;!a.$c&&
f&&g.ib;f=f.kf)a.currentTarget=f,d&=ze(g,f,a.type,!1,a)&&a.ne!=!1;a=Boolean(d)}else a=!0;return a};r.h=function(){T.b.h.call(this);ye(this);this.kf=n};function Be(a,b,c){this.he=a;this.tc=c;this.k=b;R(b,[Ce,De,Ee,Fe],this);this.kb=n;this.va=[];this.za=-1;this.Ga=0;this.Hc=this.ea=n}F(Be,T);r=Be.prototype;r.ik=10;r.cj=!0;r.oh=!1;r.Wi=!1;r.Oi=!1;var Ce="hilite",De="select",Fe="dismiss",Ee="canceldismiss";r=Be.prototype;r.handleEvent=function(a){if(a.target==this.k)switch(a.type){case Ce:this.eb(a.row);break;case De:Ge(this);break;case Ee:He(this);break;case Fe:Ie(this)}};r.wd=p("ea");r.Ta=function(){return this.k.ba()};
function Je(a){var b=a.Ga+a.va.length-1;a.za>=a.Ga&&a.za<b?a.eb(a.za+1):a.za==-1?a.eb(a.Ga):a.za==b&&(a.oh?a.eb(-1):a.Wi&&a.eb(a.Ga))}function Ke(a){a.za>a.Ga?a.eb(a.za-1):a.oh&&a.za==a.Ga?a.eb(-1):a.Wi&&(a.za==-1||a.za==a.Ga)&&a.eb(a.Ga+a.va.length-1)}r.eb=function(a){this.za=a;this.k.eb(a);return Le(this,a)!=-1};
function Ge(a){var b=Le(a,a.za);if(b!=-1){var b=a.va[b],c=a.tc,d=b.toString();if(w(i)?0:c.Cd){var f=Me(c,c.o(),Ne(c.P)),g=Oe(c,c.o());c.cl.test(d)||(d=d.replace(/[\s\xa0]+$/,"")+c.vj);c.sl&&(f!=0&&!/^[\s\xa0]*$/.test(g[f-1])&&(d=" "+d),f==g.length-1&&(d+=" "));if(d!=g[f]){g[f]=d;d=c.P;I&&d.blur();d.value=g.join("");for(var h=0,j=0;j<=f;j++)h+=g[j].length;d.focus();f=h;g=c.P;d=f;Pe(g)?g.selectionStart=d:H&&(h=Qe(g),j=h[0],j.inRange(h[1])&&(d=Re(g,d),j.collapse(!0),j.move("character",d),j.select()));
g=c.P;Pe(g)?g.selectionEnd=f:H&&(h=Qe(g),d=h[1],h[0].inRange(d)&&(f=Re(g,f),g=Re(g,Ne(g)),d.collapse(!0),d.moveEnd("character",f-g),d.select()))}}else c.Y(d);c.Qg=!0;a.Oi?(a.kb=n,Ie(a)):a.Hb();a.dispatchEvent({type:"update",row:b});a.Oi&&a.tc.update(!0);return!0}else return a.Hb(),a.dispatchEvent({type:"update",row:n}),!1}r.Hb=function(){this.za=-1;this.kb=n;this.Ga+=this.va.length;this.va=[];window.clearTimeout(this.Hc);this.Hc=n;this.k.Hb();this.dispatchEvent("suggestionsupdate")};
function Ie(a){if(!a.Hc)a.Hc=window.setTimeout(D(a.Hb,a),100)}function He(a){window.setTimeout(D(function(){if(this.Hc)window.clearTimeout(this.Hc),this.Hc=n},a),10)}r.h=function(){Be.b.h.call(this);this.k.j();this.tc.j();this.he=n};r.fk=function(a,b,c){this.kb==a&&this.Og(b,c)};
r.Og=function(a,b){var c=b?Le(this,this.za):n;this.Ga+=this.va.length;this.va=a;for(var d=[],f=0;f<a.length;++f)d.push({id:this.Ga+f,data:a[f]});this.k.Og(d,this.kb,this.ea);this.cj&&d.length!=0&&this.kb?this.eb(c!=n?this.Ga+c:this.Ga):this.za=-1;this.dispatchEvent("suggestionsupdate")};function Le(a,b){var c=b-a.Ga;return c<0||c>=a.va.length?-1:c}r.Ff=function(a){var b=this.tc;b.Ff.apply(b,arguments)};r.update=function(a){this.tc.update(a)};function Se(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}Se.prototype.ga=function(){return new Se(this.left,this.top,this.width,this.height)};Se.prototype.Wh=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top),a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,!0}return!1};
Se.prototype.contains=function(a){return a instanceof Se?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};Se.prototype.Kb=function(){return new fd(this.width,this.height)};function Te(a,b){var c=P(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,n))?c[b]||c.getPropertyValue(b):""}function Ue(a,b){return a.currentStyle?a.currentStyle[b]:n}function Ve(a,b){return Te(a,b)||Ue(a,b)||a.style[b]}function We(a,b,c){var d,f=I&&(Ua||db)&&K("1.9");b instanceof G?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Xe(d,f);a.style.top=Xe(b,f)}function Ye(a){a=a?a.nodeType==9?a:P(a):document;return H&&!nb()&&!Fd(jd(a))?a.body:a.documentElement}
function Ze(a){var b=a.getBoundingClientRect();if(H)a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop;return b}
function $e(a){if(H)return a.offsetParent;for(var b=P(a),c=Ve(a,"position"),d=c=="fixed"||c=="absolute",a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Ve(a,"position"),d=d&&c=="static"&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||c=="fixed"||c=="absolute"||c=="relative"))return a;return n}
function af(a){for(var b=new Oa(0,Infinity,Infinity,0),c=jd(a),d=c.B.body,f=c.B.documentElement,g=!J&&nd(c.B)?c.B.documentElement:c.B.body;a=$e(a);)if((!H||a.clientWidth!=0)&&(!J||a.clientHeight!=0||a!=d)&&a!=d&&a!=f&&Ve(a,"overflow")!="visible"){var h=bf(a),j;j=a;if(I&&!K("1.9")){var k=parseFloat(Te(j,"borderLeftWidth"));if(cf(j)){var l=j.offsetWidth-j.clientWidth-k-parseFloat(Te(j,"borderRightWidth"));k+=l}j=new G(k,parseFloat(Te(j,"borderTopWidth")))}else j=new G(j.clientLeft,j.clientTop);h.x+=
j.x;h.y+=j.y;b.top=Math.max(b.top,h.y);b.right=Math.min(b.right,h.x+a.clientWidth);b.bottom=Math.min(b.bottom,h.y+a.clientHeight);b.left=Math.max(b.left,h.x)}d=g.scrollLeft;g=g.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,g);c=c.B.parentWindow||c.B.defaultView||window;f=c.document;J&&!K("500")&&!ab?(typeof c.innerHeight=="undefined"&&(c=window),f=c.innerHeight,a=c.document.documentElement.scrollHeight,c==c.top&&a<f&&(f-=15),c=new fd(c.innerWidth,f)):(c=nd(f)?f.documentElement:f.body,c=
new fd(c.clientWidth,c.clientHeight));b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,g+c.height);return b.top>=0&&b.left>=0&&b.bottom>b.top&&b.right>b.left?b:n}
function bf(a){var b,c=P(a),d=Ve(a,"position"),f=I&&c.getBoxObjectFor&&!a.getBoundingClientRect&&d=="absolute"&&(b=c.getBoxObjectFor(a))&&(b.screenX<0||b.screenY<0),g=new G(0,0),h=Ye(c);if(a==h)return g;if(a.getBoundingClientRect)b=Ze(a),a=Gd(jd(c)),g.x=b.left+a.x,g.y=b.top+a.y;else if(c.getBoxObjectFor&&!f)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),g.x=b.screenX-a.screenX,g.y=b.screenY-a.screenY;else{b=a;do{g.x+=b.offsetLeft;g.y+=b.offsetTop;b!=a&&(g.x+=b.clientLeft||0,g.y+=b.clientTop||0);if(J&&
Ve(b,"position")=="fixed"){g.x+=c.body.scrollLeft;g.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if($a||J&&d=="absolute")g.y-=c.body.offsetTop;for(b=a;(b=$e(b))&&b!=c.body&&b!=h;)if(g.x-=b.scrollLeft,!$a||b.tagName!="TR")g.y-=b.scrollTop}return g}
function df(a){var b=new G;if(a.nodeType==1)if(a.getBoundingClientRect)a=Ze(a),b.x=a.left,b.y=a.top;else{var c=Gd(jd(a)),a=bf(a);b.x=a.x-c.x;b.y=a.y-c.y}else{var c=ha(a.Dj),d=a;a.targetTouches?d=a.targetTouches[0]:c&&a.xa.targetTouches&&(d=a.xa.targetTouches[0]);b.x=d.clientX;b.y=d.clientY}return b}function ef(a,b,c){var d=bf(a);if(b instanceof G)c=b.y,b=b.x;We(a,a.offsetLeft+(b-d.x),a.offsetTop+(c-d.y))}function Xe(a,b){typeof a=="number"&&(a=(b?Math.round(a):a)+"px");return a}
function ff(a){if(Ve(a,"display")!="none")return gf(a);var b=a.style,c=b.display,d=b.visibility,f=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=gf(a);b.display=c;b.position=f;b.visibility=d;return a}function gf(a){var b=a.offsetWidth,c=a.offsetHeight,d=J&&!b&&!c;return(!w(b)||d)&&a.getBoundingClientRect?(a=Ze(a),new fd(a.right-a.left,a.bottom-a.top)):new fd(b,c)}function hf(a){var b=bf(a),a=ff(a);return new Se(b.x,b.y,a.width,a.height)}
function jf(a,b){a.style.display=b?"":"none"}function cf(a){return"rtl"==Ve(a,"direction")}var kf=I?"MozUserSelect":J?"WebkitUserSelect":n;function lf(a,b,c){c=!c?a.getElementsByTagName("*"):n;if(kf){if(b=b?"none":"",a.style[kf]=b,c)for(var a=0,d;d=c[a];a++)d.style[kf]=b}else if(H||$a)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}
function mf(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);else{var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var f=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return f}}var nf={thin:2,medium:4,thick:6};function of(a,b){if(Ue(a,b+"Style")=="none")return 0;var c=Ue(a,b+"Width");return c in nf?nf[c]:mf(a,c)}
function pf(a){if(H){var b=of(a,"borderLeft"),c=of(a,"borderRight"),d=of(a,"borderTop"),a=of(a,"borderBottom");return new Oa(d,c,a,b)}else return b=Te(a,"borderLeftWidth"),c=Te(a,"borderRightWidth"),d=Te(a,"borderTopWidth"),a=Te(a,"borderBottomWidth"),new Oa(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))};function qf(a,b){this.$d=a||1;this.ve=b||rf;this.Hf=D(this.dh,this);this.vg=E()}F(qf,T);qf.prototype.enabled=!1;var rf=s.window;r=qf.prototype;r.w=n;r.setInterval=function(a){this.$d=a;this.w&&this.enabled?(this.stop(),this.start()):this.w&&this.stop()};r.dh=function(){if(this.enabled){var a=E()-this.vg;if(a>0&&a<this.$d*0.8)this.w=this.ve.setTimeout(this.Hf,this.$d-a);else if(this.dispatchEvent(sf),this.enabled)this.w=this.ve.setTimeout(this.Hf,this.$d),this.vg=E()}};
r.start=function(){this.enabled=!0;if(!this.w)this.w=this.ve.setTimeout(this.Hf,this.$d),this.vg=E()};r.stop=function(){this.enabled=!1;if(this.w)this.ve.clearTimeout(this.w),this.w=n};r.h=function(){qf.b.h.call(this);this.stop();delete this.ve};var sf="tick";function tf(a,b,c,d){(!A(a)||!A(b))&&e(Error("Start and end parameters must be arrays"));a.length!=b.length&&e(Error("Start and end points must be the same length"));this.Ld=a;this.zj=b;this.duration=c;this.lh=d;this.coords=[]}F(tf,T);var sb={},uf=n;function vf(){wf();var a=E(),b;for(b in sb)xf(sb[b],a);uf=rb()?n:rf.setTimeout(vf,20)}function wf(){uf&&(rf.clearTimeout(uf),uf=n)}function yf(a){a=ja(a);delete sb[a];rb()&&wf()}r=tf.prototype;r.s=0;r.Eh=0;r.Ba=0;r.startTime=n;r.Bh=n;r.tg=n;
r.play=function(a){if(a||this.s==0)this.Ba=0,this.coords=this.Ld;else if(this.s==1)return!1;yf(this);this.startTime=a=E();this.s==-1&&(this.startTime-=this.duration*this.Ba);this.Bh=this.startTime+this.duration;this.tg=this.startTime;this.Ba||this.Ma();zf(this,"play");this.s==-1&&this.Kg();this.s=1;var b=ja(this);b in sb||(sb[b]=this);uf||(uf=rf.setTimeout(vf,20));xf(this,a);return!0};r.stop=function(a){yf(this);this.s=0;if(a)this.Ba=1;Af(this,this.Ba);this.Lg();this.qc()};
r.h=function(){this.s!=0&&this.stop(!1);this.Hg();tf.b.h.call(this)};function xf(a,b){a.Ba=(b-a.startTime)/(a.Bh-a.startTime);if(a.Ba>=1)a.Ba=1;a.Eh=1E3/(b-a.tg);a.tg=b;Af(a,a.Ba);a.Ba==1?(a.s=0,yf(a),zf(a,"finish"),a.qc()):a.s==1&&a.Fg()}function Af(a,b){ha(a.lh)&&(b=a.lh(b));a.coords=Array(a.Ld.length);for(var c=0;c<a.Ld.length;c++)a.coords[c]=(a.zj[c]-a.Ld[c])*b+a.Ld[c]}r.Fg=function(){zf(this,"animate")};r.Ma=function(){zf(this,"begin")};r.Hg=function(){zf(this,"destroy")};
r.qc=function(){zf(this,"end")};r.Kg=function(){zf(this,"resume")};r.Lg=function(){zf(this,"stop")};function zf(a,b){a.dispatchEvent(new Bf(b,a))}function Bf(a,b){Rd.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.H=b.coords[2];this.duration=b.duration;this.Ba=b.Ba;this.Wf=b.Eh;this.state=b.s;this.yl=b}F(Bf,Rd);function U(a,b,c,d,f){tf.call(this,b,c,d,f);this.element=a}F(U,tf);U.prototype.jd=u;U.prototype.Fg=function(){this.jd();U.b.Fg.call(this)};U.prototype.qc=function(){this.jd();U.b.qc.call(this)};U.prototype.Ma=function(){this.jd();U.b.Ma.call(this)};function Cf(a,b,c,d,f){(b.length!=2||c.length!=2)&&e(Error("Start and end points must be 2D"));U.apply(this,arguments)}F(Cf,U);
Cf.prototype.jd=function(){this.element.style.left=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};function Df(a,b,c,d){Cf.call(this,a,[a.offsetLeft,a.offsetTop],b,c,d)}F(Df,Cf);Df.prototype.Ma=function(){this.Ld=[this.element.offsetLeft,this.element.offsetTop];Df.b.Ma.call(this)};function Ef(a,b,c,d,f){U.call(this,a,[b],[c],d,f)}F(Ef,U);Ef.prototype.jd=function(){this.element.style.width=Math.round(this.coords[0])+"px"};
function Ff(a,b,c,d,f){U.call(this,a,[b],[c],d,f)}F(Ff,U);Ff.prototype.jd=function(){this.element.style.height=Math.round(this.coords[0])+"px"};function Gf(a,b,c,d,f){ga(b)&&(b=[b]);ga(c)&&(c=[c]);U.call(this,a,b,c,d,f);(b.length!=1||c.length!=1)&&e(Error("Start and end points must be 1D"))}F(Gf,U);
Gf.prototype.jd=function(){var a=this.coords[0],b=this.element.style;if("opacity"in b)b.opacity=a;else if("MozOpacity"in b)b.MozOpacity=a;else if("filter"in b)b.filter=a===""?"":"alpha(opacity="+a*100+")"};Gf.prototype.show=function(){this.element.style.display=""};function Hf(a,b,c){Gf.call(this,a,1,0,b,c)}F(Hf,Gf);Hf.prototype.Ma=function(){this.show();Hf.b.Ma.call(this)};Hf.prototype.qc=function(){this.element.style.display="none";Hf.b.qc.call(this)};
function If(a,b,c){Gf.call(this,a,0,1,b,c)}F(If,Gf);If.prototype.Ma=function(){this.show();If.b.Ma.call(this)};function Jf(){}ea(Jf);Jf.prototype.Ck=0;function Kf(a){return":"+(a.Ck++).toString(36)}Jf.Ha();function Lf(a,b){a.setAttribute("role",b);a.Hl=b}function V(a,b,c){a.setAttribute("aria-"+b,c)};function Mf(a,b,c,d){this.O=a||document.body;this.X=jd(this.O);this.Yk=!a;this.f=n;this.kb="";this.va=[];this.bd=[];this.Hi=this.Ue=-1;this.V=!1;this.className="ac-renderer";this.Pg="ac-row";this.ai="active";this.mh="ac-active";this.Tj="ac-highlighted";this.qd=b||n;this.rl=d!=n?d:!0;this.kg=!1;this.$k=c!=n?c:!1;this.pg=n;this.wf=!1;this.cf=0}F(Mf,T);r=Mf.prototype;r.d=p("f");r.Og=function(a,b,c){this.kb=b;this.va=a;this.Ue=-1;this.Hi=E();this.ea=c;this.bd=[];Nf(this)};
r.Hb=function(){this.ea&&V(this.ea,"activedescendant","");if(this.V)this.V=!1,this.ea&&V(this.ea,"haspopup",!1),this.cf>0?(Ja(this.F),this.F=new Hf(this.f,this.cf),this.F.play()):jf(this.f,!1)};r.show=function(){if(!this.V)this.V=!0,this.ea&&(Lf(this.ea,"combobox"),V(this.ea,"autocomplete","list"),V(this.ea,"haspopup",!0)),this.cf>0?(Ja(this.F),this.F=new If(this.f,this.cf),this.F.play()):jf(this.f,!0)};r.ba=p("V");
function Of(a,b){var c=b>=0&&b<a.bd.length?a.bd[b]:i;if(a.dispatchEvent({type:"rowhilite",Il:c})&&(Pf(a),a.Ue=b,c)){dd(c,a.mh,a.ai);a.ea&&V(a.ea,"activedescendant",c?c.id:"");var d=a.f,f=bf(c),g=bf(d),h=pf(d),j=f.x-g.x-h.left,f=f.y-g.y-h.top,g=d.clientHeight-c.offsetHeight;d.scrollLeft+=Math.min(j,Math.max(j-(d.clientWidth-c.offsetWidth),0));d.scrollTop+=Math.min(f,Math.max(f-g,0))}}function Pf(a){a.Ue>=0&&ed(a.bd[a.Ue],a.mh,a.ai)}
r.eb=function(a){if(a==-1)Of(this,-1);else for(var b=0;b<this.va.length;b++)if(this.va[b].id==a){Of(this,b);break}};function Qf(a){if(!a.f){var b=a.X.t("div",{style:"display:none"});a.f=b;dd(b,a.className);Lf(b,"listbox");b.id=Kf(Jf.Ha());a.X.appendChild(a.O,b);R(b,"click",a.Jh,!1,a);R(b,"mousedown",a.Se,!1,a);R(a.X.B,"mousedown",a.Lh,!1,a);R(b,"mouseover",a.Mh,!1,a)}}
function Nf(a){Qf(a);if(a.wf)a.f.style.visibility="hidden";if(a.tl)a.f.style.minWidth=a.tl.clientWidth+"px";a.bd.length=0;a.X.vi(a.f);if(a.qd&&a.qd.Tb)a.qd.Tb(a);else{var b=n;Tb(a.va,function(a){var d=this.kb,f=this.X.t("div",{className:this.Pg,id:Kf(Jf.Ha())});Lf(f,"option");this.qd&&this.qd.wi?this.qd.wi(a,d,f):f.innerHTML=xa(a.data.toString());d&&this.rl&&Rf(this,f,d);dd(f,this.Pg);this.bd.push(f);a=f;this.wf?this.f.insertBefore(a,b):this.X.appendChild(this.f,a);b=a},a)}a.va.length==0?a.Hb():(a.show(),
a.me(),lf(a.f,!0))}r.me=function(){if(this.ea&&this.Yk){var a=bf(this.ea),b=ff(this.ea),c=ff(Ye(this.ea)),d=ff(this.f);a.y=this.wf?a.y-d.height:a.y+b.height;(this.$k||a.x+d.width>c.width)&&this.pg!="LEFT"?(a.x=a.x+b.width-d.width,this.pg="RIGHT"):this.pg="LEFT";ef(this.f,a);if(this.wf)this.f.style.visibility="visible"}};
r.h=function(){if(this.f)ve(this.f,"click",this.Jh,!1,this),ve(this.f,"mousedown",this.Se,!1,this),ve(this.X.B,"mousedown",this.Lh,!1,this),ve(this.f,"mouseover",this.Mh,!1,this),this.X.removeNode(this.f),this.f=n,this.V=!1;Ja(this.F);delete this.O;Mf.b.h.call(this)};
function Rf(a,b,c){if(b.nodeType==3){var d=n;A(c)&&c.length>1&&!a.kg&&(d=Hb(c,1));c=Sf(a,c);if(c.length!=0){for(var f=b.nodeValue,g=RegExp("(.*?)(^|\\W+)("+c+")","gi"),c=[],h=0,j=g.exec(f),k=0;j;)k++,c.push(j[1]),c.push(j[2]),c.push(j[3]),h=g.lastIndex,j=g.exec(f);c.push(f.substring(h));if(c.length>1){d=!a.kg?1:k;for(f=0;f<d;f++)g=3*f,b.nodeValue=c[g]+c[g+1],h=a.X.createElement("b"),h.className=a.Tj,a.X.appendChild(h,a.X.createTextNode(c[g+2])),h=b.parentNode.insertBefore(h,b.nextSibling),b.parentNode.insertBefore(a.X.createTextNode(""),
h.nextSibling),b=h.nextSibling;a=Hb(c,d*3);b.nodeValue=a.join("")}else d&&Rf(a,b,d)}}else for(b=b.firstChild;b;)d=b.nextSibling,Rf(a,b,c),b=d}function Sf(a,b){var c="";if(!b)return c;a.kg?A(b)?(c=xb(b,function(a){return!/^[\s\xa0]*$/.test(a==n?"":String(a))}),c=yb(c,Da),c=c.join("|")):(c=b.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,""),c=Da(c),c=c.replace(/ /g,"|")):c=A(b)?b.length>0?Da(b[0]):"":Da(b);return c}
function Tf(a,b){for(;b&&b!=a.f&&!Bb(cd(b),a.Pg);)b=b.parentNode;return b?wb(a.bd,b):-1}r.Jh=function(a){var b=Tf(this,a.target);b>=0&&this.dispatchEvent({type:De,row:this.va[b].id});a.stopPropagation()};r.Se=function(a){this.dispatchEvent(Ee);a.stopPropagation();a.preventDefault()};r.Lh=function(a){this.ea==a.target?(Pf(this),a.stopPropagation()):this.dispatchEvent(Fe)};r.Mh=function(a){a=Tf(this,a.target);a>=0&&!(E()-this.Hi<300)&&this.dispatchEvent({type:Ce,row:this.va[a].id})};function Uf(a){this.Qh=a;this.J=[]}F(Uf,Ha);var Vf=[];r=Uf.prototype;r.i=function(a,b,c,d,f){A(b)||(Vf[0]=b,b=Vf);for(var g=0;g<b.length;g++)this.J.push(R(a,b[g],c||this,d||!1,f||this.Qh||this));return this};r.fa=function(a,b,c,d,f){if(A(b))for(var g=0;g<b.length;g++)this.fa(a,b[g],c,d,f);else{a:{c=c||this;f=f||this.Qh||this;d=!!d;if(a=we(a,b,d))for(b=0;b<a.length;b++)if(!a[b].ad&&a[b].Bd==c&&a[b].capture==d&&a[b].Te==f){a=a[b];break a}a=n}if(a)a=a.key,S(a),Cb(this.J,a)}return this};
r.Gd=function(){M(this.J,S);this.J.length=0};r.h=function(){Uf.b.h.call(this);this.Gd()};r.handleEvent=function(){e(Error("EventHandler.handleEvent not implemented"))};function Ne(a){var b;a:{var c=0,d=0;if(Pe(a))c=a.selectionStart,d=-1;else if(H){var f=Qe(a);b=f[0];f=f[1];if(b.inRange(f)){b.setEndPoint("EndToStart",f);if(a.type=="textarea"){f.duplicate();c=a=b.text;for(d=!1;!d;)b.compareEndPoints("StartToEnd",b)==0?d=!0:(b.moveEnd("character",-1),b.text==a?c+="\r\n":d=!0);b=[c.length,-1];break a}c=b.text.length;d=-1}}b=[c,d]}return b[0]}
function Qe(a){var b=a.ownerDocument||a.document,c=b.selection.createRange();a.type=="textarea"?(b=b.body.createTextRange(),b.moveToElementText(a)):b=a.createTextRange();return[b,c]}function Re(a,b){if(a.type=="textarea")b=a.value.substring(0,b).replace(/(\r\n|\r|\n)/g,"\n").length;return b}function Pe(a){try{return typeof a.selectionStart=="number"}catch(b){return!1}};var Wf,Xf;Xf=Wf=!1;var Yf=Wa();Yf&&(Yf.indexOf("Firefox")!=-1||Yf.indexOf("Camino")!=-1||(Yf.indexOf("iPhone")!=-1||Yf.indexOf("iPod")!=-1?Wf=!0:Yf.indexOf("iPad")!=-1&&(Xf=!0)));var Zf=Wf,$f=Xf;function ag(a,b,c,d,f){if(!H&&(!J||!K("525")))return!0;if(Ua&&f)return bg(a);if(f&&!d)return!1;if(!c&&(b==17||b==18))return!1;if(H&&d&&b==a)return!1;switch(a){case 13:return!(H&&nb());case 27:return!J}return bg(a)}
function bg(a){if(a>=48&&a<=57)return!0;if(a>=96&&a<=106)return!0;if(a>=65&&a<=90)return!0;if(J&&a==0)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}};function cg(a,b){a&&this.Sd(a,b)}F(cg,T);r=cg.prototype;r.f=n;r.Ye=n;r.qg=n;r.Ze=n;r.nc=-1;r.mc=-1;
var dg={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},eg={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},fg={61:187,59:186},gg=H||J&&K("525");r=cg.prototype;
r.dg=function(a){if(J&&(this.nc==17&&!a.ctrlKey||this.nc==18&&!a.altKey))this.mc=this.nc=-1;gg&&!ag(a.keyCode,this.nc,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):this.mc=I&&a.keyCode in fg?fg[a.keyCode]:a.keyCode};r.Mj=function(){this.mc=this.nc=-1};
r.handleEvent=function(a){var b=a.xa,c,d;H&&a.type=="keypress"?(c=this.mc,d=c!=13&&c!=27?b.keyCode:0):J&&a.type=="keypress"?(c=this.mc,d=b.charCode>=0&&b.charCode<63232&&bg(c)?b.charCode:0):$a?(c=this.mc,d=bg(c)?b.keyCode:0):(c=b.keyCode||this.mc,d=b.charCode||0,Ua&&d==63&&!c&&(c=191));var f=c,g=b.keyIdentifier;c?c>=63232&&c in dg?f=dg[c]:c==25&&a.shiftKey&&(f=9):g&&g in eg&&(f=eg[g]);a=f==this.nc;this.nc=f;b=new hg(f,d,a,b);try{this.dispatchEvent(b)}finally{b.j()}};r.d=p("f");
r.Sd=function(a,b){this.Ze&&this.detach();this.f=a;this.Ye=R(this.f,"keypress",this,b);this.qg=R(this.f,"keydown",this.dg,b,this);this.Ze=R(this.f,"keyup",this.Mj,b,this)};r.detach=function(){if(this.Ye)S(this.Ye),S(this.qg),S(this.Ze),this.Ze=this.qg=this.Ye=n;this.f=n;this.mc=this.nc=-1};r.h=function(){cg.b.h.call(this);this.detach()};function hg(a,b,c,d){d&&this.jc(d,i);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}F(hg,Vd);function ig(a,b,c,d){d=d||150;this.pe=t(a)?a:jg;this.vj=this.pe.substring(0,1);a=this.Cd?"[\\s"+this.pe+"]+":"[\\s]+";this.Pi=RegExp("^"+a+"|"+a+"$","g");this.cl=RegExp("\\s*["+this.pe+"]$");this.ci=b||"";this.Wk=this.Cd=c!=n?c:!0;this.w=d>0?new qf(d):n;this.wa=new Uf(this);this.Af=new Uf(this);this.M=new cg;this.Zh=-1}F(ig,Ha);var kg=(Zf||$f)&&!K("533.17.9"),jg=",;";r=ig.prototype;r.sl=!0;r.Cj=!0;r.Ri=!1;r.el=!0;r.dl=!0;r.Bf=n;r.P=n;r.ug="";r.Bc=!1;r.Qg=!1;r.Qi=!0;r.o=function(){return this.P.value};
r.Y=function(a){this.P.value=a};r.Ff=function(a){for(var b=0;b<arguments.length;b++){var c=arguments[b];ia(c)&&c.nodeType==1&&V(c,"haspopup",!0);this.wa.i(c,"focus",this.Nc);this.wa.i(c,"blur",this.Mb);if(!this.P&&(this.Af.i(c,"keydown",this.Lk),ia(c)&&c.nodeType==1)){var d=P(c);(d&&d.activeElement)==c&&lg(this,c)}}};r.h=function(){ig.b.h.call(this);this.Bf!=n&&window.clearTimeout(this.Bf);this.wa.j();delete this.wa;this.Af.j();this.M.j()};function mg(a){a.w?a.w.setInterval(300):a.w=new qf(300)}
r.cb=function(a){switch(a.keyCode){case 40:if(this.N.Ta())return this.Ri?Ke(this.N):Je(this.N),a.preventDefault(),!0;else if(!this.Cd)return this.update(!0),a.preventDefault(),!0;break;case 38:if(this.N.Ta())return this.Ri?Je(this.N):Ke(this.N),a.preventDefault(),!0;break;case 9:if(this.N.Ta()&&!a.shiftKey){if(this.update(),Ge(this.N)&&this.Wk)return a.preventDefault(),!0}else this.N.Hb();break;case 13:if(this.N.Ta()){if(this.update(),Ge(this.N))return a.preventDefault(),a.stopPropagation(),!0}else this.N.Hb();
break;case 27:if(this.N.Ta())return this.N.Hb(),a.preventDefault(),a.stopPropagation(),!0;break;case 229:if(!this.Bc){if(!this.Bc)this.wa.i(this.P,"keyup",this.oi),this.wa.i(this.P,"keypress",this.ni),this.Bc=!0;return!0}break;default:this.w&&!this.Qi&&(this.w.stop(),this.w.start())}return ng(this,a)};function ng(a,b){var c=a.Cd&&b.charCode&&a.pe.indexOf(String.fromCharCode(b.charCode))!=-1;a.el&&c&&a.update();return a.dl&&c&&Ge(a.N)?(b.preventDefault(),!0):!1}r.Lj=q(!1);
r.Nc=function(a){lg(this,a.target||n)};function lg(a,b){a.Af.Gd();a.N&&He(a.N);if(b!=a.P)a.P=b,a.w&&(a.w.start(),a.wa.i(a.w,sf,a.Dd)),a.ug=a.o(),a.M.Sd(a.P),a.wa.i(a.M,"key",a.pi),H&&a.wa.i(a.P,"keypress",a.mi)}r.Mb=function(){kg?this.Bf=window.setTimeout(D(this.si,this),0):this.si()};
r.si=function(){if(this.P)this.wa.fa(this.M,"key",this.pi),this.M.detach(),this.wa.fa(this.P,"keyup",this.Lj),H&&this.wa.fa(this.P,"keypress",this.mi),this.Bc&&og(this),this.P=n,this.w&&(this.w.stop(),this.wa.fa(this.w,sf,this.Dd)),this.N&&Ie(this.N)};r.Dd=function(){this.update()};r.Lk=function(a){this.Nc(a)};r.pi=function(a){this.Zh=a.keyCode;this.N&&this.cb(a)};r.ni=function(){this.Bc&&this.Zh!=229&&og(this)};r.oi=function(a){this.Bc&&(a.keyCode==13||a.keyCode==77&&a.ctrlKey)&&og(this)};
function og(a){if(a.Bc)a.Bc=!1,a.wa.fa(a.P,"keypress",a.ni),a.wa.fa(a.P,"keyup",a.oi)}r.mi=function(a){ng(this,a)};r.update=function(a){if(this.P&&(a||this.o()!=this.ug)){if(a||!this.Qg){var a=Ne(this.P),b=this.o(),a=Oe(this,b)[Me(this,b,a)],a=this.Pi?String(a).replace(this.Pi,""):a;if(this.N&&(this.N.ea=this.P,b=this.N,this.o(),b.kb!=a))b.kb=a,Nd(b.he,b.kb,b.ik,D(b.fk,b)),He(b)}this.ug=this.o()}this.Qg=!1};
function Me(a,b,c){a=Oe(a,b);if(c==b.length)return a.length-1;for(var d=b=0,f=0;d<a.length&&f<=c;d++)f+=a[d].length,b=d;return b}function Oe(a,b){if(!a.Cd)return[b];for(var c=String(b).split(""),d=[],f=[],g=0,h=!1;g<c.length;g++)if(a.ci&&a.ci.indexOf(c[g])!=-1){if(a.Cj&&!h)d.push(f.join("")),f.length=0;f.push(c[g]);h=!h}else!h&&a.pe.indexOf(c[g])!=-1?(f.push(c[g]),d.push(f.join("")),f.length=0):f.push(c[g]);d.push(f.join(""));return d};function pg(a,b,c){var d=new Mf(n,{wi:function(a,b,c){c.innerHTML=a.data.display_name+" ("+a.data.type+")"}});this.he=new Md(b,c);b=new ig(n,n,!1);mg(b);b.Qi=!1;b.N=this;b.Ff(a);Be.call(this,this.he,d,b);this.addEventListener("update",function(b){a.value=b.row.display_name})}F(pg,Be);pg.prototype.search=function(a,b,c){Nd(this.he,a,b,c)};function qg(){this.ui=E()}new qg;qg.prototype.set=ba("ui");qg.prototype.reset=function(){this.set(E())};qg.prototype.get=p("ui");function rg(a,b){this.qb=be?[]:"";a!=n&&this.append.apply(this,arguments)}rg.prototype.set=function(a){this.clear();this.append(a)};be?(rg.prototype.Jf=0,rg.prototype.append=function(a,b,c){b==n?this.qb[this.Jf++]=a:(this.qb.push.apply(this.qb,arguments),this.Jf=this.qb.length);return this}):rg.prototype.append=function(a,b,c){this.qb+=a;if(b!=n)for(var d=1;d<arguments.length;d++)this.qb+=arguments[d];return this};rg.prototype.clear=function(){be?this.Jf=this.qb.length=0:this.qb=""};
rg.prototype.toString=function(){if(be){var a=this.qb.join("");this.clear();a&&this.append(a);return a}else return this.qb};function sg(a){zc.call(this,a||"OpenStreetMaps")}F(sg,zc);sg.prototype.xb=q(18);sg.prototype.hc=q(256);sg.prototype.Re=function(a,b,c){var d=["a","b","c"];return(new rg("http://",d[Ac(d.length)],".tile.openstreetmap.org/",a,"/",b,"/",c,".png")).toString()};sg.prototype.md=function(a){td(a,"\u00a9 ",Q("a",{href:"http://www.openstreetmap.org/"},"OpenStreetMap")," contributors, CC-BY-SA")};function tg(){sg.call(this,"MapQuest OSM")}F(tg,sg);tg.prototype.Re=function(a,b,c){return(new rg("http://otile",1+Ac(3),".mqcdn.com/tiles/1.0.0/osm/",a,"/",b,"/",c,".png")).toString()};tg.prototype.md=function(a){td(a,"Map data \u00a9 ",Q("a",{href:"http://www.openstreetmap.org/"},"OpenStreetMap")," contributors, CC-BY-SA",Q("br"));td(a,"Tiles Courtesy of ",Q("a",{href:"http://open.mapquest.co.uk/"},"MapQuest")," ",Q("img",{src:"http://developer.mapquest.com/content/osm/mq_logo.png",border:0}))};function ug(a){this.X=a||jd();this.oe=vg}F(ug,T);ug.prototype.Uj=Jf.Ha();var vg=n;function wg(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}e(Error("Invalid component state"))}r=ug.prototype;r.fb=n;r.I=!1;r.f=n;r.oe=n;r.Bg=n;r.O=n;r.W=n;r.Pa=n;r.Ui=!1;
function xg(a){return a.fb||(a.fb=Kf(a.Uj))}function yg(a,b){if(a.O&&a.O.Pa){var c=a.O.Pa,d=a.fb;d in c&&delete c[d];tb(a.O.Pa,b,a)}a.fb=b}r.d=p("f");r.ya=function(){return this.xd||(this.xd=new Uf(this))};function zg(a,b){a==b&&e(Error("Unable to set parent component"));b&&a.O&&a.fb&&Ag(a.O,a.fb)&&a.O!=b&&e(Error("Unable to set parent component"));a.O=b;ug.b.Tg.call(a,b)}r.getParent=p("O");r.Tg=function(a){this.O&&this.O!=a&&e(Error("Method not supported"));ug.b.Tg.call(this,a)};r.$=p("X");
r.t=function(){this.f=this.X.createElement("div")};r.Tb=function(a){Bg(this,a)};function Bg(a,b,c){a.I&&e(Error("Component already rendered"));a.f||a.t();b?b.insertBefore(a.f,c||n):a.X.B.body.appendChild(a.f);(!a.O||a.O.I)&&a.ha()}r.la=function(a){if(this.I)e(Error("Component already rendered"));else if(a&&this.ab(a)){this.Ui=!0;if(!this.X||this.X.B!=P(a))this.X=jd(a);this.tb(a);this.ha()}else e(Error("Invalid element to decorate"))};r.ab=q(!0);r.tb=ba("f");
r.ha=function(){this.I=!0;Cg(this,function(a){!a.I&&a.d()&&a.ha()})};r.Ra=function(){Cg(this,function(a){a.I&&a.Ra()});this.xd&&this.xd.Gd();this.I=!1};r.h=function(){ug.b.h.call(this);this.I&&this.Ra();this.xd&&(this.xd.j(),delete this.xd);Cg(this,function(a){a.j()});!this.Ui&&this.f&&vd(this.f);this.O=this.Bg=this.f=this.Pa=this.W=n};r.Nd=function(a,b){this.Od(a,Dg(this),b)};
r.Od=function(a,b,c){a.I&&(c||!this.I)&&e(Error("Component already rendered"));(b<0||b>Dg(this))&&e(Error("Child component index out of bounds"));if(!this.Pa||!this.W)this.Pa={},this.W=[];a.getParent()==this?(this.Pa[xg(a)]=a,Cb(this.W,a)):tb(this.Pa,xg(a),a);zg(a,this);Gb(this.W,b,0,a);a.I&&this.I&&a.getParent()==this?(c=this.Z(),c.insertBefore(a.d(),c.childNodes[b]||n)):c?(this.f||this.t(),b=Eg(this,b+1),Bg(a,this.Z(),b?b.f:n)):this.I&&!a.I&&a.f&&a.ha()};r.Z=p("f");
function Fg(a){if(a.oe==n)a.oe=cf(a.I?a.f:a.X.B.body);return a.oe}r.Kd=function(a){this.I&&e(Error("Component already rendered"));this.oe=a};function Dg(a){return a.W?a.W.length:0}function Ag(a,b){return a.Pa&&b?(b in a.Pa?a.Pa[b]:i)||n:n}function Eg(a,b){return a.W?a.W[b]||n:n}function Cg(a,b,c){a.W&&M(a.W,b,c)}function Gg(a,b){return a.W&&b?wb(a.W,b):-1}
r.removeChild=function(a,b){if(a){var c=C(a)?a:xg(a),a=Ag(this,c);if(c&&a){var d=this.Pa;c in d&&delete d[c];Cb(this.W,a);b&&(a.Ra(),a.f&&vd(a.f));zg(a,n)}}a||e(Error("Child is not in parent component"));return a};r.vi=function(a){for(;this.W&&this.W.length!=0;)this.removeChild(Eg(this,0),a)};function Hg(){}var Ig;ea(Hg);r=Hg.prototype;r.vb=aa();r.t=function(a){var b=a.$().t("div",this.vd(a).join(" "),a.getContent());this.of(a,b);return b};r.Z=function(a){return a};r.Ud=function(a,b,c){if(a=a.d?a.d():a)if(H&&!K("7")){var d=Jg(cd(a),b);d.push(b);oa(c?dd:ed,a).apply(n,d)}else c?dd(a,b):ed(a,b)};r.ab=q(!0);
r.la=function(a,b){b.id&&yg(a,b.id);var c=this.Z(b);c&&c.firstChild?Kg(a,c.firstChild.nextSibling?Eb(c.childNodes):c.firstChild):a.nd=n;var d=0,f=this.p(),g=this.p(),h=!1,j=!1,c=!1,k=cd(b);M(k,function(a){!h&&a==f?(h=!0,g==f&&(j=!0)):!j&&a==g?j=!0:d|=this.ag(a)},this);a.s=d;h||(k.push(f),g==f&&(j=!0));j||k.push(g);var l=a.bb;l&&k.push.apply(k,l);if(H&&!K("7")){var o=Jg(k);o.length>0&&(k.push.apply(k,o),c=!0)}if(!h||!j||l||c)b.className=k.join(" ");this.of(a,b);return b};
r.Ad=function(a){Fg(a)&&this.Kd(a.d(),!0);a.isEnabled()&&this.uc(a,a.ba())};r.of=function(a,b){a.isEnabled()||this.Ka(b,1,!0);a.s&8&&this.Ka(b,8,!0);a.U&16&&this.Ka(b,16,!!(a.s&16));a.U&64&&this.Ka(b,64,a.Ta())};r.qe=function(a,b){lf(a,!b,!H&&!$a)};r.Kd=function(a,b){this.Ud(a,this.p()+"-rtl",b)};r.kc=function(a){var b;return a.U&32&&(b=a.aa())?Bd(b):!1};
r.uc=function(a,b){var c;if(a.U&32&&(c=a.aa())){if(!b&&a.s&32){try{c.blur()}catch(d){}a.s&32&&a.Mb(n)}if(Bd(c)!=b)b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex"))}};r.setVisible=function(a,b){jf(a,b)};r.Ja=function(a,b,c){var d=a.d();if(d){var f=this.Wd(b);f&&this.Ud(a,f,c);this.Ka(d,b,c)}};r.Ka=function(a,b,c){Ig||(Ig={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=Ig[b])&&V(a,b,c)};
r.setContent=function(a,b){var c=this.Z(a);if(c&&(ud(c),b))if(C(b))yd(c,b);else{var d=function(a){if(a){var b=P(c);c.appendChild(C(a)?b.createTextNode(a):a)}};A(b)?M(b,d):B(b)&&!("nodeType"in b)?M(Eb(b),d):d(b)}};r.aa=function(a){return a.d()};r.p=q("goog-control");r.vd=function(a){var b=this.p(),c=[b],d=this.p();d!=b&&c.push(d);b=a.s;for(d=[];b;){var f=b&-b;d.push(this.Wd(f));b&=~f}c.push.apply(c,d);(a=a.bb)&&c.push.apply(c,a);H&&!K("7")&&c.push.apply(c,Jg(c));return c};
function Jg(a,b){var c=[];b&&(a=a.concat([b]));M([],function(d){zb(d,oa(Bb,a))&&(!b||Bb(d,b))&&c.push(d.join("_"))});return c}r.Wd=function(a){this.Ee||Lg(this);return this.Ee[a]};r.ag=function(a){if(!this.Ki){this.Ee||Lg(this);var b=this.Ee,c={},d;for(d in b)c[b[d]]=d;this.Ki=c}a=parseInt(this.Ki[a],10);return isNaN(a)?0:a};function Lg(a){var b=a.p();a.Ee={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function Mg(a,b){a||e(Error("Invalid class name "+a));ha(b)||e(Error("Invalid decorator function "+b));Ng[a]=b}var Og={},Ng={};function W(a,b,c){ug.call(this,c);if(!b){for(var b=this.constructor,d;b;){d=ja(b);if(d=Og[d])break;b=b.b?b.b.constructor:n}b=d?ha(d.Ha)?d.Ha():new d:n}this.k=b;this.nd=a}F(W,ug);r=W.prototype;r.nd=n;r.s=0;r.U=39;r.Gf=255;r.tf=0;r.V=!0;r.bb=n;r.fg=!0;r.De=!1;r.lf=n;function Pg(a,b){a.I&&b!=a.fg&&Qg(a,b);a.fg=b}r.aa=function(){return this.k.aa(this)};r.Oe=function(){return this.M||(this.M=new cg)};function Rg(a,b){if(b)a.bb?Bb(a.bb,b)||a.bb.push(b):a.bb=[b],a.k.Ud(a,b,!0)}
r.Ud=function(a,b){if(b)Rg(this,a);else if(a&&this.bb){Cb(this.bb,a);if(this.bb.length==0)this.bb=n;this.k.Ud(this,a,!1)}};r.t=function(){var a=this.k.t(this);this.f=a;var b=this.lf||this.k.vb();b&&Lf(a,b);this.De||this.k.qe(a,!1);this.ba()||this.k.setVisible(a,!1)};r.Z=function(){return this.k.Z(this.d())};r.ab=function(a){return this.k.ab(a)};r.tb=function(a){this.f=a=this.k.la(this,a);var b=this.lf||this.k.vb();b&&Lf(a,b);this.De||this.k.qe(a,!1);this.V=a.style.display!="none"};
r.ha=function(){W.b.ha.call(this);this.k.Ad(this);if(this.U&-2&&(this.fg&&Qg(this,!0),this.U&32)){var a=this.aa();if(a){var b=this.Oe();b.Sd(a);this.ya().i(b,"key",this.cb).i(a,"focus",this.Nc).i(a,"blur",this.Mb)}}};function Qg(a,b){var c=a.ya(),d=a.d();b?(c.i(d,"mouseover",a.hg).i(d,"mousedown",a.Oc).i(d,"mouseup",a.Pc).i(d,"mouseout",a.gg),H&&c.i(d,"dblclick",a.Kh)):(c.fa(d,"mouseover",a.hg).fa(d,"mousedown",a.Oc).fa(d,"mouseup",a.Pc).fa(d,"mouseout",a.gg),H&&c.fa(d,"dblclick",a.Kh))}
r.Ra=function(){W.b.Ra.call(this);this.M&&this.M.detach();this.ba()&&this.isEnabled()&&this.k.uc(this,!1)};r.h=function(){W.b.h.call(this);this.M&&(this.M.j(),delete this.M);delete this.k;this.bb=this.nd=n};r.getContent=p("nd");r.setContent=function(a){this.k.setContent(this.d(),a);this.nd=a};function Kg(a,b){a.nd=b}
r.ud=function(){var a=this.getContent();if(!a)return"";if(!C(a))if(A(a))a=yb(a,Cd).join("");else{if(id&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];Dd(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");id||(a=a.replace(/ +/g," "));a!=" "&&(a=a.replace(/^\s*/,""))}return ta(a)};r.Kd=function(a){W.b.Kd.call(this,a);var b=this.d();b&&this.k.Kd(b,a)};r.qe=function(a){this.De=a;var b=this.d();b&&this.k.qe(b,a)};r.ba=p("V");
r.setVisible=function(a,b){if(b||this.V!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.d();c&&this.k.setVisible(c,a);this.isEnabled()&&this.k.uc(this,a);this.V=a;return!0}return!1};r.isEnabled=function(){return!(this.s&1)};r.Wb=function(a){var b=this.getParent();if((!b||typeof b.isEnabled!="function"||b.isEnabled())&&Sg(this,1,!a))a||(this.setActive(!1),this.Cb(!1)),this.ba()&&this.k.uc(this,a),this.Ja(1,!a)};r.Cb=function(a){Sg(this,2,a)&&this.Ja(2,a)};r.ae=function(){return!!(this.s&4)};
r.setActive=function(a){Sg(this,4,a)&&this.Ja(4,a)};r.Vg=function(a){Sg(this,8,a)&&this.Ja(8,a)};r.Ta=function(){return!!(this.s&64)};r.T=function(a){Sg(this,64,a)&&this.Ja(64,a)};r.Ja=function(a,b){if(this.U&a&&b!=!!(this.s&a))this.k.Ja(this,a,b),this.s=b?this.s|a:this.s&~a};function Tg(a,b,c){a.I&&a.s&b&&!c&&e(Error("Component already rendered"));!c&&a.s&b&&a.Ja(b,!1);a.U=c?a.U|b:a.U&~b}function Ug(a,b){return!!(a.Gf&b)&&!!(a.U&b)}
function Sg(a,b,c){return!!(a.U&b)&&!!(a.s&b)!=c&&(!(a.tf&b)||a.dispatchEvent(wg(b,c)))&&!a.Je}r.hg=function(a){(!a.relatedTarget||!xd(this.d(),a.relatedTarget))&&this.dispatchEvent("enter")&&this.isEnabled()&&Ug(this,2)&&this.Cb(!0)};r.gg=function(a){if((!a.relatedTarget||!xd(this.d(),a.relatedTarget))&&this.dispatchEvent("leave"))Ug(this,4)&&this.setActive(!1),Ug(this,2)&&this.Cb(!1)};
r.Oc=function(a){this.isEnabled()&&(Ug(this,2)&&this.Cb(!0),Zd(a)&&(Ug(this,4)&&this.setActive(!0),this.k.kc(this)&&this.aa().focus()));!this.De&&Zd(a)&&a.preventDefault()};r.Pc=function(a){this.isEnabled()&&(Ug(this,2)&&this.Cb(!0),this.ae()&&this.Ed(a)&&Ug(this,4)&&this.setActive(!1))};r.Kh=function(a){this.isEnabled()&&this.Ed(a)};
r.Ed=function(a){if(Ug(this,16)){var b=!(this.s&16);Sg(this,16,b)&&this.Ja(16,b)}Ug(this,8)&&this.Vg(!0);Ug(this,64)&&this.T(!this.Ta());b=new Rd("action",this);if(a)for(var c=["altKey","ctrlKey","metaKey","shiftKey","platformModifierKey"],d,f=0;d=c[f];f++)b[d]=a[d];return this.dispatchEvent(b)};r.Nc=function(){Ug(this,32)&&Sg(this,32,!0)&&this.Ja(32,!0)};r.Mb=function(){Ug(this,4)&&this.setActive(!1);Ug(this,32)&&Sg(this,32,!1)&&this.Ja(32,!1)};
r.cb=function(a){return this.ba()&&this.isEnabled()&&this.yd(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};r.yd=function(a){return a.keyCode==13&&this.Ed(a)};ha(W)||e(Error("Invalid component class "+W));ha(Hg)||e(Error("Invalid renderer class "+Hg));var Vg=ja(W);Og[Vg]=Hg;Mg("goog-control",function(){return new W(n)});function Wg(){}F(Wg,Hg);ea(Wg);r=Wg.prototype;r.vb=q("button");r.Ka=function(a,b,c){b==16?V(a,"pressed",c):Wg.b.Ka.call(this,a,b,c)};r.t=function(a){var b=Wg.b.t.call(this,a),c=a.Zd();c&&this.Xg(b,c);(c=a.o())&&this.Y(b,c);a.U&16&&this.Ka(b,16,!!(a.s&16));return b};r.la=function(a,b){var b=Wg.b.la.call(this,a,b),c=this.o(b);a.lb=c;a.fh=this.Zd(b);a.U&16&&this.Ka(b,16,!!(a.s&16));return b};r.o=u;r.Y=u;r.Zd=function(a){return a.title};r.Xg=function(a,b){if(a)a.title=b||""};r.p=q("goog-button");function Xg(){}F(Xg,Wg);ea(Xg);r=Xg.prototype;r.vb=aa();r.t=function(a){Pg(a,!1);a.Gf&=-256;Tg(a,32,!1);return a.$().t("button",{"class":this.vd(a).join(" "),disabled:!a.isEnabled(),title:a.Zd()||"",value:a.o()||""},a.ud()||"")};r.ab=function(a){return a.tagName=="BUTTON"||a.tagName=="INPUT"&&(a.type=="button"||a.type=="submit"||a.type=="reset")};r.la=function(a,b){Pg(a,!1);a.Gf&=-256;Tg(a,32,!1);b.disabled&&dd(b,this.Wd(1));return Xg.b.la.call(this,a,b)};r.Ad=function(a){a.ya().i(a.d(),"click",a.Ed)};
r.qe=u;r.Kd=u;r.kc=function(a){return a.isEnabled()};r.uc=u;r.Ja=function(a,b,c){Xg.b.Ja.call(this,a,b,c);if((a=a.d())&&b==1)a.disabled=c};r.o=function(a){return a.value};r.Y=function(a,b){if(a)a.value=b};r.Ka=u;function Yg(a,b,c){W.call(this,a,b||Xg.Ha(),c)}F(Yg,W);r=Yg.prototype;r.o=p("lb");r.Y=function(a){this.lb=a;this.k.Y(this.d(),a)};r.Zd=p("fh");r.Xg=function(a){this.fh=a;this.k.Xg(this.d(),a)};r.h=function(){Yg.b.h.call(this);delete this.lb;delete this.fh};r.ha=function(){Yg.b.ha.call(this);if(this.U&32){var a=this.aa();a&&this.ya().i(a,"keyup",this.yd)}};r.yd=function(a){return a.keyCode==13&&a.type=="key"||a.keyCode==32&&a.type=="keyup"?this.Ed(a):a.keyCode==32};Mg("goog-button",function(){return new Yg(n)});function Zg(){}F(Zg,Wg);ea(Zg);r=Zg.prototype;r.t=function(a){var b={"class":"goog-inline-block "+this.vd(a).join(" "),title:a.Zd()||""},b=a.$().t("div",b,this.Ge(a.getContent(),a.$()));this.of(a,b);return b};r.vb=q("button");r.of=function(a,b){a.isEnabled()||this.Ka(b,1,!0);a.s&8&&this.Ka(b,8,!0);a.U&16&&this.Ka(b,16,!0);a.Ta()&&this.Ka(b,64,!0)};r.Z=function(a){return a&&a.firstChild.firstChild};
r.Ge=function(a,b){return b.t("div","goog-inline-block "+(this.p()+"-outer-box"),b.t("div","goog-inline-block "+(this.p()+"-inner-box"),a))};r.ab=function(a){return a.tagName=="DIV"};r.la=function(a,b){$g(b,!0);$g(b,!1);var c;a:{if((c=a.$().Fh(b))&&c.className.indexOf(this.p()+"-outer-box")!=-1)if((c=a.$().Fh(c))&&c.className.indexOf(this.p()+"-inner-box")!=-1){c=!0;break a}c=!1}c||b.appendChild(this.Ge(b.childNodes,a.$()));dd(b,"goog-inline-block",this.p());return Zg.b.la.call(this,a,b)};r.p=q("goog-custom-button");
function $g(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(c.nodeType==3){var f=c.nodeValue;if(ua(f)=="")a.removeChild(c);else{c.nodeValue=b?f.replace(/^[\s\xa0]+/,""):f.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function ah(a,b,c){Yg.call(this,a,b||Zg.Ha(),c)}F(ah,Yg);Mg("goog-custom-button",function(){return new ah(n)});function X(a,b){if(a instanceof X)this.C=a.yc();else{var c;if(c=B(a))a:{for(var d=c=0;d<a.length;d++){if(!B(a[d])||c>0&&a[d].length!=c){c=!1;break a}for(var f=0;f<a[d].length;f++)if(!ga(a[d][f])){c=!1;break a}if(c==0)c=a[d].length}c=c!=0}c?this.C=Eb(a):a instanceof fd?this.C=bh(a.height,a.width):ga(a)&&ga(b)&&a>0&&b>0?this.C=bh(a,b):e(Error("Invalid argument(s) for Matrix contructor"))}this.m=new fd(this.C[0].length,this.C.length)}
function ch(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new X(b)}function dh(a,b,c){for(var d=0;d<a.Kb().height;d++)for(var f=0;f<a.Kb().width;f++)b.call(c,a.C[d][f],d,f,a)}function eh(a,b){var c=new X(a.Kb());dh(a,function(d,f,g){c.C[f][g]=b.call(i,d,f,g,a)});return c}function bh(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var f=0;f<b;f++)c[d][f]=0}return c}r=X.prototype;
r.add=function(a){gd(this.m,a.Kb())||e(Error("Matrix summation is only supported on arrays of equal size"));return eh(this,function(b,c,d){return b+a.C[c][d]})};function fh(a,b){a.m.height!=b.Kb().height&&e(Error("The given matrix has height "+b.m.height+", but  needs to have height "+a.m.height+"."));var c=new X(a.m.height,a.m.width+b.m.width);dh(a,function(a,b,g){c.C[b][g]=a});dh(b,function(a,b,g){c.C[b][this.m.width+g]=a},a);return c}
r.equals=function(a,b){if(this.m.width!=a.m.width)return!1;if(this.m.height!=a.m.height)return!1;for(var c=b||0,d=0;d<this.m.height;d++)for(var f=0;f<this.m.width;f++)if(!(Math.abs(this.C[d][f]-a.C[d][f])<=(c||1.0E-6)))return!1;return!0};
function gh(a){a.m.width!=a.m.height&&e(Error("An inverse can only be taken on a square matrix."));var b=ch(a.m.height);a:{for(var a=fh(a,b),c=new X(a),d=0,f=0;f<c.m.height;f++){if(d>=c.m.width)break;for(var g=f;c.C[g][d]==0;)if(g++,g==c.m.height&&(g=f,d++,d==c.m.width)){a=c;break a}var h=a,j=f,k=h.C[g];h.C[g]=h.C[j];h.C[j]=k;g=c.C[f][d];for(h=d;h<c.m.width;h++)c.C[f][h]/=g;for(g=0;g<c.m.height;g++)if(g!=f){j=c.C[g][d];for(h=d;h<c.m.width;h++)c.C[g][h]-=j*c.C[f][h]}d++}a=c}return!hh(a,0,b.m.width-
1,b.m.height-1).equals(b)?n:hh(a,b.m.width)}r.Kb=p("m");function ih(a){var b=new X(a.m.width,a.m.height);dh(a,function(a,d,f){b.C[f][d]=a});return b}function Y(a,b,c){return!(b>=0&&b<a.m.height&&c>=0&&c<a.m.width)?n:a.C[b][c]}function jh(a,b,c,d){b>=0&&b<a.m.height&&c>=0&&c<a.m.width||e(Error("Index out of bounds when setting matrix value, ("+b+","+c+") in size ("+a.m.height+","+a.m.width+")"));a.C[b][c]=d}
r.multiply=function(a){if(a instanceof X)return this.m.width!=a.Kb().height&&e(Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.")),kh(this,a);else if(ga(a))return lh(this,a);else e(Error("A matrix can only be multiplied by a number or another matrix."))};r.bh=function(a){gd(this.m,a.Kb())||e(Error("Matrix subtraction is only supported on arrays of equal size."));return eh(this,function(b,c,d){return b-a.C[c][d]})};r.yc=p("C");
function hh(a,b,c,d){var f=new X((c?c:a.m.height-1)-0+1,(d?d:a.m.width-1)-b+1);dh(f,function(a,c,d){f.C[c][d]=this.C[0+c][b+d]},a);return f}function kh(a,b){var c=new X(a.m.height,b.Kb().width);dh(c,function(a,f,g){for(var h=a=0;h<this.m.width;h++)a+=Y(this,f,h)*Y(b,h,g);jh(c,f,g,a)},a);return c}function lh(a,b){return eh(a,function(a){return a*b})};function mh(){this.ca=ch(4)}mh.prototype.translate=function(a,b,c){this.ca=this.ca.multiply(new X([[1,0,0,a],[0,1,0,b],[0,0,1,c],[0,0,0,1]]))};mh.prototype.scale=function(a,b,c){this.ca=this.ca.multiply(new X([[a,0,0,0],[0,b,0,0],[0,0,c,0],[0,0,0,1]]))};function nh(a,b){var c=Math.cos(b),d=Math.sin(b);a.ca=a.ca.multiply(new X([[c,0,d,0],[0,1,0,0],[-d,0,c,0],[0,0,0,1]]))}function oh(a,b){var c=Math.cos(b),d=Math.sin(b);a.ca=a.ca.multiply(new X([[1,0,0,0],[0,c,-d,0],[0,d,c,0],[0,0,0,1]]))}
function ph(a,b){var c=Math.cos(b),d=Math.sin(b);a.ca=a.ca.multiply(new X([[c,-d,0,0],[d,c,0,0],[0,0,1,0],[0,0,0,1]]))}function qh(a){for(var b=new X(new fd(3,3)),c=0;c<3;c++)for(var d=0;d<3;++d)jh(b,c,d,Y(a.ca,c,d));return gh(b)};function rh(a,b,c){function d(a,b){try{var c=a.getContext(b);if(t(c))return c}catch(d){}return n}for(var f=n,g=["webgl","experimental-webgl"],h=0;z(f)&&h<g.length;++h)f=f||d(a,g[h]);z(f)&&(w(c)?c():e(Error("unable to get a valid WebGL context")));f.enable(f.CULL_FACE);f.cullFace(f.BACK);f.clearColor(0,0,0,0);f.clearDepth(1);f.enable(f.DEPTH_TEST);f.depthFunc(f.LEQUAL);f.blendFunc(f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA);this.canvas=a;this.Xf=b||n;this.g=f;this.ob=a.width;this.nb=a.height;f.viewport(0,0,
this.ob,this.nb);this.Ce=this.Kc=0;this.Be=1;this.Rd=this.ob/this.nb;this.Zc=ch(4);this.ua=new mh;this.ef=this.df=this.Zc;this.Yf=this.Me=this.sg=this.ph=this.Wf=0;R(s,"resize",this.mf,!1,this)}function sh(a){a.Kc=O(50);a.Ce=1.0E-4;a.Be=2;a.Rd=a.ob/a.nb;th(a)}function th(a){var b=1/Math.tan(a.Kc/2);a.Zc=new X([[b/a.Rd,0,0,0],[0,b,0,0],[0,0,0,0],[0,0,-1,0]]);uh(a)}function uh(a){var b=a.Ce-a.Be;jh(a.Zc,2,2,(a.Be+a.Ce)/b);jh(a.Zc,2,3,2*a.Be*a.Ce/b)}
rh.prototype.mf=function(){this.ob=this.canvas.width=this.canvas.clientWidth;this.nb=this.canvas.height=this.canvas.clientHeight;this.g.viewport(0,0,this.ob,this.nb);this.Rd=this.ob/this.nb;th(this);vh(this.n)};rh.prototype.n=n;function wh(a){a.df=a.Zc.multiply(a.ua.ca);a.ef=gh(a.df);return a.df}rh.prototype.Gg=u;rh.prototype.le="";function xh(a,b,c){c=a.g.createShader(c);a.g.shaderSource(c,b);a.g.compileShader(c);a.g.getShaderParameter(c,a.g.COMPILE_STATUS)?z(c)&&e(Error("Unknown")):e(Error("Shader err: "+a.g.getShaderInfoLog(c)));return c};var yh={"earth-fs-overlay.glsl":"precision mediump float;uniform sampler2D uBufferL0A;uniform sampler2D uBufferL1A;uniform sampler2D uBufferL2A;uniform sampler2D uBufferLnA;varying float vFallbackA;varying vec2 vTCA;uniform sampler2D uBufferL0B;uniform sampler2D uBufferL1B;uniform sampler2D uBufferL2B;varying float vFallbackB;varying vec2 vTCB;uniform float uMixFactor;void main(){float fallbackA=floor(vFallbackA+0.5);vec4 colorA;if(fallbackA==0.0){colorA=texture2D(uBufferL0A,vTCA);}else if(fallbackA==1.0){colorA=texture2D(uBufferL1A,vTCA);}else if(fallbackA==2.0){colorA=texture2D(uBufferL2A,vTCA);}else if(fallbackA==-1.0){colorA=texture2D(uBufferLnA,vTCA);}else{discard;}float fallbackB=floor(vFallbackB+0.5);vec4 colorB=vec4(0.0);if(fallbackB==0.0){colorB=texture2D(uBufferL0B,vTCB);}else if(fallbackB==1.0){colorB=texture2D(uBufferL1B,vTCB);}else if(fallbackB==2.0){colorB=texture2D(uBufferL2B,vTCB);}gl_FragColor=mix(colorA,colorB,uMixFactor*colorB.a);}",
"earth-fs.glsl":"precision mediump float;uniform sampler2D uBufferL0A;uniform sampler2D uBufferL1A;uniform sampler2D uBufferL2A;uniform sampler2D uBufferLnA;varying float vFallbackA;varying vec2 vTCA;void main(){float fallback=floor(vFallbackA+0.5);if(fallback==0.0){gl_FragColor=texture2D(uBufferL0A,vTCA);}else if(fallback==1.0){gl_FragColor=texture2D(uBufferL1A,vTCA);}else if(fallback==2.0){gl_FragColor=texture2D(uBufferL2A,vTCA);}else if(fallback==-1.0){gl_FragColor=texture2D(uBufferLnA,vTCA);}else{discard;}}",
"earth-vs-overlay.glsl":"#define BUFF_SIDE 4.0\n#define BUFF_SIZE 16\n#define TERRAIN %TERRAIN_BOOL%\n#define BUFF_SIDE_T %BUFFER_SIDE_T_FLOAT%\n#define BUFF_SIZE_T int(BUFF_SIDE_T*BUFF_SIDE_T)\nprecision highp float;const float PI=3.1415927;const float PI2=6.2831855;const float EARTH_RADIUS=6378137.0;const float TERRAIN_MIN=-10000.0;const float TERRAIN_MAX=12000.0;attribute vec2 aVertexPosition;attribute vec2 aTextureCoord;uniform mat4 uMVPMatrix;uniform float uTileCount;uniform vec2 uOffset;uniform float uMetaL0A[BUFF_SIZE];uniform float uMetaL1A[BUFF_SIZE];uniform float uMetaL2A[BUFF_SIZE];uniform vec2 uOffLA[3];varying float vFallbackA;varying vec2 vTCA;uniform float uMetaL0B[BUFF_SIZE];uniform float uMetaL1B[BUFF_SIZE];uniform float uMetaL2B[BUFF_SIZE];uniform vec2 uOffLB[3];varying float vFallbackB;varying vec2 vTCB;\n#if TERRAIN\nuniform float uMetaL0T[BUFF_SIZE_T];uniform float uMetaL1T[BUFF_SIZE_T];uniform vec2 uOffLT[2];uniform sampler2D uBufferL0T;uniform sampler2D uBufferL1T;uniform sampler2D uBufferLnT;uniform float uDegradationT;bool validateOffsetT(vec2 off){return off.x>=0.0&&off.y>=0.0&&off.x<BUFF_SIDE_T&&off.y<BUFF_SIDE_T;}\n#endif\nbool validateOffset(vec2 off){return off.x>=0.0&&off.y>=0.0&&off.x<BUFF_SIDE&&off.y<BUFF_SIDE;}vec2 modFirst(vec2 x,float y){return vec2(x.x-y*floor(x.x/y),x.y);}void main(){vec2 phi=PI2*(aVertexPosition+uOffset)/uTileCount;vec2 tileCoords=vec2(mod(aVertexPosition.x-aTextureCoord.x+uOffset.x+uTileCount*0.5,uTileCount),-aTextureCoord.y-aVertexPosition.y-uOffset.y+uTileCount*0.5);float elev=0.0;\n#if TERRAIN\nvec2 TCT;float fallbackT=-1.0;float degradationModifier=exp2(uDegradationT);vec2 offT=modFirst(tileCoords/degradationModifier-uOffLT[0],uTileCount/degradationModifier);vec2 rawElev;if(validateOffsetT(offT)&&uMetaL0T[int(floor(offT.y)*BUFF_SIDE_T+offT.x)]==1.0){fallbackT=0.0;}else{offT=modFirst((tileCoords/(2.0*degradationModifier))-uOffLT[1],uTileCount/(2.0*degradationModifier));if(validateOffsetT(offT)&&uMetaL1T[int(floor(offT.y)*BUFF_SIDE_T+offT.x)]==1.0){fallbackT=1.0;}else{TCT=(tileCoords+aTextureCoord)/uTileCount;}}if(fallbackT>=0.0){TCT=(offT+aTextureCoord/(exp2(fallbackT)*degradationModifier)+mod(uOffLT[int(fallbackT)],BUFF_SIDE_T))/BUFF_SIDE_T;}TCT.y=1.0-TCT.y;if(fallbackT==0.0){rawElev=texture2D(uBufferL0T,TCT).rg;}else if(fallbackT==1.0){rawElev=texture2D(uBufferL1T,TCT).rg;}else{rawElev=texture2D(uBufferLnT,TCT).rg;}elev=((TERRAIN_MAX-TERRAIN_MIN)*(rawElev.r+rawElev.g/256.0)-TERRAIN_MAX)/EARTH_RADIUS;\n#endif\nfloat exp_2y=exp(2.0*phi.y);float tanh=((exp_2y-1.0)/(exp_2y+1.0));float cosy=sqrt(1.0-tanh*tanh);vec3 pos=vec3(sin(phi.x)*cosy,tanh,cos(phi.x)*cosy);gl_Position=uMVPMatrix*vec4(pos*(1.0+elev),1.0);if(abs(phi.y)>PI){vFallbackA=-1.0e3;return;}vFallbackA=-1.0;vec2 off=modFirst(tileCoords-uOffLA[0],uTileCount);if(validateOffset(off)&&uMetaL0A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=0.0;}else{off=modFirst((tileCoords/2.0)-uOffLA[1],uTileCount/2.0);if(validateOffset(off)&&uMetaL1A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=1.0;}else{off=modFirst((tileCoords/4.0)-uOffLA[2],uTileCount/4.0);if(validateOffset(off)&&uMetaL2A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=2.0;}}}if(vFallbackA>=0.0){vTCA=(off+aTextureCoord/exp2(vFallbackA)+mod(uOffLA[int(vFallbackA)],BUFF_SIDE))/BUFF_SIDE;}else{vTCA=(tileCoords+aTextureCoord)/uTileCount;}vTCA.y=1.0-vTCA.y;vFallbackB=-1.0;off=modFirst(tileCoords-uOffLB[0],uTileCount);if(validateOffset(off)&&uMetaL0B[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackB=0.0;}else{off=modFirst((tileCoords/2.0)-uOffLB[1],uTileCount/2.0);if(validateOffset(off)&&uMetaL1B[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackB=1.0;}else{off=modFirst((tileCoords/4.0)-uOffLB[2],uTileCount/4.0);if(validateOffset(off)&&uMetaL2B[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackB=2.0;}}}if(vFallbackB>=0.0){vTCB=(off+aTextureCoord/exp2(vFallbackB)+mod(uOffLB[int(vFallbackB)],BUFF_SIDE))/BUFF_SIDE;}else{vTCB=(tileCoords+aTextureCoord)/uTileCount;}vTCB.y=1.0-vTCB.y;}",
"earth-vs.glsl":"#define BUFF_SIDE 8.0\n#define BUFF_SIZE 64\n#define TERRAIN %TERRAIN_BOOL%\n#define BUFF_SIDE_T %BUFFER_SIDE_T_FLOAT%\n#define BUFF_SIZE_T int(BUFF_SIDE_T*BUFF_SIDE_T)\nprecision highp float;const float PI=3.1415927;const float PI2=6.2831855;const float EARTH_RADIUS=6378137.0;const float TERRAIN_MIN=-10000.0;const float TERRAIN_MAX=12000.0;attribute vec2 aVertexPosition;attribute vec2 aTextureCoord;uniform mat4 uMVPMatrix;uniform float uTileCount;uniform vec2 uOffset;uniform float uMetaL0A[BUFF_SIZE];uniform float uMetaL1A[BUFF_SIZE];uniform float uMetaL2A[BUFF_SIZE];uniform vec2 uOffLA[3];varying float vFallbackA;varying vec2 vTCA;\n#if TERRAIN\nuniform float uMetaL0T[BUFF_SIZE_T];uniform float uMetaL1T[BUFF_SIZE_T];uniform vec2 uOffLT[2];uniform sampler2D uBufferL0T;uniform sampler2D uBufferL1T;uniform sampler2D uBufferLnT;uniform float uDegradationT;bool validateOffsetT(vec2 off){return off.x>=0.0&&off.y>=0.0&&off.x<BUFF_SIDE_T&&off.y<BUFF_SIDE_T;}\n#endif\nbool validateOffset(vec2 off){return off.x>=0.0&&off.y>=0.0&&off.x<BUFF_SIDE&&off.y<BUFF_SIDE;}vec2 modFirst(vec2 x,float y){return vec2(x.x-y*floor(x.x/y),x.y);}void main(){vec2 phi=PI2*(aVertexPosition+uOffset)/uTileCount;vec2 tileCoords=vec2(mod(aVertexPosition.x-aTextureCoord.x+uOffset.x+uTileCount*0.5,uTileCount),-aTextureCoord.y-aVertexPosition.y-uOffset.y+uTileCount*0.5);float elev=0.0;\n#if TERRAIN\nvec2 TCT;float fallbackT=-1.0;float degradationModifier=exp2(uDegradationT);vec2 offT=modFirst(tileCoords/degradationModifier-uOffLT[0],uTileCount/degradationModifier);vec2 rawElev;if(validateOffsetT(offT)&&uMetaL0T[int(floor(offT.y)*BUFF_SIDE_T+offT.x)]==1.0){fallbackT=0.0;}else{offT=modFirst((tileCoords/(2.0*degradationModifier))-uOffLT[1],uTileCount/(2.0*degradationModifier));if(validateOffsetT(offT)&&uMetaL1T[int(floor(offT.y)*BUFF_SIDE_T+offT.x)]==1.0){fallbackT=1.0;}else{TCT=(tileCoords+aTextureCoord)/uTileCount;}}if(fallbackT>=0.0){TCT=(offT+aTextureCoord/(exp2(fallbackT)*degradationModifier)+mod(uOffLT[int(fallbackT)],BUFF_SIDE_T))/BUFF_SIDE_T;}TCT.y=1.0-TCT.y;if(fallbackT==0.0){rawElev=texture2D(uBufferL0T,TCT).rg;}else if(fallbackT==1.0){rawElev=texture2D(uBufferL1T,TCT).rg;}else{rawElev=texture2D(uBufferLnT,TCT).rg;}elev=((TERRAIN_MAX-TERRAIN_MIN)*(rawElev.r+rawElev.g/256.0)-TERRAIN_MAX)/EARTH_RADIUS;\n#endif\nfloat exp_2y=exp(2.0*phi.y);float tanh=((exp_2y-1.0)/(exp_2y+1.0));float cosy=sqrt(1.0-tanh*tanh);vec3 pos=vec3(sin(phi.x)*cosy,tanh,cos(phi.x)*cosy);gl_Position=uMVPMatrix*vec4(pos*(1.0+elev),1.0);if(abs(phi.y)>PI){vFallbackA=-1.0e3;return;}vFallbackA=-1.0;vec2 off=modFirst(tileCoords-uOffLA[0],uTileCount);if(validateOffset(off)&&uMetaL0A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=0.0;}else{off=modFirst((tileCoords/2.0)-uOffLA[1],uTileCount/2.0);if(validateOffset(off)&&uMetaL1A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=1.0;}else{off=modFirst((tileCoords/4.0)-uOffLA[2],uTileCount/4.0);if(validateOffset(off)&&uMetaL2A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=2.0;}}}if(vFallbackA>=0.0){vTCA=(off+aTextureCoord/exp2(vFallbackA)+mod(uOffLA[int(vFallbackA)],BUFF_SIDE))/BUFF_SIDE;}else{vTCA=(tileCoords+aTextureCoord)/uTileCount;}vTCA.y=1.0-vTCA.y;}",
"halo-fs.glsl":"precision lowp float;uniform sampler2D uGradient;varying vec2 vCoords;void main(){float distance=vCoords.x*vCoords.x+vCoords.y*vCoords.y;if(distance<0.98){discard;}else{gl_FragColor=texture2D(uGradient,vec2((sqrt(distance)-1.0)/0.1,0.5));}}","halo-vs.glsl":"precision lowp float;attribute vec2 aVertexPosition;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;varying vec2 vCoords;void main(){gl_Position=uPMatrix*(uMVMatrix[3]+uMVMatrix[0]*aVertexPosition.x+uMVMatrix[1]*aVertexPosition.y);gl_Position.z=0.0;vCoords=aVertexPosition;}",
"model-fs.glsl":"precision highp float;uniform vec3 uColor;varying vec3 vLightWeighting;void main(void){gl_FragColor=vec4(uColor*vLightWeighting,1.0);}","model-vs.glsl":"precision highp float;attribute vec3 aVertexPosition;attribute vec3 aVertexNormal;uniform mat4 uMVMatrix;uniform mat4 uMVPMatrix;uniform mat3 uNMatrix;varying vec3 vLightWeighting;void main(void){gl_Position=uMVPMatrix*vec4(aVertexPosition,1.0);vec3 transformedNormal=uNMatrix*aVertexNormal;vec3 uLightingDirection=vec3(uMVMatrix*vec4(1.0,1.0,1.0,1.0));vec3 uAmbientColor=vec3(0.3,0.3,0.3);vec3 uDirectionalColor=vec3(0.4,0.4,0.4);float directionalLightWeighting=max(dot(transformedNormal,uLightingDirection),0.0);vLightWeighting=uAmbientColor+uDirectionalColor*directionalLightWeighting;}"};function zh(a){return a in yh?yh[a]:Dc("../we/shaders/"+a)};function Ah(a){var c;this.a=a.a;c=this.g=a.a.g,a=c;this.Si=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.Si);a.bufferData(a.ARRAY_BUFFER,new Float32Array([1.1,1.1,-1.1,1.1,1.1,-1.1,-1.1,-1.1]),a.STATIC_DRAW);this.Hh=a.createTexture();var b=new Uint8Array([224,224,255,255,207,218,250,220,179,194,245,180,137,166,237,145,84,123,221,110,51,94,198,75,25,67,178,30,13,53,161,0]);a.bindTexture(a.TEXTURE_2D,this.Hh);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,8,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);b=zh("halo-fs.glsl");a=zh("halo-vs.glsl");b=xh(this.a,b,this.g.FRAGMENT_SHADER);a=xh(this.a,a,this.g.VERTEX_SHADER);this.Wa=this.g.createProgram();z(this.Wa)&&e(Error("Unknown"));this.g.attachShader(this.Wa,a);this.g.attachShader(this.Wa,b);this.g.bindAttribLocation(this.Wa,0,"aVertexPosition");
this.g.linkProgram(this.Wa);this.g.getProgramParameter(this.Wa,this.g.LINK_STATUS)||e(Error("Shader program err: "+this.g.getProgramInfoLog(this.Wa)));this.Ac=this.g.getAttribLocation(this.Wa,"aVertexPosition");this.g.enableVertexAttribArray(this.Ac);this.Dg=this.g.getUniformLocation(this.Wa,"uMVMatrix");this.Tk=this.g.getUniformLocation(this.Wa,"uPMatrix");this.Fj=this.g.getUniformLocation(this.Wa,"uGradient")}
Ah.prototype.draw=function(){this.g.useProgram(this.Wa);this.g.bindBuffer(this.g.ARRAY_BUFFER,this.Si);this.g.vertexAttribPointer(this.Ac,2,this.g.FLOAT,!1,0,0);this.g.activeTexture(this.g.TEXTURE0);this.g.bindTexture(this.g.TEXTURE_2D,this.Hh);this.g.uniform1i(this.Fj,0);var a=new Float32Array(Kb(ih(this.a.ua.ca).yc())),b=new Float32Array(Kb(ih(this.a.Zc).yc()));this.g.uniformMatrix4fv(this.Dg,!1,a);this.g.uniformMatrix4fv(this.Tk,!1,b);this.g.drawArrays(this.g.TRIANGLE_STRIP,0,4)};function Bh(a){this.e=a;this.Ob=this.zb=0;this.ka=1E7;this.Da=n;this.Ai=this.Yb=this.zd=0}F(Bh,T);r=Bh.prototype;r.setPosition=function(a,b){this.zb=N(a,-1.57,1.57);this.Ob=Ec(b);this.Da=n;this.dispatchEvent(new Ch(Dh))};function Eh(a,b,c){function d(a){var d=c;c=d*Math.cos(a)-2*b*Math.sin(a);b=d*Math.sin(a)/2+b*Math.cos(a)}d(a.Ai);b/=Math.max(Math.abs(Math.cos(a.Yb)),0.1);d(a.zd);a.setPosition(a.zb+b,a.Ob+c)}r.getPosition=function(){return[this.zb,this.Ob]};
function Fh(a,b){a.ka=N(b,250,1E7);a.Da=n;a.dispatchEvent(new Ch(Gh));a.dispatchEvent(new Ch(Dh))}r.setZoom=function(a){this.Da=N(a,Hh(this.e),this.e.qa.pa.xb());a=Math.cos(Math.abs(this.zb))*2*Math.PI/Math.pow(2,this.Da)*this.e.ue;this.ka=1/Math.tan(this.e.a.Kc/2)*(a/2)*6378137;this.dispatchEvent(new Ch(Dh));this.dispatchEvent(new Ch(Gh))};
r.getZoom=function(){if(z(this.Da)){var a=2*(this.ka/6378137)*Math.tan(this.e.a.Kc/2)/this.e.ue;this.Da=N(Math.log(Math.cos(Math.abs(this.zb))*2*Math.PI/a)/Math.LN2,Hh(this.e),this.e.qa.pa.xb())}return this.Da};r.wd=function(){return Ih(this.e,this.e.a.ob/2,this.e.a.nb/2,!0)};r.setHeading=ba("zd");r.setTilt=ba("Yb");r.getHeading=p("zd");r.getTilt=p("Yb");var Dh="zoomchanged",Gh="altchanged";function Ch(a){Rd.call(this,a)}F(Ch,Rd);function Jh(a,b,c,d,f){function g(a,b,c,d){a?a=b:(a=b/Math.max(1,Math.sqrt(c*c+d*d)),a=Math.max(1,Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))));return a}a=a.g;this.mb=[];this.od=[];this.A=[];for(var h=-b/2;h<b/2;++h)for(var j=-c/2;j<c/2;++j){var k=g(f,d,h,j),l=[j+1<c/2&&g(f,d,h,j+1)>k,h+1<b/2&&g(f,d,h+1,j)>k,j-1>-c/2&&g(f,d,h,j-1)>k,h-1>-b/2&&g(f,d,h-1,j)>k];Kh(this,h,j,k,l)}this.Db=a.createBuffer();this.te=a.createBuffer();this.Nb=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.Db);a.bufferData(a.ARRAY_BUFFER,
new Float32Array(this.mb),a.STATIC_DRAW);this.Db.lc=2;a.bindBuffer(a.ARRAY_BUFFER,this.te);a.bufferData(a.ARRAY_BUFFER,new Float32Array(this.od),a.STATIC_DRAW);this.te.lc=2;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Nb);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.A),a.STATIC_DRAW);this.ki=this.A.length}
function Kh(a,b,c,d,f){for(var g=a.mb.length/2,h=0;h<=d;++h)for(var j=0;j<=d;++j)a.mb.push(b+j/d,c+h/d),a.od.push(j/d,1-h/d);var k=[0,0,0,0];if(f[0]){k[0]=a.mb.length/2;for(j=0;j<d;++j)a.mb.push(b+(j+0.5)/d,c+1),a.od.push((j+0.5)/d,0)}if(f[1]){k[1]=a.mb.length/2;for(h=0;h<d;++h)a.mb.push(b+1,c+(h+0.5)/d),a.od.push(1,1-(h+0.5)/d)}if(f[2]){k[2]=a.mb.length/2;for(j=0;j<d;++j)a.mb.push(b+(j+0.5)/d,c),a.od.push((j+0.5)/d,1)}if(f[3]){k[3]=a.mb.length/2;for(h=0;h<d;++h)a.mb.push(b,c+(h+0.5)/d),a.od.push(0,
1-(h+0.5)/d)}b=D(aa(),a);c=d+1;for(h=0;h<d;++h)for(j=0;j<d;++j){var l=g+h*c+j;a.A.push(l);var o=h==0&&f[2],m=j==0&&f[3];o&&!m?(a.A.push(k[2]+j),a.A.push(l+c),b(),a.A.push(k[2]+j)):m&&!o?(a.A.push(l+1),a.A.push(k[3]+h),b(),a.A.push(k[3]+h)):m&&o&&(a.A.push(k[2]+j),a.A.push(k[3]+h),b(),a.A.push(k[3]+h),a.A.push(k[2]+j),a.A.push(l+c),b(),a.A.push(k[2]+j));a.A.push(l+1);a.A.push(l+c);b();a.A.push(l+c+1);o=h==d-1&&f[0];m=j==d-1&&f[1];o&&!m?(a.A.push(k[0]+j),a.A.push(l+1),b(),a.A.push(k[0]+j)):m&&!o?(a.A.push(l+
c),a.A.push(k[1]+h),b(),a.A.push(k[1]+h)):o&&m&&(a.A.push(k[0]+j),a.A.push(k[1]+h),b(),a.A.push(k[1]+h),a.A.push(k[0]+j),a.A.push(l+1),b(),a.A.push(k[0]+j));a.A.push(l+c);a.A.push(l+1);b()}};function Lh(a,b,c,d){b=b.g;this.v=a;this.Ac=b.getAttribLocation(this.v,"aVertexPosition");b.enableVertexAttribArray(this.Ac);this.Mi=b.getAttribLocation(this.v,"aTextureCoord");b.enableVertexAttribArray(this.Mi);this.Eg=$(b,this.v,"uMVPMatrix");this.jk=$(b,this.v,"uMetaL0A");this.mk=$(b,this.v,"uMetaL1A");this.pk=$(b,this.v,"uMetaL2A");this.$j=$(b,this.v,"uOffLA");this.dj=$(b,this.v,"uBufferL0A");this.gj=$(b,this.v,"uBufferL1A");this.jj=$(b,this.v,"uBufferL2A");this.lj=$(b,this.v,"uBufferLnA");if(c)this.kk=
$(b,this.v,"uMetaL0B"),this.nk=$(b,this.v,"uMetaL1B"),this.qk=$(b,this.v,"uMetaL2B"),this.ak=$(b,this.v,"uOffLB"),this.ej=$(b,this.v,"uBufferL0B"),this.hj=$(b,this.v,"uBufferL1B"),this.kj=$(b,this.v,"uBufferL2B"),this.tk=$(b,this.v,"uMixFactor");if(d)this.wj=$(b,this.v,"uDegradationT"),this.lk=$(b,this.v,"uMetaL0T"),this.ok=$(b,this.v,"uMetaL1T"),this.bk=$(b,this.v,"uOffLT"),this.fj=$(b,this.v,"uBufferL0T"),this.ij=$(b,this.v,"uBufferL1T"),this.mj=$(b,this.v,"uBufferLnT");this.ml=$(b,this.v,"uTileCount");
this.Ek=$(b,this.v,"uOffset")}function $(a,b,c){a=a.getUniformLocation(b,c);z(a)&&e(Error("Invalid name "+c));return a};function Mh(a){this.Xb=new Ub;this.Uc=[];this.jl=512;this.uh=new qf(2E4);R(this.uh,sf,this.qj,!1,this);this.uh.start();Nh(this,a)}function Nh(a,b){a.Ni=E();a.Oa=b;Ob(a.Xb,function(a){a.j()});a.Xb.clear();a.Uc=[]}r=Mh.prototype;r.Oa=n;r.Ni=0;r.ll=u;
r.qj=function(){var a=xb(this.Xb.Sa(),function(a){return a.state==20||a.state==La||a.state==-10});for(Ib(a,function(a,b){return a.rc-b.rc});this.Xb.wb()>this.jl&&a.length>0;){var b=a.shift();b.state==La&&Cb(this.Uc,b);this.Xb.remove(b.zoom+"_"+b.x+"_"+b.y);b.j()}};r.nl=function(a){a.rc<this.Ni?(a.state=-10,this.Xb.remove(a.zoom+"_"+a.x+"_"+a.y),a.j()):this.ll(a)};
function Oh(a){Ib(a.Uc,function(a,b){return a.rc-b.rc});for(var b=Math.min(a.Uc.length,5-a.Oa.gb),c=0;c<b;c++)wc(a.Oa,a.Uc.pop(),D(a.nl,a))};function Ph(a,b,c,d){this.sb=b;this.cc=[];this.u=c;this.Oa=a;this.eh=new Mh(a);this.Da=d;this.Na=1<<this.Da;this.sd=this.u>=this.Na;this.Qb=this.Wc=0;this.buffer=n;this.Aa=[];Qh(this)}function Qh(a){a.Aa=[];for(var b=0;b<a.u;++b)a.Aa.push(Array(a.u));a.buffer&&a.buffer.clear()}Ph.prototype.disable=function(){this.cc=[];Qh(this);this.buffer=n};Ph.prototype.ec=function(a){this.Oa=a;Nh(this.eh,a);this.cc=[];Qh(this)};
function Rh(a){a.cc=[];for(var b=D(function(a,b){var c=(this.sd?this.Na:this.u)/2;a+=c;b+=c;this.Aa[b][a]!==1&&Sh(this,this.Wc+a,this.Qb+b,d)},a),c=D(function(a,c){for(var d=-c;d<c;++d)b(d,-c),b(d,c-1);for(d=-c;d<c;++d)b(-c,d),b(c-1,d)},a),d=E(),a=Math.min(a.u,a.Na)/2;a>0;--a)c(d+a,a)}
function Sh(a,b,c,d){var b=Bc(b,a.Na),c=Bc(c,a.Na),f;a:{f=a.eh;var g=a.Da,h=b,j=c,c=g+"_"+h+"_"+j,b=f.Xb.get(c);if(t(b))b.state==-10?d-b.rc>7E3&&(b.j(),b=new Ka(g,h,j,d),f.Xb.set(c,b),f.Uc.push(b)):b.rc=d;else{d=b=new Ka(g,h,j,d);g=tc(f.Oa,d.zoom);if(!(d.x>=g.left&&d.x<=g.right&&d.y>=g.top&&d.y<=g.bottom)){f=n;break a}f.Xb.set(c,b);f.Uc.push(b)}f=b}!z(f)&&f.state==20&&a.cc.push(f)};function Th(a,b,c){var d;d=this.Lb=a.g,a=d;this.ih=b;this.jg=c;this.Xa=a.createTexture();Uh(this)}Th.prototype.mf=function(a,b){if(!(this.ih==a&&this.jg==b))this.ih=a,this.jg=b,this.Lb.deleteTexture(this.Xa),this.Xa=this.Lb.createTexture(),Uh(this)};
function Uh(a){var b=a.Lb;b.bindTexture(b.TEXTURE_2D,a.Xa);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,1);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,a.ih,a.jg,0,b.RGBA,b.UNSIGNED_BYTE,n);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR_MIPMAP_LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR_MIPMAP_LINEAR)}Th.prototype.clear=function(){this.Lb.deleteTexture(this.Xa);this.Xa=this.Lb.createTexture();Uh(this)};function Vh(a,b,c){function d(b){g.isTexture(h)&&(b.Uf>=3||wc(a,b,f,d))}function f(c){if(g.isTexture(h)){g.bindTexture(g.TEXTURE_2D,h);try{g.texSubImage2D(g.TEXTURE_2D,0,c.x*k,(j-c.y-1)*k,g.RGBA,g.UNSIGNED_BYTE,Ma(c))}catch(l){a.Kf()&&(a.Ug(b.le)||!(c.Qc&&c.Qc.src.lastIndexOf(b.le,0)==0))?wc(a,c,f,d):b.Gg()}}}var g=this.Lb=b.g,h=g.createTexture();this.Xa=h;var j=1<<c,k=a.hc();g.bindTexture(g.TEXTURE_2D,h);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,1);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,k*j,k*j,0,g.RGBA,g.UNSIGNED_BYTE,
n);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);for(var l=0;l<j;++l)for(var o=0;o<j;++o)wc(a,new Ka(c,l,o),f,d)}F(Vh,Ha);Vh.prototype.h=function(){this.Lb.deleteTexture(this.Xa)};function Wh(a,b,c,d,f,g,h){this.sb=b;this.u=c;this.Va=f;this.bf=g;this.Oa=a;var j=a.hc();this.Eb=[];for(var k=0;k<d;++k)this.Eb.push(new Th(b,this.u*j,this.u*j));for(this.ia=[];f<=g;++f)this.ia.push(new Ph(a,b,c,f));for(k=0;k<d;++k)this.ia[k].buffer=this.Eb[k];this.Za=0;this.fe=h?n:new Vh(a,b,2)}Wh.prototype.ec=function(a){if(!z(this.fe))this.fe.j(),this.fe=new Vh(a,this.sb,2);this.Oa=a;var b=this.u*a.hc();M(this.Eb,function(a){a.mf(b,b)});M(this.ia,function(b){b.ec(a)});Xh(this)};
function Yh(a,b,c,d,f,g){for(var g=N(g,a.Va,a.bf),h=g-(a.Va+a.Za+a.Eb.length-1);h>0;){var j=a.ia[a.Za].buffer;a.ia[a.Za].disable();a.ia[++a.Za+a.Eb.length-1].buffer=j;h--}for(;h<0&&a.Za>0;)j=a.ia[a.Za+a.Eb.length-1].buffer,a.ia[a.Za+a.Eb.length-1].disable(),a.ia[--a.Za].buffer=j,h++;for(var h=1<<g,k=!1,c=(c/(2*Math.PI)+0.5)*h,b=(0.5-uc(b)/(Math.PI*2))*h,f=(f/(2*Math.PI)+0.5)*h,j=(0.5-uc(d)/(Math.PI*2))*h,d=g-a.Va;d>=a.Za;d--){var l=N(c-a.u/2,f-a.u,f),o=N(b-a.u/2,j-a.u,j),m=tc(a.Oa,a.Va+d),l=N(l,m.left,
m.right+1-a.u),o=N(o,m.top,m.bottom+1-a.u),l=Bc(Math.round(l),h),o=Math.round(o),m=a.ia[d],x=o,o=!1;if(!m.sd){var v=l-m.Wc,Z=x-m.Qb;Math.abs(v)>m.Na/2&&(v=(v-(v==0?0:v<0?-1:1)*m.Na)%m.Na);m.Wc=l;m.Qb=x;if(Math.abs(v)>=m.u||Math.abs(Z)>=m.u)Qh(m),o=!0;else{o=v!=0||Z!=0;if(v>0)for(l=0;l<m.u;++l)m.Aa[l].splice(0,v),m.Aa[l].push.apply(m.Aa[l],Array(v));if(v<0)for(l=0;l<m.u;++l)m.Aa[l].splice(m.u+v,-v),m.Aa[l].unshift.apply(m.Aa[l],Array(-v));if(Z>0)for(l=0;l<Z;++l)m.Aa.shift(),m.Aa.push(Array(m.u));if(Z<
0)for(l=0;l<-Z;++l)m.Aa.pop(),m.Aa.unshift(Array(m.u))}}Rh(m);k|=o;c/=2;b/=2;f/=2;j/=2}k&&Xh(a);f=1;for(d=a.Za;f>0&&d<=g-a.Va;d++){h=f;c=a.ia[d];b=0;if(c.cc.length>0){f=Math.min(c.cc.length,f>=0?1:0);for(j=0;j<f;j++){l=c;k=c.cc.pop();if(!z(l.buffer)&&k.zoom==l.Da&&(m=k.x-l.Wc,o=k.y-l.Qb,v=1<<l.Da,m=Bc(m,v),o=Bc(o,v),!(m<0||m>=l.u||o<0||o>=l.u))){v=l.sb.g;x=l.Oa.hc();v.bindTexture(v.TEXTURE_2D,l.buffer.Xa);Z=Bc(m+l.Wc,l.u)*x;x*=l.u-Bc(o+l.Qb,l.u)-1;try{v.texSubImage2D(v.TEXTURE_2D,0,Z,x,v.RGBA,v.UNSIGNED_BYTE,
Ma(k)),l.Aa[o][m]=1}catch(Yd){l.Oa.Kf()&&(l.Oa.Ug(l.sb.le)||!(k.Qc&&k.Qc.src.lastIndexOf(l.sb.le,0)==0))?Sh(l,k.x,k.y,k.rc):l.sb.Gg()}}b++}}Oh(c.eh);b>0&&(c.sb.g.bindTexture(c.sb.g.TEXTURE_2D,c.buffer.Xa),c.sb.g.generateMipmap(c.sb.g.TEXTURE_2D));f=h-b}}function Zh(a,b,c){return b>a.bf||b-c<a.Va?Array(a.u*a.u):Kb(a.ia[b-a.Va-c].Aa)}function $h(a,b,c){return b>a.bf||b-c<a.Va?n:a.ia[b-a.Va-c].buffer.Xa}
function ai(a,b,c){if(b>a.bf)return Array(2*c);for(var d=[],f=b-a.Va;f>b-a.Va-c;--f)d.push(Math.round(a.ia[Math.max(0,f)].Wc),Math.round(a.ia[Math.max(0,f)].Qb));return d}
function Xh(a){for(var b=Array(a.Eb.length),c=0;c<a.Eb.length;c++){var d=a.ia[a.Za+c],f=bi((0.5-d.Qb/d.Na)*2*Math.PI),g=bi((0.5-(d.Qb+d.u)/d.Na)*2*Math.PI);b[c]=new yc(d.sd?0:bi((0.5-(d.Qb+d.u/2)/d.Na)*2*Math.PI),d.sd?0:((d.Wc+d.u/2)/d.Na-0.5)*2*Math.PI,d.sd?Math.PI/2:Math.abs(f-g),d.sd?Math.PI:d.u/d.Na*2*Math.PI,d.Da)}a.Oa.xi(b)};function ci(a,b){this.a=a.a;this.n=a;this.pa=b||new tg;this.La=new Wh(this.pa,this.a,8,3,1,19);this.oa=this.pd=n;this.Sk=0;this.ed=!1;this.ec(this.pa,!0);this.fd=1;this.pc=[0,0];this.Ci=[new Jh(this.a,1,1,1),new Jh(this.a,4,4,16,!0),new Jh(this.a,6,6,8,!0),new Jh(this.a,8,8,8,!0),new Jh(this.a,10,10,8),new Jh(this.a,64,64,this.ed?8:4)];this.ck=di(this,!1);this.dk=di(this,!0)}
ci.prototype.ec=function(a,b,c){if(a)a.Nf=D(this.n.hh,this.n);if(c)if(this.pd=a)t(this.oa)?this.oa.ec(a):(this.La=new Wh(this.pa,this.a,4,3,1,19),this.oa=new Wh(this.pd,this.a,4,3,0,15));else{if(t(this.oa))this.La=new Wh(this.pa,this.a,8,3,1,19),this.oa=n}else{if(!a)return;this.La.ec(a);this.pa=a}b!==!0&&(vh(this.n),this.n.hh(),this.n.c.setZoom(this.n.c.getZoom()))};
ci.prototype.draw=function(){var a=this.a.g;this.fd=1<<this.n.c.getZoom();var b=this.n.c.getPosition(),c=this.n.c.wd()||b;this.pc[0]=Math.floor(b[1]/(2*Math.PI)*this.fd);this.pc[1]=N(Math.floor(uc(b[0])/(Math.PI*2)*this.fd),-this.fd/2,this.fd/2);Yh(this.La,c[0],c[1],b[0],b[1],Math.floor(this.n.c.getZoom()));this.oa&&Yh(this.oa,c[0],c[1],b[0],b[1],Math.floor(this.n.c.getZoom()));this.ed&&Yh(this.fc,c[0],c[1],b[0],b[1],Math.floor(this.n.c.getZoom())-5);c=Math.floor(this.n.c.getZoom());this.fd=1<<c;
b=this.oa?this.dk:this.ck;a.useProgram(b.v);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,$h(this.La,c,0));a.uniform1i(b.dj,0);a.activeTexture(a.TEXTURE1);a.bindTexture(a.TEXTURE_2D,$h(this.La,c,1));a.uniform1i(b.gj,1);a.activeTexture(a.TEXTURE2);a.bindTexture(a.TEXTURE_2D,$h(this.La,c,2));a.uniform1i(b.jj,2);a.activeTexture(a.TEXTURE3);a.bindTexture(a.TEXTURE_2D,this.La.fe.Xa);a.uniform1i(b.lj,3);a.uniform1fv(b.jk,new Float32Array(Zh(this.La,c,0)));a.uniform1fv(b.mk,new Float32Array(Zh(this.La,
c,1)));a.uniform1fv(b.pk,new Float32Array(Zh(this.La,c,2)));a.uniform2fv(b.$j,new Float32Array(ai(this.La,c,3)));this.oa&&(a.activeTexture(a.TEXTURE4),a.bindTexture(a.TEXTURE_2D,$h(this.oa,c,0)),a.uniform1i(b.ej,4),a.activeTexture(a.TEXTURE5),a.bindTexture(a.TEXTURE_2D,$h(this.oa,c,1)),a.uniform1i(b.hj,5),a.activeTexture(a.TEXTURE6),a.bindTexture(a.TEXTURE_2D,$h(this.oa,c,2)),a.uniform1i(b.kj,6),a.uniform1fv(b.kk,new Float32Array(Zh(this.oa,c,0))),a.uniform1fv(b.nk,new Float32Array(Zh(this.oa,c,1))),
a.uniform1fv(b.qk,new Float32Array(Zh(this.oa,c,2))),a.uniform2fv(b.ak,new Float32Array(ai(this.oa,c,3))),a.uniform1f(b.tk,this.Sk));if(this.ed){var d=N(c-5,2,this.uf.xb());a.uniform1f(b.wj,c-d);a.activeTexture(a.TEXTURE7);a.bindTexture(a.TEXTURE_2D,$h(this.fc,d,0));a.uniform1i(b.fj,7);a.activeTexture(a.TEXTURE8);a.bindTexture(a.TEXTURE_2D,$h(this.fc,d,1));a.uniform1i(b.ij,8);a.activeTexture(a.TEXTURE9);a.bindTexture(a.TEXTURE_2D,this.fc.fe.Xa);a.uniform1i(b.mj,9);a.uniform1fv(b.lk,new Float32Array(Zh(this.fc,
d,0)));a.uniform1fv(b.ok,new Float32Array(Zh(this.fc,d,1)));a.uniform2fv(b.bk,new Float32Array(ai(this.fc,d,2)))}d=new Float32Array(Kb(ih(wh(this.a)).yc()));c=this.Ci[Math.min(c,this.Ci.length-1)];a.bindBuffer(a.ARRAY_BUFFER,c.Db);a.vertexAttribPointer(b.Ac,c.Db.lc,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,c.te);a.vertexAttribPointer(b.Mi,c.te.lc,a.FLOAT,!1,0,0);a.uniformMatrix4fv(b.Eg,!1,d);a.uniform1f(b.ml,this.fd);a.uniform2fv(b.Ek,new Float32Array(this.pc));a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,
c.Nb);a.drawElements(a.TRIANGLES,c.ki,a.UNSIGNED_SHORT,0)};
function di(a,b){var c=a.a.g,d=zh("earth-fs"+(b?"-overlay":"")+".glsl"),f=zh("earth-vs"+(b?"-overlay":"")+".glsl"),f=f.replace("%TERRAIN_BOOL%",a.ed?"1":"0");a.ed&&(f=f.replace("%BUFFER_SIDE_T_FLOAT%",a.fc.u.toFixed(1)));var d=xh(a.a,d,c.FRAGMENT_SHADER),f=xh(a.a,f,c.VERTEX_SHADER),g=c.createProgram();z(g)&&e(Error("Unknown"));c.attachShader(g,f);c.attachShader(g,d);c.bindAttribLocation(g,0,"aVertexPosition");c.linkProgram(g);c.getProgramParameter(g,c.LINK_STATUS)||e(Error("Shader program err: "+
c.getProgramInfoLog(g)));return new Lh(g,a.a,b,a.ed)}function ei(a,b,c,d){var f=Math.sin((c-a)/2),b=Math.sin((d-b)/2);return 6378137*2*Math.asin(Math.sqrt(f*f+Math.cos(a)*Math.cos(c)*b*b))};function fi(a,b,c){this.x=w(a)?a:0;this.y=w(b)?b:0;this.H=w(c)?c:0}fi.prototype.ga=function(){return new fi(this.x,this.y,this.H)};fi.prototype.yc=function(){return[this.x,this.y,this.H]};function gi(a,b,c){this.x=a;this.y=b;this.H=c}F(gi,fi);r=gi.prototype;r.ga=function(){return new gi(this.x,this.y,this.H)};r.scale=function(a){this.x*=a;this.y*=a;this.H*=a;return this};r.normalize=function(){return this.scale(1/Math.sqrt(this.x*this.x+this.y*this.y+this.H*this.H))};r.add=function(a){this.x+=a.x;this.y+=a.y;this.H+=a.H;return this};r.bh=function(a){this.x-=a.x;this.y-=a.y;this.H-=a.H;return this};r.equals=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.H==a.H};function hi(a,b,c,d,f,g){if(z(d))return n;a=d.multiply(new X([[a/f*2-1],[1-2*b/g],[c*2-1],[1]]));if(Y(a,3,0)==0)return n;a=a.multiply(1/Y(a,3,0));return new gi(Y(a,0,0),Y(a,1,0),Y(a,2,0))};function ii(){if(I)this.Ec={},this.yf={},this.rf=[]}ii.prototype.ja=rc("goog.net.xhrMonitor");ii.prototype.ma=I;ii.prototype.Wb=function(a){this.ma=I&&a};function ji(a){var b=ki;if(b.ma){var c=C(a)?a:ia(a)?ja(a):"";b.ja.log(mc,"Pushing context: "+a+" ("+c+")",i);b.rf.push(c)}}function li(){var a=ki;if(a.ma){var b=a.rf.pop();a.ja.log(mc,"Popping context: "+b,i);mi(a,b)}}
function ni(a){var b=ki;if(b.ma){a=ja(a);oc(b.ja,"Opening XHR : "+a);for(var c=0;c<b.rf.length;c++){var d=b.rf[c];oi(b.Ec,d,a);oi(b.yf,a,d)}}}function mi(a,b){var c=a.yf[b],d=a.Ec[b];c&&d&&(a.ja.log(mc,"Updating dependent contexts",i),M(c,function(a){M(d,function(b){oi(this.Ec,a,b);oi(this.yf,b,a)},this)},a))}function oi(a,b,c){a[b]||(a[b]=[]);Bb(a[b],c)||a[b].push(c)}var ki=new ii;function pi(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}e(Error("Invalid JSON string: "+a))};function qi(){}qi.prototype.qh=n;function ri(a){var b;if(!(b=a.qh))b={},si(a)&&(b[0]=!0,b[1]=!0),b=a.qh=b;return b};var ti;function ui(){}F(ui,qi);function vi(a){return(a=si(a))?new ActiveXObject(a):new XMLHttpRequest}ui.prototype.lg=n;
function si(a){if(!a.lg&&typeof XMLHttpRequest=="undefined"&&typeof ActiveXObject!="undefined"){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.lg=d}catch(f){}}e(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.lg}ti=new ui;function wi(a){this.headers=new Ub;this.zf=a||n}F(wi,T);wi.prototype.ja=rc("goog.net.XhrIo");var xi=/^https?:?$/i,yi=[];function zi(a,b){var c=new wi;yi.push(c);b&&R(c,"complete",b);R(c,"ready",oa(Ai,c));c.send(a,i,i,i)}function Ai(a){a.j();Cb(yi,a)}r=wi.prototype;r.$b=!1;r.D=n;r.xf=n;r.de="";r.$h="";r.be=0;r.ce="";r.Sf=!1;r.Ve=!1;r.mg=!1;r.Rc=!1;r.vf=0;r.gd=n;r.zi="";r.ul=!1;
r.send=function(a,b,c,d){this.D&&e(Error("[goog.net.XhrIo] Object is active with another request"));b=b?b.toUpperCase():"GET";this.de=a;this.ce="";this.be=0;this.$h=b;this.Sf=!1;this.$b=!0;this.D=this.zf?vi(this.zf):vi(ti);this.xf=this.zf?ri(this.zf):ri(ti);ni(this.D);this.D.onreadystatechange=D(this.qi,this);try{oc(this.ja,Bi(this,"Opening Xhr")),this.mg=!0,this.D.open(b,a,!0),this.mg=!1}catch(f){oc(this.ja,Bi(this,"Error opening Xhr: "+f.message));Ci(this,f);return}var a=c||"",g=this.headers.ga();
d&&Ob(d,function(a,b){g.set(b,a)});b=="POST"&&!g.rb("Content-Type")&&g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");Ob(g,function(a,b){this.D.setRequestHeader(b,a)},this);if(this.zi)this.D.responseType=this.zi;if("withCredentials"in this.D)this.D.withCredentials=this.ul;try{if(this.gd)rf.clearTimeout(this.gd),this.gd=n;if(this.vf>0)oc(this.ja,Bi(this,"Will abort after "+this.vf+"ms if incomplete")),this.gd=rf.setTimeout(D(this.hd,this),this.vf);oc(this.ja,Bi(this,"Sending request"));
this.Ve=!0;this.D.send(a);this.Ve=!1}catch(h){oc(this.ja,Bi(this,"Send error: "+h.message)),Ci(this,h)}};r.dispatchEvent=function(a){if(this.D){ji(this.D);try{return wi.b.dispatchEvent.call(this,a)}finally{li()}}else return wi.b.dispatchEvent.call(this,a)};r.hd=function(){if(typeof ca!="undefined"&&this.D)this.ce="Timed out after "+this.vf+"ms, aborting",this.be=8,oc(this.ja,Bi(this,this.ce)),this.dispatchEvent("timeout"),this.abort(8)};
function Ci(a,b){a.$b=!1;if(a.D)a.Rc=!0,a.D.abort(),a.Rc=!1;a.ce=b;a.be=5;Di(a);Ei(a)}function Di(a){if(!a.Sf)a.Sf=!0,a.dispatchEvent("complete"),a.dispatchEvent("error")}r.abort=function(a){if(this.D&&this.$b)oc(this.ja,Bi(this,"Aborting")),this.$b=!1,this.Rc=!0,this.D.abort(),this.Rc=!1,this.be=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ei(this)};r.h=function(){if(this.D){if(this.$b)this.$b=!1,this.Rc=!0,this.D.abort(),this.Rc=!1;Ei(this,!0)}wi.b.h.call(this)};
r.qi=function(){!this.mg&&!this.Ve&&!this.Rc?this.Ok():Fi(this)};r.Ok=function(){Fi(this)};
function Fi(a){if(a.$b&&typeof ca!="undefined")if(a.xf[1]&&Gi(a)==4&&Hi(a)==2)oc(a.ja,Bi(a,"Local request error detected and ignored"));else if(a.Ve&&Gi(a)==4)rf.setTimeout(D(a.qi,a),0);else if(a.dispatchEvent("readystatechange"),Gi(a)==4){oc(a.ja,Bi(a,"Request complete"));a.$b=!1;if(Ii(a))a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.be=6;var b;try{b=Gi(a)>2?a.D.statusText:""}catch(c){oc(a.ja,"Can not get status: "+c.message),b=""}a.ce=b+" ["+Hi(a)+"]";Di(a)}Ei(a)}}
function Ei(a,b){if(a.D){var c=a.D,d=a.xf[0]?u:n;a.D=n;a.xf=n;if(a.gd)rf.clearTimeout(a.gd),a.gd=n;b||(ji(c),a.dispatchEvent("ready"),li());var f=ki;if(f.ma){var g=ja(c);oc(f.ja,"Closing XHR : "+g);delete f.yf[g];for(var h in f.Ec)Cb(f.Ec[h],g),f.Ec[h].length==0&&delete f.Ec[h]}try{c.onreadystatechange=d}catch(j){a.ja.log(ic,"Problem encountered resetting onreadystatechange: "+j.message,i)}}}r.ae=function(){return!!this.D};
function Ii(a){switch(Hi(a)){case 0:return a=C(a.de)?a.de.match(Gc)[1]||n:a.de.Vb,!(a?xi.test(a):self.location?xi.test(self.location.protocol):1);case 200:case 201:case 202:case 204:case 304:case 1223:return!0;default:return!1}}function Gi(a){return a.D?a.D.readyState:0}function Hi(a){try{return Gi(a)>2?a.D.status:-1}catch(b){return a.ja.log(jc,"Can not get status: "+b.message,i),-1}}function Bi(a,b){return b+" ["+a.$h+" "+a.de+" "+Hi(a)+"]"};function Ji(a,b,c,d,f){this.a=a;a=this.a.g;this.Db=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.Db);a.bufferData(a.ARRAY_BUFFER,new Float32Array(b),a.STATIC_DRAW);this.Db.lc=3;this.Db.ff=b.length/3;this.Ae=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.Ae);a.bufferData(a.ARRAY_BUFFER,new Float32Array(c),a.STATIC_DRAW);this.Ae.lc=3;this.Ae.ff=c.length/3;this.te=n;this.Nb=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Nb);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(d),a.STATIC_DRAW);
this.Nb.lc=1;this.Nb.ff=d.length;this.ki=this.Nb.ff;this.sj=A(f)&&f.length>=3?[f[0],f[1],f[2]]:[0.8,0.8,0.8]}
Ji.prototype.draw=function(a){var b=this.a.g,c=new Float32Array(Kb(this.a.ua.ca.yc()));b.uniformMatrix4fv(a.Dg,!1,c);c=new Float32Array(Kb(ih(wh(this.a)).yc()));b.uniformMatrix4fv(a.Eg,!1,c);c=new Float32Array(Kb(ih(qh(this.a.ua)).yc()));b.uniformMatrix3fv(a.Ak,!1,c);b.uniform3fv(a.rj,this.sj);b.bindBuffer(b.ARRAY_BUFFER,this.Db);b.vertexAttribPointer(a.Ac,this.Db.lc,b.FLOAT,!1,0,0);b.bindBuffer(b.ARRAY_BUFFER,this.Ae);b.vertexAttribPointer(a.Ti,this.Ae.lc,b.FLOAT,!1,0,0);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,
this.Nb);b.drawElements(b.TRIANGLES,this.Nb.ff,b.UNSIGNED_SHORT,0)};function Ki(a,b){this.a=a;var c=new mh;nh(c,O(16.598914));oh(c,-O(49.194289));var d={},f;for(f in c)d[f]=c[f];c.translate(0,0,1);f=1/6378137;c.scale(f,f,f);this.size=b.objects["o3d.Primitive"].length;this.Li=[];var g=b.objects["o3d.VertexBuffer"];f={};for(var h=0;h<g.length;++h){for(var j=g[h].custom.fieldData[0].data,k=g[h].custom.fieldData[1].data,l=[],o=[],m=0;m<j.length/3;++m){var x=c.ca.multiply(new X([[j[3*m]],[j[3*m+1]],[j[3*m+2]],[1]]));l.push(Y(x,0,0));l.push(Y(x,1,0));l.push(Y(x,2,0));x=
d.ca.multiply(new X([[k[3*m]],[k[3*m+1]],[k[3*m+2]],[1]]));o.push(Y(x,0,0));o.push(Y(x,1,0));o.push(Y(x,2,0))}f[g[h].custom.fieldData[0].id]=l;f[g[h].custom.fieldData[1].id]=o}d=b.objects["o3d.IndexBuffer"];c={};for(h=0;h<d.length;++h)c[d[h].id]=d[h].custom.fieldData[0].data;g=b.objects["o3d.StreamBank"];d={};for(h=0;h<g.length;++h)d[g[h].id]=g[h].custom.vertexStreams;j=b.objects["o3d.Material"];g={};for(h=0;h<j.length;++h)g[j[h].id]=j[h].params.diffuse.value;for(h=0;h<this.size;++h)j=b.objects["o3d.Primitive"][h],
k=d[j.params["o3d.streamBank"].value.ref],this.Li.push(new Ji(a,f[k[0].stream.field],f[k[1].stream.field],c[j.properties.indexBuffer.ref],g[j.params["o3d.material"].value.ref]))}Ki.prototype.draw=function(a){for(var b=0;b<this.size;++b)this.Li[b].draw(a)};function Li(a){this.a=a;this.Cg=[];this.v=n;var a=this.a.g,b=zh("model-fs.glsl"),b=xh(this.a,b,a.FRAGMENT_SHADER),c=zh("model-vs.glsl"),c=xh(this.a,c,a.VERTEX_SHADER),d=a.createProgram();z(d)&&e(Error("Unknown"));a.attachShader(d,c);a.attachShader(d,b);a.linkProgram(d);a.getProgramParameter(d,a.LINK_STATUS)||e(Error("Shader program err: "+a.getProgramInfoLog(d)));d.Ac=a.getAttribLocation(d,"aVertexPosition");a.enableVertexAttribArray(d.Ac);d.Ti=a.getAttribLocation(d,"aVertexNormal");a.enableVertexAttribArray(d.Ti);
d.Dg=a.getUniformLocation(d,"uMVMatrix");d.Eg=a.getUniformLocation(d,"uMVPMatrix");d.Ak=a.getUniformLocation(d,"uNMatrix");d.rj=a.getUniformLocation(d,"uColor");this.v=d}Li.prototype.Pd=function(a,b){zi(a,D(function(a){if(Ii(a.target))a=a.target,a=a.D?pi(a.D.responseText):i,this.Cg.push(b?new Ki(this.a,a):new Ji(this.a,a.vertexPositions,a.vertexNormals,a.indices))},this))};Li.prototype.draw=function(){this.Cg.length!=0&&(this.a.g.useProgram(this.v),M(this.Cg,D(function(a){a.draw(this.v)},this)))};function Mi(a,b,c,d,f,g){this.a=a;this.Vh=b||n;this.zc=c||document.createElement("div");if(!w(c))a=this.a.canvas,a.parentNode&&a.parentNode.insertBefore(this.zc,a.nextSibling);this.we=d||document.createElement("img");if(!w(d))d=this.zc,d.parentNode&&d.parentNode.insertBefore(this.we,d.nextSibling);this.Zi=g||n;this.qa=new ci(this,f);this.Gj=new Ah(this);this.ue=0;this.c=new Bh(this);this.hi=new Li(this.a);vh(this);this.hh()}
Mi.prototype.hh=function(){z(this.zc)||(ud(this.zc),td(this.zc,this.Zi),this.qa.pa.md(this.zc),this.qa.pd&&(td(this.zc,Q("br"),Q("strong",{},"Overlay data:"),Q("br")),this.qa.pd.md(this.zc)));if(!z(this.we))z(this.qa.pa.Pe())?this.we.style.visibility="hidden":(this.we.src=this.qa.pa.Pe(),this.we.style.visibility="visible")};function Hh(a){return Math.max(3,a.qa.pa.Yd())}function vh(a){a.ue=0.7*a.a.canvas.height/a.qa.pa.hc()}
Mi.prototype.draw=function(){var a=this.a.g;if(!z(this.Vh)){for(var b=this.Vh,c=Cc(this.c.zb).toFixed(4)+"; "+Cc(this.c.Ob).toFixed(4)+" @ "+this.c.ka.toFixed(0)+"m -> z="+this.c.getZoom().toFixed(3)+"; ",d=this.qa,f=d.La,g="",h=0;h<f.ia.length;++h)g+=h+f.Va+":"+f.ia[h].cc.length+" ";f="BufferQueue size: "+g+"; Loading tiles: "+d.pa.gb;d.pd&&(f+=" + "+d.pd.gb);b.innerHTML=c+f}b=this.c.ka/6378137;c=this.a;c.Ce=0.25*b;c.Be=1+b;uh(c);a.enable(a.BLEND);a.disable(a.DEPTH_TEST);b=Math.sin((Math.PI-this.a.Kc)/
2);c=Math.sin(this.a.Kc/2);this.a.ua.ca=ch(4);oh(this.a.ua,-this.c.getTilt());this.a.ua.translate(0,0,c-1-this.c.ka/6378137);this.a.ua.scale(b,b,b);this.Gj.draw();a.disable(a.BLEND);a.enable(a.DEPTH_TEST);this.a.ua.ca=ch(4);ph(this.a.ua,-this.c.Ai);oh(this.a.ua,-this.c.getTilt());ph(this.a.ua,-this.c.getHeading());this.a.ua.translate(0,0,-1-this.c.ka/6378137);oh(this.a.ua,this.c.zb);nh(this.a.ua,-this.c.Ob);this.qa.draw();this.hi.draw()};
function Ni(a,b){var c=a.ga();c.x=-c.x;c.y=-c.y;c.H=-c.H;var d=b.x*c.x+b.y*c.y+b.H*c.H,f=d*d-(c.x*c.x+c.y*c.y+c.H*c.H)+1;return f<0?n:(c=Math.min(d+Math.sqrt(f),d-Math.sqrt(f)),d=Math.max(d+Math.sqrt(f),d-Math.sqrt(f)),[c,d])}
function Ih(a,b,c,d){var f=hi(b,c,0,a.a.ef,a.a.ob,a.a.nb),a=hi(b,c,1,a.a.ef,a.a.ob,a.a.nb);if(z(f)||z(a))return n;a.bh(f);a.normalize();b=Ni(f,a);if(z(b))return n;a=a.scale(b[0]);f=new gi(f.x+a.x,f.y+a.y,f.H+a.H);a=Math.asin(f.x/Math.sqrt(1-f.y*f.y));f.H<0&&(a=Math.PI-a);return d==!0?[Math.asin(f.y),Ec(a)]:[Cc(Math.asin(f.y)),Cc(Ec(a))]}Mi.prototype.Pd=function(a,b){this.hi.Pd(a,b)};function uc(a){return Math.log(Math.tan(a/2+Math.PI/4))}function bi(a){return 2*Math.atan(Math.exp(a))-Math.PI/2};function Oi(a,b,c){this.target=a;this.handle=b||a;this.bi=c||new Se(NaN,NaN,NaN,NaN);this.B=P(a);this.ub=new Uf(this);R(this.handle,["touchstart","mousedown"],this.Gi,!1,this)}F(Oi,T);var Pi=H||I&&K("1.9.3");r=Oi.prototype;r.clientX=0;r.clientY=0;r.screenX=0;r.screenY=0;r.Ii=0;r.Ji=0;r.td=0;r.gc=0;r.ma=!0;r.Qa=!1;r.Th=0;r.uk=0;r.Vj=!1;r.ya=p("ub");r.Wb=ba("ma");
r.h=function(){Oi.b.h.call(this);ve(this.handle,["touchstart","mousedown"],this.Gi,!1,this);this.ub.j();delete this.target;delete this.handle;delete this.ub};
r.Gi=function(a){var b=a.type=="mousedown";if(this.ma&&!this.Qa&&(!b||Zd(a))){Qi(a);if(this.Th==0)if(Ri(this,a),this.Qa)a.preventDefault();else return;else a.preventDefault();var b=this.B,c=b.documentElement,d=!Pi;this.ub.i(b,["touchmove","mousemove"],this.Pj,d);this.ub.i(b,["touchend","mouseup"],this.Ke,d);Pi?(c.setCapture(!1),this.ub.i(c,"losecapture",this.Ke)):this.ub.i(b?b.parentWindow||b.defaultView:window,"blur",this.Ke);H&&this.Vj&&this.ub.i(b,"dragstart",Sd);this.bl&&this.ub.i(this.bl,"scroll",
this.Pk,d);this.clientX=this.Ii=a.clientX;this.clientY=this.Ji=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.td=this.target.offsetLeft;this.gc=this.target.offsetTop;this.Mg=Gd(jd(this.B));this.uk=E()}else this.dispatchEvent("earlycancel")};function Ri(a,b){if(a.dispatchEvent(new Si("start",a,b.clientX,b.clientY,b))!==!1)a.Qa=!0}
r.Ke=function(a,b){this.ub.Gd();Pi&&this.B.releaseCapture();var c=Ti(this,this.td),d=Ui(this,this.gc);this.Qa?(Qi(a),this.Qa=!1,this.dispatchEvent(new Si("end",this,a.clientX,a.clientY,a,c,d,b||a.type=="touchcancel"))):this.dispatchEvent("earlycancel");(a.type=="touchend"||a.type=="touchcancel")&&a.preventDefault()};
function Qi(a){var b=a.type;b=="touchstart"||b=="touchmove"?a.jc(a.xa.targetTouches[0],a.currentTarget):(b=="touchend"||b=="touchcancel")&&a.jc(a.xa.changedTouches[0],a.currentTarget)}
r.Pj=function(a){if(this.ma){Qi(a);var b=a.clientX-this.clientX,c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.Qa){var d=this.Ii-this.clientX,f=this.Ji-this.clientY;if(d*d+f*f>this.Th&&(Ri(this,a),!this.Qa)){this.Ke(a);return}}c=Wi(this,b,c);b=c.x;c=c.y;this.Qa&&this.dispatchEvent(new Si("beforedrag",this,a.clientX,a.clientY,a,b,c))!==!1&&(Xi(this,a,b,c),a.preventDefault())}};
function Wi(a,b,c){var d=Gd(jd(a.B));b+=d.x-a.Mg.x;c+=d.y-a.Mg.y;a.Mg=d;a.td+=b;a.gc+=c;b=Ti(a,a.td);a=Ui(a,a.gc);return new G(b,a)}r.Pk=function(a){var b=Wi(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;Xi(this,a,b.x,b.y)};function Xi(a,b,c,d){a.Qf(c,d);a.dispatchEvent(new Si("drag",a,b.clientX,b.clientY,b,c,d))}function Ti(a,b){var c=a.bi,d=!isNaN(c.left)?c.left:n,c=!isNaN(c.width)?c.width:0;return Math.min(d!=n?d+c:Infinity,Math.max(d!=n?d:-Infinity,b))}
function Ui(a,b){var c=a.bi,d=!isNaN(c.top)?c.top:n,c=!isNaN(c.height)?c.height:0;return Math.min(d!=n?d+c:Infinity,Math.max(d!=n?d:-Infinity,b))}r.Qf=function(a,b){this.target.style.left=a+"px";this.target.style.top=b+"px"};function Si(a,b,c,d,f,g,h,j){Rd.call(this,a);this.clientX=c;this.clientY=d;this.zl=f;this.left=w(g)?g:b.td;this.top=w(h)?h:b.gc;this.Ah=b;this.Al=!!j}F(Si,Rd);function Yi(a){this.f=a;this.ta=R(this.f,I?"DOMMouseScroll":"mousewheel",this)}F(Yi,T);
Yi.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.xa;if(a.type=="mousewheel"){c=1;if(H||J&&(Va||K("532.0")))c=40;d=J&&Ua&&-a.wheelDelta%c!=0?-a.wheelDelta:-a.wheelDelta/c;w(a.wheelDeltaX)?(b=J&&Ua&&-a.wheelDeltaX%c!=0?-a.wheelDeltaX:-a.wheelDeltaX/c,c=J&&Ua&&-a.wheelDeltaY%c!=0?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,d>100?d=3:d<-100&&(d=-3),w(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;ga(this.fi)&&(b=N(b,-this.fi,this.fi));ga(this.gi)&&(c=N(c,-this.gi,this.gi));b=new Zi(d,a,
b,c);try{this.dispatchEvent(b)}finally{b.j()}};Yi.prototype.h=function(){Yi.b.h.call(this);S(this.ta);delete this.ta};function Zi(a,b,c,d){b&&this.jc(b,i);this.type="mousewheel";this.detail=a;this.td=c;this.gc=d}F(Zi,Vd);function $i(){tf.call(this,[0],[0],0);this.Ca=[]}F($i,tf);$i.prototype.Kg=function(){this.Tf(function(a){a.play(a.Ba==0)});$i.b.Kg.call(this)};$i.prototype.Lg=function(){this.Tf(function(a){a.stop()});$i.b.Lg.call(this)};$i.prototype.Hg=function(){this.yh();$i.b.Hg.call(this)};$i.prototype.yh=function(){M(this.Ca,function(a){a.j()})};function aj(){$i.call(this)}F(aj,$i);aj.prototype.Ma=function(){for(var a=0;a<this.Ca.length;a++)this.Ca[a].play();aj.b.Ma.call(this)};
aj.prototype.Tf=function(a){M(this.Ca,a)};aj.prototype.add=function(a){this.Ca.push(a);this.duration=Math.max(this.duration,a.duration)};aj.prototype.remove=function(a){if(Cb(this.Ca,a)&&a.duration==this.duration)this.duration=0,M(this.Ca,function(a){this.duration=Math.max(a.duration,this.duration)},this)};function bj(){$i.call(this);this.Lf=new Uf(this)}F(bj,$i);r=bj.prototype;r.Gc=0;r.Ma=function(){cj(this);bj.b.Ma.call(this)};r.qc=function(){dj(this);bj.b.qc.call(this)};
function dj(a){a.Gc=0;a.Lf.Gd()}function cj(a){a.s==-1&&(dj(a),M(a.Ca,function(a){a.Ba=0;Af(a,a.Ba);a.stop()}));a.Ca[a.Gc].play();a.Gc++;a.Gc<a.Ca.length&&a.Lf.i(a.Ca[a.Gc-1],"finish",function(){cj(this)})}r.add=function(a){this.Ca.push(a);this.duration+=a.duration};r.remove=function(a){Cb(this.Ca,a)&&(this.duration-=a.duration)};r.Tf=function(a){this.Gc>0&&a(this.Ca[this.Gc-1])};r.yh=function(){M(this.Ca,function(a){a.j()});this.Lf.j()};function ej(){}F(ej,T);r=ej.prototype;r.lb=0;r.hb=0;r.Ua=100;r.Fa=0;r.xc=1;r.Ia=!1;r.Vc=!1;r.Y=function(a){a=fj(this,a);if(this.lb!=a)this.lb=a+this.Fa>this.Ua?this.Ua-this.Fa:a<this.hb?this.hb:a,!this.Ia&&!this.Vc&&this.dispatchEvent("change")};r.o=function(){return fj(this,this.lb)};r.Id=function(a){a=fj(this,a);if(this.Fa!=a)this.Fa=a<0?0:this.lb+a>this.Ua?this.Ua-this.lb:a,!this.Ia&&!this.Vc&&this.dispatchEvent("change")};r.Jb=function(){return this.xc==n?this.Fa:Math.round(this.Fa/this.xc)*this.xc};
r.Sg=function(a){if(this.hb!=a){var b=this.Ia;this.Ia=!0;this.hb=a;if(a+this.Fa>this.Ua)this.Fa=this.Ua-this.hb;a>this.lb&&this.Y(a);if(a>this.Ua)this.Fa=0,this.re(a),this.Y(a);this.Ia=b;!this.Ia&&!this.Vc&&this.dispatchEvent("change")}};r.sa=function(){return fj(this,this.hb)};
r.re=function(a){a=fj(this,a);if(this.Ua!=a){var b=this.Ia;this.Ia=!0;this.Ua=a;a<this.lb+this.Fa&&this.Y(a-this.Fa);if(a<this.hb)this.Fa=0,this.Sg(a),this.Y(this.Ua);if(a<this.hb+this.Fa)this.Fa=this.Ua-this.hb;this.Ia=b;!this.Ia&&!this.Vc&&this.dispatchEvent("change")}};r.ra=function(){return fj(this,this.Ua)};r.Wg=function(a){if(this.xc!=a)this.xc=a,a=this.Ia,this.Ia=!0,this.re(this.ra()),this.Id(this.Jb()),this.Y(this.o()),this.Ia=a,!this.Ia&&!this.Vc&&this.dispatchEvent("change")};
function fj(a,b){return a.xc==n?b:a.hb+Math.round((b-a.hb)/a.xc)*a.xc};function gj(a){ug.call(this,a);this.r=new ej;R(this.r,"change",this.Rj,!1,this)}F(gj,ug);r=gj.prototype;r.Q="horizontal";r.We=!1;r.yk=!1;r.bc=10;r.je=0;r.t=function(){gj.b.t.call(this);this.tb(this.$().t("div",this.p(this.Q)))};r.tb=function(a){gj.b.tb.call(this,a);dd(a,this.p(this.Q));var a=this.d(),b=md(document,n,"goog-slider-thumb",a)[0];b||(b=this.$().t("div","goog-slider-thumb"),Lf(b,"button"),a.appendChild(b));this.L=this.Ea=b;Lf(this.d(),"slider");hj(this)};
r.ha=function(){gj.b.ha.call(this);this.Zb=new Oi(this.L);this.Jc=new Oi(this.Ea);this.Zb.Qf=this.Jc.Qf=u;this.M=new cg(this.d());this.oc=new Yi(this.d());this.ya().i(this.Zb,"beforedrag",this.Ih).i(this.Jc,"beforedrag",this.Ih).i(this.Zb,["start","end"],this.Oh).i(this.Jc,["start","end"],this.Oh).i(this.M,"key",this.dg).i(this.d(),"mousedown",this.Se).i(this.oc,"mousewheel",this.Oj);this.d().tabIndex=0;ij(this)};r.Ra=function(){gj.b.Ra.call(this);Ia(this.Zb,this.Jc,this.M,this.oc)};
r.Ih=function(a){var b=a.Ah==this.Zb?this.L:this.Ea,c;this.Q=="vertical"?(c=this.d().clientHeight-b.offsetHeight,c=(c-a.top)/c*(this.ra()-this.sa())+this.sa()):c=a.left/(this.d().clientWidth-b.offsetWidth)*(this.ra()-this.sa())+this.sa();c=a.Ah==this.Zb?Math.min(Math.max(c,this.sa()),this.o()+this.Jb()):Math.min(Math.max(c,this.o()),this.ra());jj(this,b,c)};
r.Oh=function(a){var b=a.type=="start",c=this.d();b?dd(c,"goog-slider-dragging"):ed(c,"goog-slider-dragging");a=a.target.handle;b?dd(a,"goog-slider-thumb-dragging"):ed(a,"goog-slider-thumb-dragging")};
r.dg=function(a){var b=!0;switch(a.keyCode){case 36:kj(this,this.sa());break;case 35:kj(this,this.ra());break;case 33:lj(this,this.bc);break;case 34:lj(this,-this.bc);break;case 37:case 40:lj(this,a.shiftKey?-this.bc:-this.gh);break;case 39:case 38:lj(this,a.shiftKey?this.bc:this.gh);break;default:b=!1}b&&a.preventDefault()};
r.Se=function(a){this.d().focus&&this.d().focus();var b=a.target;if(!xd(this.L,b)&&!xd(this.Ea,b))if(this.yk)kj(this,mj(this,a));else{this.Zg(a);this.Ya=nj(this,mj(this,a));this.Uh=this.Q=="vertical"?this.$e<this.Ya.offsetTop:this.$e>this.Ya.offsetLeft+this.Ya.offsetWidth;a=P(this.d());this.ya().i(a,"mouseup",this.Nh,!0).i(this.d(),"mousemove",this.Zg);if(!this.ic)this.ic=new qf(200),this.ya().i(this.ic,sf,this.Ph);this.Ph();this.ic.start()}};r.Oj=function(a){lj(this,(a.detail>0?-1:1)*this.gh);a.preventDefault()};
r.Ph=function(){var a;if(this.Q=="vertical"){var b=this.$e,c=this.Ya.offsetTop;this.Uh?b<c&&(a=oj(this,this.Ya)+this.bc):b>c+this.Ya.offsetHeight&&(a=oj(this,this.Ya)-this.bc)}else b=this.$e,c=this.Ya.offsetLeft,this.Uh?b>c+this.Ya.offsetWidth&&(a=oj(this,this.Ya)+this.bc):b<c&&(a=oj(this,this.Ya)-this.bc);w(a)&&jj(this,this.Ya,a)};r.Nh=function(){this.ic&&this.ic.stop();var a=P(this.d());this.ya().fa(a,"mouseup",this.Nh,!0).fa(this.d(),"mousemove",this.Zg)};
function pj(a,b){var c,d=a.d();c=df(b);d=df(d);c=new G(c.x-d.x,c.y-d.y);return a.Q=="vertical"?c.y:c.x}r.Zg=function(a){this.$e=pj(this,a)};function mj(a,b){var c=a.sa(),d=a.ra();if(a.Q=="vertical"){var f=a.L.offsetHeight,g=a.d().clientHeight-f,f=pj(a,b)-f/2;return(d-c)*(g-f)/g+c}else return f=a.L.offsetWidth,g=a.d().clientWidth-f,f=pj(a,b)-f/2,(d-c)*f/g+c}
function oj(a,b){if(b==a.L)return a.r.o();else if(b==a.Ea)return a.r.o()+a.r.Jb();else e(Error("Illegal thumb element. Neither minThumb nor maxThumb"))}function lj(a,b){var c=oj(a,a.L)+b,d=oj(a,a.Ea)+b,c=N(c,a.sa(),a.ra()-a.je),d=N(d,a.sa()+a.je,a.ra());qj(a,c,d-c)}function jj(a,b,c){var d=n;b==a.Ea&&c<=a.r.ra()&&c>=a.r.o()+a.je&&(d=c-a.r.o());var f=d||a.r.Jb();b==a.L&&c>=a.sa()&&c<=a.r.o()+f-a.je&&(b=f-(c-a.r.o()),fj(a.r,c)+fj(a.r,b)==fj(a.r,c+b)&&(qj(a,c,b),d=n));d!=n&&a.r.Id(d)}
function qj(a,b,c){if(a.sa()<=b&&b<=a.ra()-c&&a.je<=c&&c<=a.ra()-b&&!(b==a.o()&&c==a.Jb()))a.r.Vc=!0,a.r.Id(0),a.r.Y(b),a.r.Id(c),a.r.Vc=!1,ij(a),a.dispatchEvent("change")}r.sa=function(){return this.r.sa()};r.Sg=function(a){this.r.Sg(a)};r.ra=function(){return this.r.ra()};r.re=function(a){this.r.re(a)};function nj(a,b){return b<=a.r.o()+a.r.Jb()/2?a.L:a.Ea}r.Rj=function(){ij(this);hj(this);this.dispatchEvent("change")};
function ij(a){if(a.L&&!a.We){var b=rj(a,oj(a,a.L)),c=rj(a,oj(a,a.Ea));if(a.Q=="vertical"){if(a.L.style.top=b.y+"px",a.Ea.style.top=c.y+"px",a.S)b=sj(c.y,b.y,a.L.offsetHeight),a.S.style.top=b.pc+"px",a.S.style.height=b.size+"px"}else if(a.L.style.left=b.x+"px",a.Ea.style.left=c.x+"px",a.S)b=sj(b.x,c.x,a.L.offsetWidth),a.S.style.left=b.pc+"px",a.S.style.width=b.size+"px"}}function sj(a,b,c){var d=Math.ceil(c/2);return{pc:a+d,size:Math.max(b-a+c-2*d,0)}}
function rj(a,b){var c=new G;if(a.L){var d=a.sa(),f=a.ra(),f=b==d&&d==f?0:(b-d)/(f-d);a.Q=="vertical"?(d=a.d().clientHeight-a.L.offsetHeight,f=Math.round(f*d),c.y=d-f):(d=Math.round(f*(a.d().clientWidth-a.L.offsetWidth)),c.x=d)}return c}
function kj(a,b){b=Math.min(a.ra(),Math.max(b,a.sa()));a.We&&a.He.stop(!0);var c=new aj,d=nj(a,b),f=rj(a,b);c.add(new Df(d,a.Q=="vertical"?[d.offsetLeft,f.y]:[f.x,d.offsetTop],100));if(a.S){var g=rj(a,a.r.o()),h=rj(a,a.r.o()+a.r.Jb());d==a.L?g=f:h=f;a.Q=="vertical"?(f=sj(h.y,g.y,a.L.offsetHeight),c.add(new Df(a.S,[a.S.offsetLeft,f.pc],100)),c.add(new Ff(a.S,a.S.offsetHeight,f.size,100))):(f=sj(g.x,h.x,a.L.offsetWidth),c.add(new Df(a.S,[f.pc,a.S.offsetTop],100)),c.add(new Ef(a.S,a.S.offsetWidth,f.size,
100)))}a.He=c;a.ya().i(c,"end",a.yj);a.We=!0;jj(a,d,b);c.play(!1)}r.yj=function(){this.We=!1};r.qf=function(a){if(this.Q!=a){var b=this.p(this.Q),c=this.p(a);this.Q=a;if(this.d()){for(var a=this.d(),d=cd(a),f=!1,g=0;g<d.length;g++)d[g]==b&&(Gb(d,g--,1),f=!0);if(f)d.push(c),a.className=d.join(" ");this.L.style.left=this.L.style.top="";this.Ea.style.left=this.Ea.style.top="";if(this.S)this.S.style.left=this.S.style.top="",this.S.style.width=this.S.style.height="";ij(this)}}};
r.h=function(){gj.b.h.call(this);this.ic&&this.ic.j();delete this.ic;this.He&&this.He.j();delete this.He;delete this.L;delete this.Ea;this.S&&delete this.S;this.r.j();delete this.r;this.M&&(this.M.j(),delete this.M);this.oc&&(this.oc.j(),delete this.oc);this.Zb&&(this.Zb.j(),delete this.Zb);this.Jc&&(this.Jc.j(),delete this.Jc)};r.gh=1;r.Wg=function(a){this.r.Wg(a)};r.o=function(){return this.r.o()};r.Y=function(a){jj(this,this.L,a)};r.Jb=function(){return this.r.Jb()};
r.Id=function(a){jj(this,this.Ea,this.r.o()+a)};r.setVisible=function(a){jf(this.d(),a);a&&ij(this)};function hj(a){var b=a.d();b&&(V(b,"valuemin",a.sa()),V(b,"valuemax",a.ra()),V(b,"valuenow",a.o()))};function tj(a){gj.call(this,a);this.r.Id(0)}F(tj,gj);tj.prototype.p=function(a){return a=="vertical"?"goog-slider-vertical":"goog-slider-horizontal"};function uj(a,b){this.e=a;this.wc=new tj;this.wc.qf("vertical");this.wc.re(1);this.wc.Wg(0.01);vj=!1;this.wc.Y((this.e.c.getZoom()-Hh(this.e))/this.e.qa.pa.xb());this.ta=R(this.wc,"change",function(b){vj==!1&&a.c.setZoom(b.target.o()*(a.qa.pa.xb()-Hh(a))+Hh(a));vj=!1});this.wl=R(this.e.c,Dh,this.vl,!1,this);this.Df=new ah("");Rg(this.Df,"weapp-zoomslider-add");this.ah=new ah("");Rg(this.ah,"weapp-zoomslider-substract");this.Yi=R(this.Df,"action",function(){a.c.setZoom(Math.floor(a.c.getZoom()+1))});
this.il=R(this.ah,"action",function(){a.c.setZoom(Math.floor(a.c.getZoom()-1))});this.Df.Tb(b);this.wc.Tb(b);this.ah.Tb(b)}var vj;F(uj,Ha);uj.prototype.vl=function(){vj=!0;this.wc.Y((this.e.c.getZoom()-Hh(this.e))/this.e.qa.pa.xb())};uj.prototype.h=function(){S(this.ta);S(this.wl);S(this.Yi);S(this.il);this.wc.j()};function wj(a){this.dc=a;this.F=n;this.sf=[];this.Le=[]}
function xj(a,b,c,d){function f(a){var b=a*a;a*=a*a;return 6*a*b+-15*b*b+10*a}t(a.F)&&a.Ig();a.F=new aj;var g=a.dc.getPosition();a.sf=[0,0,a.dc.getHeading(),a.dc.getTilt()];a.Le=[0,0,0,0];yj(a,g[0],g[1],b,c);var h=["begin","animate","end"],j=new tf(a.sf,a.Le,3E3,f);R(j,h,a.Jk,!1,a);a.F.add(j);if(d)c=ei(g[0],g[1],b,c),b=a.dc.ka,c=Math.min(b,d)+c*0.2,c=Math.max(Math.max(b,d),c),b=new tf([b],[c],1500,f),d=new tf([c],[d],1500,f),R(b,h,a.li,!1,a),R(d,h,a.li,!1,a),h=new bj,h.add(b),h.add(d),a.F.add(h);
R(a.F,"end",a.Ig,!1,a);a.F.play()}function yj(a,b,c,d,f){var c=Bc(c,2*Math.PI),f=Bc(f,2*Math.PI),g=c-f;g<-Math.PI?c+=2*Math.PI:g>Math.PI&&(f+=2*Math.PI);a.sf[0]=b;a.sf[1]=c;a.Le[0]=d;a.Le[1]=f}wj.prototype.Jk=function(a){this.dc.setPosition(a.coords[0],a.coords[1]);this.dc.setHeading(a.coords[2]);this.dc.setTilt(a.coords[3])};wj.prototype.li=function(a){Fh(this.dc,a.coords[0])};wj.prototype.Ig=function(){if(t(this.F))this.F.j(),this.F=n};wj.prototype.cancel=function(){this.Ig()};function zj(a,b,c){this.lat=a;this.yg=b;this.element=c;this.parentElement=n;this.enabled=!0;this.visible=!1}r=zj.prototype;r.Sd=function(a){this.parentElement&&this.detach();this.parentElement=a;this.parentElement.appendChild(this.element)};r.detach=function(){if(this.parentElement)vd(this.element),this.parentElement=n};r.enable=function(a){(this.enabled=a||!1)||this.show(!1)};r.isEnabled=p("enabled");r.ba=p("visible");
r.show=function(a){this.visible=a==!0;this.element.style.display=this.visible?"block":"none"};function Aj(a,b,c,d){var f=Q("div",{"class":"leaflet-marker-icon"}),g=Q("a",{"class":"leaflet-popup-close-button",href:"#"}),c=Q("div",{"class":"leaflet-popup-content"},Q("h3",{},c),Q("p",{},d)),c=Q("div",{"class":"leaflet-popup-content-wrapper"},c),d=Q("div",{"class":"leaflet-popup-tip-container"},Q("div",{"class":"leaflet-popup-tip"}));this.Yc=Q("div",{"class":"leaflet-popup"},g,c,d);c=Q("div",{style:"position:absolute;"},f,this.Yc);zj.call(this,a,b,c);this.show(!1);this.Yg(!1);f.onclick=D(this.Yg,
this,!0);g.onclick=D(this.Yg,this,!1)}F(Aj,zj);Aj.prototype.Yg=function(a){a?(this.Yc.style.left=-Math.round((this.Yc.offsetWidth-this.element.offsetWidth)/2)+"px",this.Yc.style.opacity=1,this.Yc.style.visibility="visible"):(this.Yc.style.opacity=0,this.Yc.style.visibility="hidden")};function Bj(a,b,c){function d(){z(Cj)&&(Cj=new google.maps.Map(document.createElement("div")));Dj?f():google.maps.event.addListenerOnce(Cj,"idle",function(){Dj=!0;f()})}sc.call(this,"Google Maps - "+a);this.Ab=n;this.ek=a;this.Zj=b||0;this.Kk=c||u;this.Fe=new Yb;this.wg=0;this.xg=[];var f=D(function(){this.Ab=Cj.mapTypes[Ej(a)];vc(this);this.Kk()},this);t(s.Dl)&&google.maps&&google.maps.Map?d():z(Fj)?(Fj="googleMapsCallback"+Ea(),s[Fj]=D(d,this),b=document.createElement("script"),md(document,"head",
i,i)[0].appendChild(b),b.type="text/javascript",b.src="http://maps.google.com/maps/api/js?v=3.5&sensor=false&callback="+Fj):s[Fj]=sa(s[Fj],D(d,this))}F(Bj,sc);Bj.prototype.og=function(){return!z(this.Ab)};var Fj=n,Cj=n,Dj=!1;r=Bj.prototype;r.Yd=function(){return z(this.Ab)?0:this.Ab.minZoom||0};r.xb=function(){return z(this.Ab)?18:this.Ab.maxZoom};r.hc=function(){return z(this.Ab)?256:this.Ab.tileSize.width};
r.ge=function(a,b,c){var d=D(function(a){a=a.getElementsByTagName("img");return a[this.Zj]||a[0]},this);a.xh=d;a.vh=D(function(a){this.Ab.releaseTile(a)},this);var f=this.Ab.getTile(new google.maps.Point(a.x,a.y),a.zoom,document),d=d(f);d.onload=D(function(){if(Ma(a).src==Ma(a).__src__)a.state=20,this.gb--,b(a)},this);d.onerror=D(function(){a.Uf++;a.state=-10;this.gb--;c&&c(a)},this);a.setData(f);a.state=10;this.gb++};
r.md=function(a){this.Fe.wb()>0&&td(a,"Map Data \u00a9 "+(new Date).getFullYear()+" "+this.Fe.Sa().join(", ")+" \u2013 ");td(a,Q("a",{href:"http://www.google.com/intl/en-US_US/help/terms_maps.html",target:"_blank"},"Terms of Use"))};r.Pe=q("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAAYCAMAAACV6r5dAAABI1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABxcXEAAAAAAAAAAAAAAAAAAAAAAAAAAAAJCQkLCwsRERESEhIZGRkjIyMsLCw6OjpNTU1WVlZhYWFvb28AAABycnJ5eXl8fHzc3NyFhYWGhoaHiIeLi4uSkpKWlpaYmJiampqenp6mpqahoaGlpaWhoaGpqampqamrq6uqqqqur66vr6+usK6ysrK4uLi9vb3CwsLExMTJycnNzc3Q0NDT09PU1NTV1dXX19fZ2dmDg4Pg4ODi4uLj4+Pj4+Pl5eXk5OTl5eXk5OTl5eXk5OTo6Ojq6urv7+/x8fH5+fn9/f3////54OudAAAAYHRSTlNgXlpSTUY/Pjs5NTMwLSsoJiQiIB4cGhcUEgoBAAYXJy43QElWWV1SFRwQQp2LiaQyqYmwRIi1hwi5hyiEWrxsfwW/xMTJycW3qA2ajweNi4+YAdios7vFy5/g6vD2/P7aB358AAADLElEQVR4XpWUe3OiSBTFOxpMfDsqKt2dZGeiBBlx8zABx3EiZBJk8phsMyb4wvv9P8VexCpnq7aym/PX6Uv/qpt7uBDOuRB8IzRva2AYxinbbkNcrKvTqdGrMvtt2hoG4Es63+JIa9PAM03PX81GNf1NXPAR3O5av+GCn858kvlQLe+bcJfRORORYuB3G/sHuJXsbZ1wZbYgaU23bPrxcqd4wGMygsQ/bKynCN/WCTegsxtfWa8dHVhxe3oNigTaZ+OzorPIDofD62EtOv0H14a4RUGKKLOwWUAIxWxLcPr8apo+jDOHXJlGduXldT6YeuNwdWeWI5wNgnusf61YnJyu5uSQb4THTBckV8m44GaVl3kiV0n54JTkmZvKmeCT6PTUYPFtv7q3AFURZAgLUuds0xw+hG+7skVPQlCv4UzSbNqFkDxAK23lfThb49MVyQ8e/JtWXZDeKmy1t0n8BRd7GH47gL4LHQyCF2fwJ9q8YPfQLyGenC3V+8moKRUOOTlewFX+ERP9YaA+T8DZwxX7BTe3cJG1GVde4MqBm/QjN0CN8J0ZdLrpUlU/YJxQD+Y7mhDYZRNv7MFd0sJMnuHiNo6Y/oJOawnn5ePASTSe8HkAV/uyrq+DYydL+J7BmChNz8NPXVg265jZBMg5duUI669LkjlxfXfhJGSOuPSAe5Q4eSKULytw/6C4qmAz02NwU4z3wn4i/QLfs4wPw7NdrZ5NzKGTstafTdqHebfUGAyYIPyx3fVhOXm6vr5f+M1q1gn9kRH0E8d0zw1dtJdJ2eY058KyW8M3mTvNlg8wCzyZIs7tuqQ6ruuNTJVkNL3YMs2vrYxMLZpXTfNLMyMzakw8x4fVebmnqt3jekq96v+U2jpfz7teK2SzxUq7qumM2Uq7UqtpDOt2o12N7OHr/GczlezDItmoVeqKjkC+dKQzxONxsi1LtzaTiH7juLB0EcWgSkeaVRiDWheWiAE7nrj/EuP0BdRcNKGjJanheqP/iUdD7n/EpOSgL2mcvwtHRbdevk5x/qRP7P24oAX1YuxctnIy5e/HMZrGh0Kx3MY43o1vo/mX3/jfzoX94Q7k9zgAAAAASUVORK5CYII=");
r.xi=function(a){this.Fe=new Yb;var b=s.GAddCopyright,c=s.GVerify,d=s.GAppFeatures;s.GAddCopyright=D(function(){arguments.length>7&&arguments[7].length>0&&this.Fe.add(arguments[7])},this);s.GVerify=qa;s.GAppFeatures=D(function(){this.wg--;if(this.wg<=0)s.GAddCopyright=b,s.GVerify=c,s.GAppFeatures=d,M(this.xg,function(a){a.parentNode.removeChild(a)}),this.xg=[],this.Nf()},this);M(a,function(a){var b=document.createElement("script");md(document,"head",i,i)[0].appendChild(b);b.type="text/javascript";
this.xg.push(b);b.src="http://maps.google.com/maps?vp="+(Cc(a.oj)+","+Cc(a.pj))+"&z="+a.xl+"&spn="+(Cc(a.gl)+","+Cc(a.hl))+"&t="+Gj(this.ek);this.wg++},this)};function Ej(a){switch(a){case "Terrain":return google.maps.MapTypeId.TERRAIN;case "Hybrid":return google.maps.MapTypeId.HYBRID;case "Roadmap":return google.maps.MapTypeId.ROADMAP;default:case "Satellite":return google.maps.MapTypeId.SATELLITE}}
function Gj(a){switch(a){case "Terrain":return"p";case "Hybrid":return"h";case "Roadmap":return"m";default:case "Satellite":return"k"}}var Hj=D(document.createElement,document);document.createElement=function(a){var b=Hj(a);if(a=="img")b.crossOrigin="";return b};function Ij(a,b){zc.call(this,"Bing Maps - "+a);var c="bingsCallback_"+a,d="http://dev.virtualearth.net/REST/V1/Imagery/Metadata/"+a+"?key="+b+"&jsonp="+c;s[c]=w(s[c])?sa(D(this.Ei,this),s[c]):D(this.Ei,this);c=document.createElement("script");c.src=d;c.type="text/javascript";md(document,"head",i,i)[0].appendChild(c)}F(Ij,zc);r=Ij.prototype;r.og=function(){return!z(this.jb)};r.Ei=function(a){this.ie=a;if(a.resourceSets.length>0)this.jb=a.resourceSets[0].resources[0],vc(this);this.Nf()};
r.Yd=function(){return z(this.jb)?0:this.jb.zoomMin};r.xb=function(){return z(this.jb)?18:this.jb.zoomMax};r.hc=q(256);function Jj(a,b,c){for(var d="",f=1;f<=a;f++)d+=(c>>a-f&1)<<1|b>>a-f&1;return d}r.Re=function(a,b,c){return z(this.jb)?"":this.jb.imageUrl.replace("{subdomain}",this.jb.imageUrlSubdomains[Ac(this.jb.imageUrlSubdomains.length)]).replace("{quadkey}",Jj(a,b,c))};r.ge=function(a,b,c){return z(this.jb)?!1:Ij.b.ge.call(this,a,b,c)};r.md=function(a){z(this.ie)||td(a,this.ie.copyright)};
r.Pe=function(){return!z(this.ie)?this.ie.brandLogoUri:n};r.ie=n;r.jb=n;function Kj(a,b){this.e=a;this.w=new qf(20);this.kh=this.jh=0.1;this.ng=!1;this.Fc=new W("");this.Fc.tf|=255;this.Xi=R(this.Fc,"activate",this.Gk,!1,this);this.uj=R(this.Fc,"deactivate",this.Hk,!1,this);this.Cl=R(this.Fc,"enter",this.Ik,!1,this);this.dh=R(this.w,sf,this.Dd,!1,this);this.wk=R(P(this.e.a.canvas),"mousemove",this.Jg,!1,this);this.vk=R(P(this.e.a.canvas),"mousedown",function(){this.ng=!0},!1,this);this.xk=R(P(this.e.a.canvas),"mouseup",function(){this.ng=!1},!1,this);this.Fc.Tb(b)}
F(Kj,Ha);r=Kj.prototype;r.Ik=function(){this.ng&&(this.Fc.Ja(4,!0),this.w.start())};r.Gk=function(){this.w.start()};r.Hk=function(){this.w&&this.w.stop()};r.Dd=function(){this.nf(this.jh,this.kh)};r.Jg=function(a){this.jh=-(a.offsetX-a.target.offsetWidth/2)*2;this.kh=-(a.offsetY-a.target.offsetHeight/2)};r.h=function(){S(this.Xi);S(this.wk);S(this.xk);S(this.vk);S(this.uj);S(this.dh);this.Fc.j()};
r.nf=function(a,b){var c=Math.PI*(1/this.e.a.canvas.height)*(this.e.ue/Math.pow(2,this.e.c.getZoom()));Eh(this.e.c,b*c,-2*a*c)};function Lj(a){return 1-Math.pow(1-a,3)};function Mj(a,b){this.e=a;this.Qa=!1;this.Ub=i;this.hf=this.gf=this.Sb=this.Rb=this.Bi=0;this.Sc=this.ta=n;R(this.e.a.canvas,"mousedown",D(this.Mk,this));R(P(this.e.a.canvas),"mouseup",D(this.Nk,this));this.Qd=b||n}r=Mj.prototype;
r.Mk=function(a){if(!Xd(a,2)&&!a.ctrlKey&&!a.altKey){t(this.Qd)&&this.Qd.cancel();if(this.Sc)this.Sc.stop(!1),this.Sc.j(),this.Sc=n;this.Qa=!0;this.gf=this.Rb=a.screenX;this.hf=this.Sb=a.screenY;if(Xd(a,1)||Xd(a,0)&&a.shiftKey)if(this.Ub=this.e.c.wd(),t(this.Ub)){if(window.Td)window.Td.lat=Cc(this.Ub[0]),window.Td.yg=Cc(this.Ub[1]),window.Td.enable(!0);this.Bi=this.e.c.getTilt()==0?this.e.c.ka:Math.sin(Math.PI-this.e.c.getTilt()-(Math.PI-Math.asin((1+this.e.c.ka/6378137)*Math.sin(this.e.c.getTilt()))))/
Math.sin(this.e.c.getTilt())*6378137}if(!z(this.ta))S(this.ta),this.ta=n;this.ta=R(P(this.e.a.canvas),"mousemove",D(this.Jg,this));a.preventDefault()}};
r.Nk=function(a){if(this.Qa){a.preventDefault();this.Ub=i;window.Td&&window.Td.enable(!1);this.Qa=!1;if(!z(this.ta))S(this.ta),this.ta=n;if(Xd(a,0)){var b=a.screenX-this.gf,c=a.screenY-this.hf,a=Math.sqrt(Math.pow(b,2)+Math.pow(c,2));b/=a;c/=a;this.Rb==this.gf&&this.Sb==this.hf&&(a*=2);if(a>6)a=Math.max(15,a)*6,this.Sc=new tf([this.Rb,this.Sb],[this.Rb+a*b,this.Sb+a*c],1300,Lj),R(this.Sc,["animate"],this.Wj,!1,this),this.Sc.play(!1)}}};
r.nf=function(a,b){if(w(this.Ub)){var c=a/this.e.a.canvas.width*Math.PI*-2,d=b/this.e.a.canvas.height*Math.PI/2;if(z(this.Ub))this.e.c.setHeading(this.e.c.getHeading()+c),this.e.c.setTilt(this.e.c.getTilt()+d);else{var f=this.e.c,g=this.Ub[0],h=this.Ub[1],j=this.Bi;f.zd+=c;c=Math.asin(6378137/Math.sqrt(j*j+40680631590769));f.Yb=N(f.Yb+d,-c,c);d=Math.asin(j/6378137*Math.sin(f.Yb));Math.abs(f.Yb)<1.0E-4?Fh(f,j):Fh(f,(Math.sin(Math.PI-f.Yb-d)/Math.sin(f.Yb)-1)*6378137);g-=Math.cos(f.zd)*d;f.setPosition(g,
h+Math.sin(f.zd)*d/Math.cos(g))}}else f=Math.PI*(1/this.e.a.canvas.height)*(this.e.ue/Math.pow(2,this.e.c.getZoom())),Eh(this.e.c,b*f,-2*a*f)};r.Jg=function(a){this.nf(a.screenX-this.Rb,a.screenY-this.Sb);this.gf=this.Rb;this.hf=this.Sb;this.Rb=a.screenX;this.Sb=a.screenY;a.preventDefault()};r.Wj=function(a){this.nf(a.x-this.Rb,a.y-this.Sb);this.Rb=a.x;this.Sb=a.y};function Nj(a,b){this.e=a;this.f=b;this.Ag=new Ub}function Oj(a,b,c){b=b||Ea();c.Sd(a.f);a.Ag.set(b,c)}
Nj.prototype.pl=function(a){a=this.Ag.get(a);if(a.isEnabled()){var b;a:{var c=this.e;b=a.lat;var d=a.yg;b=O(b);var d=O(d),f=Math.cos(b),f=new gi(Math.sin(d)*f,Math.sin(b),Math.cos(d)*f),d=c.a.df.multiply(new X([[f.x],[f.y],[f.H],[1]]));if(Y(d,3,0)==0)b=n;else{d=d.multiply(1/Y(d,3,0));b=(Y(d,0,0)+1)/2*c.a.ob;var d=(Y(d,1,0)-1)/-2*c.a.nb,g=1;if(b<0||b>c.a.ob||d<0||d>c.a.nb)g=0;else{c=hi(0.5,0.5,0,c.a.ef,1,1);if(z(c)){b=n;break a}var g=f.x-c.x,h=f.y-c.y,j=f.H-c.H,g=Math.sqrt(g*g+h*h+j*j),f=f.bh(c).normalize(),
f=Ni(c,f),g=z(f)?0:Math.abs(g-f[0])<Math.abs(g-f[1])?1:0}b=[b,d,g]}}t(b)?(d=b[1],a.element.style.left=b[0].toFixed()+"px",a.element.style.top=d.toFixed()+"px",a.enabled&&a.show(!0),a.show(b[2]>0)):a.show(!1)}};function Pj(a){this.e=a;this.oc=new Yi(a.a.canvas);this.ta=R(this.oc,"mousewheel",function(a){this.Da(-(a.gc==0?0:a.gc<0?-1:1));a.preventDefault()},!1,this);this.tj=R(a.a.canvas,"dblclick",D(function(a){Fh(this.c,this.c.ka/2);var c=Ih(this,a.offsetX,a.offsetY,!0)||this.c.wd(this);if(c){var d=(this.c.Ob+c[1])/2;Math.abs(this.c.Ob-c[1])>Math.PI&&(d+=Math.PI);this.c.setPosition((this.c.zb+c[0])/2,d)}a.preventDefault()},a));this.al=R(a.a.canvas,"mouseup",D(function(a){if(Xd(a,2)){Fh(this.c,this.c.ka*
2);var c=Ih(this,a.offsetX,a.offsetY,!0)||this.c.wd(this);c&&this.c.setPosition(2*this.c.zb-c[0],2*this.c.Ob-c[1]);a.preventDefault()}},a));this.Dk=R(a.a.canvas,"contextmenu",function(a){a.preventDefault()});this.F=n;this.dd=this.cd=0}F(Pj,Ha);
Pj.prototype.Da=function(a){var b=120;a*=-1;if(this.F)if(this.dd>this.cd==a>0)return;else this.F.j(),this.F=n,b*=(this.e.c.ka-this.cd)/(this.dd-this.cd),a=this.dd,this.dd=this.cd,this.cd=a;else this.cd=this.e.c.ka,this.dd=N(this.cd*Math.pow(2,a),250,1E7);if(!(isNaN(b)||b<=0)){var a=this.e.c.getPosition(),c=this.e.c.wd()||a,d=this.dd/this.e.c.ka;a.push(this.e.c.ka);this.F=new tf(a,[c[0]+d*(a[0]-c[0]),c[1]+d*(a[1]-c[1]),this.dd],b);R(this.F,["animate","finish"],function(a){this.e.c.setPosition(a.x,
a.y);Fh(this.e.c,a.H)},!1,this);R(this.F,["finish"],this.Aj,!1,this);this.F.play(!1)}};Pj.prototype.Aj=function(){if(this.F)this.F.j(),this.F=n};Pj.prototype.h=function(){S(this.ta);S(this.tj);S(this.al);S(this.Dk);this.oc.j();this.F.j()};function Qj(a,b){var c=Q("div",{style:"position:absolute;width:16px;height:32px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBoZWlnaHQ9IjMyIiB3aWR0aD0iMTYiIHZlcnNpb249IjEuMSI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwtMTAyMC4zNjIyKSI+PHBhdGggc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgZD0ibTE1LDcuODdjMCwzLjQ3LTIuNzcsNi4yOC02LjE5LDYuMjhzLTYuMTktMi44MS02LjE5LTYuMjgsMi43Ny02LjI4LDYuMTktNi4yOCw2LjE5LDIuODEsNi4xOSw2LjI4em0tNi4xNiwyMy4ydi0xNi41IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjcwNzEwNjc4LDEwMjAuNzE1OCkiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2Utd2lkdGg9IjFweCIgZmlsbD0iI2UxMzUxZSIvPjwvZz48L3N2Zz4=);margin:-32px 0 0 -8px;opacity:0.8;"});
zj.call(this,a,b,c);this.show(!1)}F(Qj,zj);function Rj(a,b,c,d,f,g,h,j){var k,l=c.offsetParent;if(l){var o=l.tagName=="HTML"||l.tagName=="BODY";if(!o||Ve(l,"position")!="static")k=bf(l),o||(k=Na(k,new G(l.scrollLeft,l.scrollTop)))}l=hf(a);(o=af(a))&&l.Wh(new Se(o.left,o.top,o.right-o.left,o.bottom-o.top));var o=jd(a),m=jd(c);if(o.B!=m.B){var x=o.B.body,m=m.B.parentWindow||m.B.defaultView,v=new G(0,0),Z=P(x)?P(x).parentWindow||P(x).defaultView:window,Yd=x;do{var Vi=Z==m?bf(Yd):df(Yd);v.x+=Vi.x;v.y+=Vi.y}while(Z&&Z!=m&&(Yd=Z.frameElement)&&
(Z=Z.parent));x=Na(v,bf(x));H&&!Fd(o)&&(x=Na(x,Gd(o)));l.left+=x.x;l.top+=x.y}a=(b&4&&cf(a)?b^2:b)&-5;b=new G(a&2?l.left+l.width:l.left,a&1?l.top+l.height:l.top);k&&(b=Na(b,k));f&&(b.x+=(a&2?-1:1)*f.x,b.y+=(a&1?-1:1)*f.y);var y;if(h&&(y=af(c))&&k)y.top-=k.y,y.right-=k.x,y.bottom-=k.y,y.left-=k.x;a:{k=b.ga();f=0;a=(d&4&&cf(c)?d^2:d)&-5;d=ff(c);j=j?j.ga():d.ga();if(g||a!=0)a&2?k.x-=j.width+(g?g.right:0):g&&(k.x+=g.left),a&1?k.y-=j.height+(g?g.bottom:0):g&&(k.y+=g.top);if(h){if(y){g=k;f=0;if((h&65)==
65&&(g.x<y.left||g.x>=y.right))h&=-2;if((h&132)==132&&(g.y<y.top||g.y>=y.bottom))h&=-5;if(g.x<y.left&&h&1)g.x=y.left,f|=1;g.x<y.left&&g.x+j.width>y.right&&h&16&&(j.width-=g.x+j.width-y.right,f|=4);if(g.x+j.width>y.right&&h&1)g.x=Math.max(y.right-j.width,y.left),f|=1;h&2&&(f|=(g.x<y.left?16:0)|(g.x+j.width>y.right?32:0));if(g.y<y.top&&h&4)g.y=y.top,f|=2;g.y>=y.top&&g.y+j.height>y.bottom&&h&32&&(j.height-=g.y+j.height-y.bottom,f|=8);if(g.y+j.height>y.bottom&&h&4)g.y=Math.max(y.bottom-j.height,y.top),
f|=2;h&8&&(f|=(g.y<y.top?64:0)|(g.y+j.height>y.bottom?128:0));h=f}else h=256;f=h;if(f&496){c=f;break a}}We(c,k);if(!gd(d,j))g=Fd(jd(P(c))),H&&(!g||!K("8"))?(h=c.style,g?(H?(g=mf(c,Ue(c,"paddingLeft")),d=mf(c,Ue(c,"paddingRight")),k=mf(c,Ue(c,"paddingTop")),y=mf(c,Ue(c,"paddingBottom")),g=new Oa(k,d,y,g)):(g=Te(c,"paddingLeft"),d=Te(c,"paddingRight"),k=Te(c,"paddingTop"),y=Te(c,"paddingBottom"),g=new Oa(parseFloat(k),parseFloat(d),parseFloat(y),parseFloat(g))),c=pf(c),h.pixelWidth=j.width-c.left-g.left-
g.right-c.right,h.pixelHeight=j.height-c.top-g.top-g.bottom-c.bottom):(h.pixelWidth=j.width,h.pixelHeight=j.height)):(c=c.style,I?c.MozBoxSizing="border-box":J?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=j.width+"px",c.height=j.height+"px");c=f}return c};function Sj(){}Sj.prototype.me=aa();function Tj(a,b){this.element=a;this.Of=b}F(Tj,Sj);Tj.prototype.me=function(a,b,c){Rj(this.element,this.Of,a,b,i,c)};function Uj(a,b,c){Tj.call(this,a,b);this.$i=c}F(Uj,Tj);Uj.prototype.Gh=q(5);Uj.prototype.me=function(a,b,c,d){var f=Rj(this.element,this.Of,a,b,n,c,10,d);if(f&496){var g=Vj(f,this.Of),b=Vj(f,b),f=Rj(this.element,g,a,b,n,c,10,d);f&496&&(g=Vj(f,g),b=Vj(f,b),this.$i?Rj(this.element,g,a,b,n,c,this.Gh(),d):Rj(this.element,g,a,b,n,c,0,d))}};function Vj(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Wj(a,b,c,d){Uj.call(this,a,b,c||d);this.Zk=d}F(Wj,Uj);Wj.prototype.Gh=function(){return 65|(this.Zk?32:132)};function Xj(){}F(Xj,Hg);ea(Xj);Xj.prototype.t=function(a){return a.$().t("div",this.p())};Xj.prototype.la=function(a,b){if(b.tagName=="HR"){var c=b,b=this.t(a);c.parentNode&&c.parentNode.insertBefore(b,c);vd(c)}else dd(b,this.p());return b};Xj.prototype.setContent=aa();Xj.prototype.p=q("goog-menuseparator");function Yj(a,b){W.call(this,n,a||Xj.Ha(),b);Tg(this,1,!1);Tg(this,2,!1);Tg(this,4,!1);Tg(this,32,!1);this.s=1}F(Yj,W);Yj.prototype.ha=function(){Yj.b.ha.call(this);Lf(this.d(),"separator")};Mg("goog-menuseparator",function(){return new Yj});function Zj(){}ea(Zj);r=Zj.prototype;r.vb=aa();function $j(a,b){if(a)a.tabIndex=b?0:-1}r.t=function(a){return a.$().t("div",this.vd(a).join(" "))};r.Z=function(a){return a};r.ab=function(a){return a.tagName=="DIV"};r.la=function(a,b){b.id&&yg(a,b.id);var c=this.p(),d=!1,f=cd(b);f&&M(f,function(b){b==c?d=!0:b&&(b==c+"-disabled"?a.Wb(!1):b==c+"-horizontal"?a.qf(ak):b==c+"-vertical"&&a.qf(bk))},this);d||dd(b,c);ck(this,a,this.Z(b));return b};
function ck(a,b,c){if(c)for(var d=c.firstChild,f;d&&d.parentNode==c;){f=d.nextSibling;if(d.nodeType==1){var g=a.Zf(d);if(g)g.f=d,b.isEnabled()||g.Wb(!1),b.Nd(g),g.la(d)}else(!d.nodeValue||ua(d.nodeValue)=="")&&c.removeChild(d);d=f}}r.Zf=function(a){a:{for(var b=cd(a),c=0,d=b.length;c<d;c++)if(a=b[c]in Ng?Ng[b[c]]():n)break a;a=n}return a};r.Ad=function(a){a=a.d();lf(a,!0,I);if(H)a.hideFocus=!0;var b=this.vb();b&&Lf(a,b)};r.aa=function(a){return a.d()};r.p=q("goog-container");
r.vd=function(a){var b=this.p(),c=[b,a.Q==ak?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};function dk(){}F(dk,Zj);ea(dk);r=dk.prototype;r.vb=q("menu");r.ab=function(a){return a.tagName=="UL"||dk.b.ab.call(this,a)};r.Zf=function(a){return a.tagName=="HR"?new Yj:dk.b.Zf.call(this,a)};r.Dc=function(a,b){return xd(a.d(),b)};r.p=q("goog-menu");r.Ad=function(a){dk.b.Ad.call(this,a);V(a.d(),"haspopup","true")};Mg("goog-menuseparator",function(){return new Yj});function ek(){this.th=[]}F(ek,Hg);ea(ek);function fk(a,b){var c=a.th[b];if(!c){switch(b){case 0:c=a.p()+"-highlight";break;case 1:c=a.p()+"-checkbox";break;case 2:c=a.p()+"-content"}a.th[b]=c}return c}r=ek.prototype;r.vb=q("menuitem");r.t=function(a){var b=a.$().t("div",this.vd(a).join(" "),gk(this,a.getContent(),a.$()));hk(this,a,b,!!(a.U&8)||!!(a.U&16));return b};r.Z=function(a){return a&&a.firstChild};
r.la=function(a,b){var c=wd(b),d=fk(this,2);c&&c.className.indexOf(d)!=-1||b.appendChild(gk(this,b.childNodes,a.$()));Bb(cd(b),"goog-option")&&(a.pf(!0),this.pf(a,b,!0));return ek.b.la.call(this,a,b)};r.setContent=function(a,b){var c=this.Z(a),d=ik(this,a)?c.firstChild:n;ek.b.setContent.call(this,a,b);d&&!ik(this,a)&&c.insertBefore(d,c.firstChild||n)};function gk(a,b,c){a=fk(a,2);return c.t("div",a,b)}r.pf=function(a,b,c){b&&(Lf(b,c?"menuitemcheckbox":this.vb()),hk(this,a,b,c))};
function ik(a,b){var c=a.Z(b);if(c){var c=c.firstChild,d=fk(a,1);return!!c&&!!c.className&&c.className.indexOf(d)!=-1}return!1}function hk(a,b,c,d){d!=ik(a,c)&&(d?dd(c,"goog-option"):ed(c,"goog-option"),c=a.Z(c),d?(a=fk(a,1),c.insertBefore(b.$().t("div",a),c.firstChild||n)):c.removeChild(c.firstChild))}r.Wd=function(a){switch(a){case 2:return fk(this,0);case 16:case 8:return"goog-option-selected";default:return ek.b.Wd.call(this,a)}};
r.ag=function(a){var b=fk(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return ek.b.ag.call(this,a)}};r.p=q("goog-menuitem");function jk(a,b,c,d){W.call(this,a,d||ek.Ha(),c);this.Y(b)}F(jk,W);r=jk.prototype;r.o=function(){var a=this.Bg;return a!=n?a:this.ud()};r.Y=ba("Bg");r.pf=function(a){Tg(this,16,a);var b=this.d();b&&this.k.pf(this,b,a)};r.ud=function(){var a=this.getContent();return A(a)?(a=yb(a,function(a){return Bb(cd(a),"goog-menuitem-accel")?"":Cd(a)}).join(""),ta(a)):jk.b.ud.call(this)};
r.Pc=function(a){var b=this.getParent();if(b){var c=b.ri;b.ri=n;if(b=c&&ga(a.clientX))b=new G(a.clientX,a.clientY),b=c==b?!0:!c||!b?!1:c.x==b.x&&c.y==b.y;if(b)return}jk.b.Pc.call(this,a)};Mg("goog-menuitem",function(){return new jk(n)});function kk(a,b,c){ug.call(this,c);this.k=b||Zj.Ha();this.Q=a||bk}F(kk,ug);var ak="horizontal",bk="vertical";r=kk.prototype;r.rg=n;r.M=n;r.k=n;r.Q=n;r.V=!0;r.ma=!0;r.Vf=!0;r.na=-1;r.da=n;r.Pb=!1;r.aj=!1;r.Qk=!0;r.Fb=n;r.aa=function(){return this.rg||this.k.aa(this)};r.Oe=function(){return this.M||(this.M=new cg(this.aa()))};r.t=function(){this.f=this.k.t(this)};r.Z=function(){return this.k.Z(this.d())};r.ab=function(a){return this.k.ab(a)};
r.tb=function(a){this.f=this.k.la(this,a);if(a.style.display=="none")this.V=!1};r.ha=function(){kk.b.ha.call(this);Cg(this,function(a){a.I&&lk(this,a)},this);var a=this.d();this.k.Ad(this);this.setVisible(this.V,!0);this.ya().i(this,"enter",this.bg).i(this,"highlight",this.cg).i(this,"unhighlight",this.ig).i(this,"open",this.Qj).i(this,"close",this.Ij).i(a,"mousedown",this.Oc).i(P(a),"mouseup",this.Kj).i(a,["mousedown","mouseup","mouseover","mouseout"],this.Hj);this.kc()&&mk(this,!0)};
function mk(a,b){var c=a.ya(),d=a.aa();b?c.i(d,"focus",a.Nc).i(d,"blur",a.Mb).i(a.Oe(),"key",a.cb):c.fa(d,"focus",a.Nc).fa(d,"blur",a.Mb).fa(a.Oe(),"key",a.cb)}r.Ra=function(){nk(this,-1);this.da&&this.da.T(!1);this.Pb=!1;kk.b.Ra.call(this)};r.h=function(){kk.b.h.call(this);if(this.M)this.M.j(),this.M=n;this.k=this.da=this.Fb=this.rg=n};r.bg=q(!0);
r.cg=function(a){var b=Gg(this,a.target);if(b>-1&&b!=this.na){var c=Eg(this,this.na);c&&c.Cb(!1);this.na=b;c=Eg(this,this.na);this.Pb&&c.setActive(!0);this.Qk&&this.da&&c!=this.da&&(c.U&64?c.T(!0):this.da.T(!1))}V(this.d(),"activedescendant",a.target.d().id)};r.ig=function(a){if(a.target==Eg(this,this.na))this.na=-1;V(this.d(),"activedescendant","")};r.Qj=function(a){if((a=a.target)&&a!=this.da&&a.getParent()==this)this.da&&this.da.T(!1),this.da=a};r.Ij=function(a){if(a.target==this.da)this.da=n};
r.Oc=function(a){if(this.ma)this.Pb=!0;var b=this.aa();b&&Bd(b)?b.focus():a.preventDefault()};r.Kj=function(){this.Pb=!1};r.Hj=function(a){var b;a:{b=a.target;if(this.Fb)for(var c=this.d();b&&b!==c;){var d=b.id;if(d in this.Fb){b=this.Fb[d];break a}b=b.parentNode}b=n}if(b)switch(a.type){case "mousedown":b.Oc(a);break;case "mouseup":b.Pc(a);break;case "mouseover":b.hg(a);break;case "mouseout":b.gg(a)}};r.Nc=aa();r.Mb=function(){nk(this,-1);this.Pb=!1;this.da&&this.da.T(!1)};
r.cb=function(a){return this.isEnabled()&&this.ba()&&(Dg(this)!=0||this.rg)&&this.yd(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
r.yd=function(a){var b=Eg(this,this.na);if(b&&typeof b.cb=="function"&&b.cb(a))return!0;if(this.da&&this.da!=b&&typeof this.da.cb=="function"&&this.da.cb(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case 27:if(this.kc())this.aa().blur();else return!1;break;case 36:ok(this);break;case 35:pk(this);break;case 38:if(this.Q==bk)qk(this);else return!1;break;case 37:if(this.Q==ak)Fg(this)?rk(this):qk(this);else return!1;break;case 40:if(this.Q==bk)rk(this);else return!1;
break;case 39:if(this.Q==ak)Fg(this)?qk(this):rk(this);else return!1;break;default:return!1}return!0};function lk(a,b){var c=b.d(),c=c.id||(c.id=xg(b));if(!a.Fb)a.Fb={};a.Fb[c]=b}r.Nd=function(a,b){kk.b.Nd.call(this,a,b)};r.Od=function(a,b,c){a.tf|=2;a.tf|=64;(this.kc()||!this.aj)&&Tg(a,32,!1);Pg(a,!1);kk.b.Od.call(this,a,b,c);c&&this.I&&lk(this,a);b<=this.na&&this.na++};
r.removeChild=function(a,b){if(a=C(a)?Ag(this,a):a){var c=Gg(this,a);c!=-1&&(c==this.na?a.Cb(!1):c<this.na&&this.na--);var d=a.d();if(d&&d.id&&this.Fb)c=this.Fb,d=d.id,d in c&&delete c[d]}a=kk.b.removeChild.call(this,a,b);Pg(a,!0);return a};r.qf=function(a){this.d()&&e(Error("Component already rendered"));this.Q=a};r.ba=p("V");
r.setVisible=function(a,b){if(b||this.V!=a&&this.dispatchEvent(a?"show":"hide")){this.V=a;var c=this.d();c&&(jf(c,a),this.kc()&&$j(this.aa(),this.ma&&this.V),b||this.dispatchEvent(this.V?"aftershow":"afterhide"));return!0}return!1};r.isEnabled=p("ma");r.Wb=function(a){if(this.ma!=a&&this.dispatchEvent(a?"enable":"disable"))a?(this.ma=!0,Cg(this,function(a){a.Vi?delete a.Vi:a.Wb(!0)})):(Cg(this,function(a){a.isEnabled()?a.Wb(!1):a.Vi=!0}),this.Pb=this.ma=!1),this.kc()&&$j(this.aa(),a&&this.V)};
r.kc=p("Vf");r.uc=function(a){a!=this.Vf&&this.I&&mk(this,a);this.Vf=a;this.ma&&this.V&&$j(this.aa(),a)};function nk(a,b){var c=Eg(a,b);c?c.Cb(!0):a.na>-1&&Eg(a,a.na).Cb(!1)}r.Cb=function(a){nk(this,Gg(this,a))};function ok(a){sk(a,function(a,c){return(a+1)%c},Dg(a)-1)}function pk(a){sk(a,function(a,c){a--;return a<0?c-1:a},0)}function rk(a){sk(a,function(a,c){return(a+1)%c},a.na)}function qk(a){sk(a,function(a,c){a--;return a<0?c-1:a},a.na)}
function sk(a,b,c){for(var c=c<0?Gg(a,a.da):c,d=Dg(a),c=b.call(a,c,d),f=0;f<=d;){var g=Eg(a,c);if(g&&a.sh(g)){nk(a,c);break}f++;c=b.call(a,c,d)}}r.sh=function(a){return a.ba()&&a.isEnabled()&&!!(a.U&2)};function tk(){}F(tk,Hg);ea(tk);tk.prototype.p=q("goog-menuheader");function uk(a,b,c){W.call(this,a,c||tk.Ha(),b);Tg(this,1,!1);Tg(this,2,!1);Tg(this,4,!1);Tg(this,32,!1);this.s=1}F(uk,W);Mg("goog-menuheader",function(){return new uk(n)});function vk(a,b){kk.call(this,bk,b||dk.Ha(),a);this.uc(!1)}F(vk,kk);r=vk.prototype;r.Ef=!0;r.bj=!1;r.p=function(){return this.k.p()};r.Dc=function(a){if(this.k.Dc(this,a))return!0;for(var b=0,c=Dg(this);b<c;b++){var d=Eg(this,b);if(typeof d.Dc=="function"&&d.Dc(a))return!0}return!1};r.ac=function(a){this.Nd(a,!0)};r.ld=function(a,b){this.Od(a,b,!0)};r.Xd=function(a){return Eg(this,a)};r.Ne=function(){return Dg(this)};
r.setPosition=function(a,b){var c=this.ba();c||jf(this.d(),!0);ef(this.d(),a,b);c||jf(this.d(),!1)};r.getPosition=function(){return this.ba()?bf(this.d()):n};r.setVisible=function(a,b,c){(b=vk.b.setVisible.call(this,a,b))&&a&&this.I&&this.Ef&&this.aa().focus();this.ri=a&&c&&ga(c.clientX)?new G(c.clientX,c.clientY):n;return b};r.bg=function(a){this.Ef&&this.aa().focus();return vk.b.bg.call(this,a)};r.sh=function(a){return(this.bj||a.isEnabled())&&a.ba()&&!!(a.U&2)};
r.tb=function(a){var b=this.k,c;c=this.$();c=md(c.B,"div",b.p()+"-content",a);for(var d,f=0;d=c[f];f++)ck(b,this,d);vk.b.tb.call(this,a)};function wk(){}F(wk,Zg);ea(wk);if(I)wk.prototype.setContent=function(a,b){var c=wk.b.Z.call(this,a&&a.firstChild);if(c){var d=this.createCaption(b,jd(a)),f=c.parentNode;f&&f.replaceChild(d,c)}};r=wk.prototype;r.Z=function(a){a=wk.b.Z.call(this,a&&a.firstChild);if(I&&a&&a.__goog_wrapper_div)a=a.firstChild;return a};r.la=function(a,b){var c=md(document,"*","goog-menu",b)[0];if(c){jf(c,!1);P(c).body.appendChild(c);var d=new vk;d.la(c);a.se(d)}return wk.b.la.call(this,a,b)};
r.Ge=function(a,b){return wk.b.Ge.call(this,[this.createCaption(a,b),b.t("div","goog-inline-block "+(this.p()+"-dropdown"),"\u00a0")],b)};r.createCaption=function(a,b){return b.t("div","goog-inline-block "+(this.p()+"-caption"),a)};r.p=q("goog-menu-button");function xk(a,b,c,d){Yg.call(this,a,c||wk.Ha(),d);Tg(this,64,!0);b&&this.se(b);this.w=new qf(500);if((Zf||$f)&&!K("533.17.9"))this.Xe=!0}F(xk,Yg);r=xk.prototype;r.nh=!0;r.Rg=!1;r.Xe=!1;r.Xk=!1;r.ha=function(){xk.b.ha.call(this);this.l&&yk(this,this.l,!0);V(this.d(),"haspopup","true")};r.Ra=function(){xk.b.Ra.call(this);if(this.l){this.T(!1);this.l.Ra();yk(this,this.l,!1);var a=this.l.d();a&&vd(a)}};r.h=function(){xk.b.h.call(this);this.l&&(this.l.j(),delete this.l);delete this.Vk;this.w.j()};
r.Oc=function(a){xk.b.Oc.call(this,a);if(this.ae()&&(this.T(!this.Ta(),a),this.l))this.l.Pb=this.Ta()};r.Pc=function(a){xk.b.Pc.call(this,a);if(this.l&&!this.ae())this.l.Pb=!1};r.Ed=function(){this.setActive(!1);return!0};r.Jj=function(a){this.l&&this.l.ba()&&!this.Dc(a.target)&&this.T(!1)};r.Dc=function(a){return a&&xd(this.d(),a)||this.l&&this.l.Dc(a)||!1};
r.yd=function(a){if(a.keyCode==32){if(a.preventDefault(),a.type!="keyup")return!1}else if(a.type!="key")return!1;if(this.l&&this.l.ba()){var b=this.l.cb(a);return a.keyCode==27?(this.T(!1),!0):b}return a.keyCode==40||a.keyCode==38||a.keyCode==32?(this.T(!0),!0):!1};r.eg=function(){this.T(!1)};r.Nj=function(){this.ae()||this.T(!1)};r.Mb=function(a){this.Xe||this.T(!1);xk.b.Mb.call(this,a)};function zk(a){a.l||a.se(new vk(a.$()));return a.l||n}
r.se=function(a){var b=this.l;if(a!=b&&(b&&(this.T(!1),this.I&&yk(this,b,!1),delete this.l),a)){this.l=a;zg(a,this);a.setVisible(!1);var c=this.Xe;(a.Ef=c)&&a.uc(!0);this.I&&yk(this,a,!0)}return b};r.ac=function(a){zk(this).Nd(a,!0)};r.ld=function(a,b){zk(this).Od(a,b,!0)};r.Xd=function(a){return this.l?Eg(this.l,a):n};r.Ne=function(){return this.l?Dg(this.l):0};r.setVisible=function(a,b){var c=xk.b.setVisible.call(this,a,b);c&&!this.ba()&&this.T(!1);return c};
r.Wb=function(a){xk.b.Wb.call(this,a);this.isEnabled()||this.T(!1)};
r.T=function(a,b){xk.b.T.call(this,a);if(this.l&&!!(this.s&64)==a){if(a)this.l.I||(this.Xk?this.l.Tb(this.d().parentNode):this.l.Tb()),this.kd=af(this.d()),this.Cc=hf(this.d()),Ak(this),nk(this.l,-1);else if(this.setActive(!1),this.l.Pb=!1,this.d()&&V(this.d(),"activedescendant",""),t(this.jf)){this.jf=i;var c=this.l.d();if(c){var d="",f;d instanceof fd?(f=d.height,d=d.width):f="";c.style.width=Xe(d,!0);c.style.height=Xe(f,!0)}}this.l.setVisible(a,!1,b);this.Je||(c=this.ya(),d=a?c.i:c.fa,d.call(c,
Ed(this.$()),"mousedown",this.Jj,!0),this.Xe&&d.call(c,this.l,"blur",this.Nj),d.call(c,this.w,sf,this.Dd),a?this.w.start():this.w.stop())}};function Ak(a){if(a.l.I){var b=new Wj(a.Vk||a.d(),a.nh?5:7,!a.Rg,a.Rg),c=a.l.d();if(!a.l.ba())c.style.visibility="hidden",jf(c,!0);if(!a.jf&&a.Rg)a.jf=ff(c);b.me(c,a.nh?4:6,n,a.jf);if(!a.l.ba())jf(c,!1),c.style.visibility="visible"}}
r.Dd=function(){var a=hf(this.d()),b=af(this.d());if(!(this.Cc==a||(!this.Cc||!a?0:this.Cc.left==a.left&&this.Cc.width==a.width&&this.Cc.top==a.top&&this.Cc.height==a.height))||!(this.kd==b||(!this.kd||!b?0:this.kd.top==b.top&&this.kd.right==b.right&&this.kd.bottom==b.bottom&&this.kd.left==b.left)))this.Cc=a,this.kd=b,Ak(this)};function yk(a,b,c){var d=a.ya(),c=c?d.i:d.fa;c.call(d,b,"action",a.eg);c.call(d,b,"highlight",a.cg);c.call(d,b,"unhighlight",a.ig)}
r.cg=function(a){V(this.d(),"activedescendant",a.target.d().id)};r.ig=function(){Eg(this.l,this.l.na)||V(this.d(),"activedescendant","")};Mg("goog-menu-button",function(){return new xk(n)});function Bk(a){this.Tc=[];Ck(this,a)}F(Bk,T);r=Bk.prototype;r.sc=n;r.tc=n;r.Ne=function(){return this.Tc.length};r.Xd=function(a){return this.Tc[a]||n};function Ck(a,b){b&&(M(b,function(a){Dk(this,a,!1)},a),Fb(a.Tc,b))}r.ac=function(a){this.ld(a,this.Ne())};r.ld=function(a,b){a&&(Dk(this,a,!1),Gb(this.Tc,b,0,a))};r.Qe=p("sc");r.vc=function(a){if(a!=this.sc)Dk(this,this.sc,!1),this.sc=a,Dk(this,a,!0);this.dispatchEvent("select")};r.$f=function(){return this.sc?wb(this.Tc,this.sc):-1};r.Fi=function(a){this.vc(this.Xd(a))};
r.clear=function(){var a=this.Tc;if(!A(a))for(var b=a.length-1;b>=0;b--)delete a[b];a.length=0;this.sc=n};r.h=function(){Bk.b.h.call(this);delete this.Tc;this.sc=n};function Dk(a,b,c){b&&(typeof a.tc=="function"?a.tc(b,c):typeof b.Vg=="function"&&b.Vg(c))};function Ek(a,b,c,d){xk.call(this,a,b,c,d);this.Ie=a;Fk(this);this.lf="listbox"}F(Ek,xk);r=Ek.prototype;r.K=n;r.Ie=n;r.ha=function(){Ek.b.ha.call(this);Fk(this);Gk(this);V(this.d(),"haspopup","false")};r.tb=function(a){Ek.b.tb.call(this,a);(a=this.ud())?(this.Ie=a,Fk(this)):this.Fi(0)};r.h=function(){Ek.b.h.call(this);if(this.K)this.K.j(),this.K=n;this.Ie=n};r.eg=function(a){this.vc(a.target);Ek.b.eg.call(this,a);a.stopPropagation();this.dispatchEvent("action")};
r.Sj=function(){var a=this.Qe();Ek.b.Y.call(this,a&&a.o());Fk(this)};r.se=function(a){var b=Ek.b.se.call(this,a);a!=b&&(this.K&&this.K.clear(),a&&(this.K?Cg(a,function(a){Hk(a);this.K.ac(a)},this):Ik(this,a)));return b};r.ac=function(a){Hk(a);Ek.b.ac.call(this,a);this.K?this.K.ac(a):Ik(this,zk(this))};r.ld=function(a,b){Hk(a);Ek.b.ld.call(this,a,b);this.K?this.K.ld(a,b):Ik(this,zk(this))};r.vc=function(a){this.K&&this.K.vc(a)};r.Fi=function(a){this.K&&this.vc(this.K.Xd(a))};
r.Y=function(a){if(t(a)&&this.K)for(var b=0,c;c=this.K.Xd(b);b++)if(c&&typeof c.o=="function"&&c.o()==a){this.vc(c);return}this.vc(n)};r.Qe=function(){return this.K?this.K.Qe():n};r.$f=function(){return this.K?this.K.$f():-1};function Ik(a,b){a.K=new Bk;b&&Cg(b,function(a){Hk(a);this.K.ac(a)},a);Gk(a)}function Gk(a){a.K&&a.ya().i(a.K,"select",a.Sj)}function Fk(a){var b=a.Qe();a.setContent(b?b.ud():a.Ie)}function Hk(a){a.lf=a instanceof jk?"option":"separator"}
r.T=function(a,b){Ek.b.T.call(this,a,b);this.Ta()&&nk(zk(this),this.$f())};Mg("goog-select",function(){return new Ek(n)});function Jk(a,b){this.e=a;this.Hd=new Ek("---");this.ta=R(this.Hd,"action",function(b){a.qa.ec(b.target.o())});this.Hd.Tb(b)}F(Jk,Ha);Jk.prototype.pb=function(a,b){var c=new jk(a.name,a);this.Hd.ac(c);if(b||this.Hd.Ne()==1)this.Hd.vc(c),this.e.qa.ec(a)};Jk.prototype.h=function(){S(this.ta);this.Hd.j()};function Kk(a){z(a)||function(){this.a=new rh(a,ld("weapp-fpsbox"),function(){window.document.location="http://www.webglearth.com/upgrade.html"});sh(this.a);this.di=new qf(15);R(this.di,sf,D(function(){var a=this.a,b=a.g;if(!z(a.Xf)){var c=E();if(a.sg<E()-2E3)a.Wf=1E3*a.Me/(E()-a.sg),a.ph=a.Yf/a.Me,a.sg=E(),a.Me=0,a.Yf=0,a.Xf.innerHTML=a.ph.toFixed(2)+" ms / fps: "+a.Wf.toFixed(2);a.Me++}b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);a.ua.ca=ch(4);a.n.draw();!z(a.Xf)&&(a.Yf+=E()-c);a=this.zg;M(a.Ag.Mc(),
a.pl,a)},this));this.a.le="http://srtm.webglearth.com/cgi-bin/corsproxy.fcgi?url=";var b=!1;this.a.Gg=function(){if(!b)b=!0,window.location="http://data.webglearth.com/"};this.a.n=new Mi(this.a,ld("weapp-infobox"),ld("weapp-mapcopyright"),ld("weapp-maplogo"),i,Q("p",n,"3D Buildings Source: ",Q("a",{href:"http://www.swisstopo.ch/"},"Swiss Federal Office of Topography"),"."));this.a.mf();this.Qd=new wj(this.a.n.c);this.Bl=new Mj(this.a.n,this.Qd);this.Kl=new Pj(this.a.n);this.ol=new Jk(this.a.n,ld("weapp-tileprovider"));
this.Ll=new uj(this.a.n,ld("weapp-zoomslider"));this.Gl=new Kj(this.a.n,ld("weapp-pancontrol"));var c=ld("weapp-nominatim");this.ji=new pg(c);this.zg=new Nj(this.a.n,a.parentNode);var d=new Qj(0,0);d.enable(!1);Oj(this.zg,"nominatimMarker",d);var f=D(function(a){var b=a.boundingbox,c,f=O(parseFloat(b[0])),g=O(parseFloat(b[1]));c=this.a.Kc;var m=(f+g)/2,b=ei(m,O(parseFloat(b[2])),m,O(parseFloat(b[3]))),f=ei(f,0,g,0),g=Math.min(Math.max(this.a.Rd,b/f),1);c=O(Cc(c)/(g+0.4)-2);b=Math.max(f,b);b=Math.min(Math.PI/
2,c+b/12756274);c=9567205.5*(Math.sin(b)*Math.sqrt(1+1/Math.pow(Math.tan(c),2))-1);xj(this.Qd,O(parseFloat(a.lat)),O(parseFloat(a.lon)),c);d.enable(!0);d.lat=a.lat;d.yg=a.lon},this);this.ji.addEventListener("update",function(a){f(a.row)});R(ld("weapp-nominatimform"),"submit",D(function(a){a.preventDefault();this.ji.search(c.value,1,function(a,b){b.length>0&&f(b[0])})},this));var g=D(function(){function a(c){c+="=";var d=Ab(b,function(a){return a.indexOf(c)===0});if(t(d)&&(d=d.substr(c.length),d.length>
0))return d}var b=window.location.hash.substr(1).split(";"),c=a("zoom")||a("z");isNaN(c)||this.a.n.c.setZoom(c);c=a("alt");isNaN(c)||Fh(this.a.n.c,c);c=a("t");isNaN(c)||this.a.n.c.setTilt(parseFloat(c));c=a("h");isNaN(c)||this.a.n.c.setHeading(parseFloat(c));c=a("ll");if(t(c))c=c.split(","),c.length>1&&!isNaN(c[0])&&!isNaN(c[1])&&this.a.n.c.setPosition(O(c[0]),O(c[1]));else{var c=a("lat"),d=a("lon")||a("long");!isNaN(c)&&!isNaN(d)&&this.a.n.c.setPosition(O(c),O(d))}},this);this.Sh=new qf(2E3);R(this.Sh,
sf,D(function(){var a=[Cc(this.a.n.c.zb),Cc(this.a.n.c.Ob)];window.location.hash="#ll="+a[0].toFixed(5)+","+a[1].toFixed(5)+";alt="+this.a.n.c.ka.toFixed(0)+";h="+this.a.n.c.getHeading().toFixed(3)+";t="+this.a.n.c.getTilt().toFixed(3)},this));this.Sh.start();window.addEventListener("hashchange",g,!1);g();R(this.a.canvas,"click",D(function(a){if(a.ctrlKey){var b=Ih(this.a.n,a.offsetX,a.offsetY);Oj(this.zg,n,new Aj(b[0],b[1],"Title",Q("span",{},"This is an example of new PrettyMarker. You can easily customize this popup and even add links and other objects: ",
Q("br"),Q("br"),Q("a",{target:"blank",href:"http://www.klokantech.com/"},"Klokan Technologies"),Q("br"),Q("br"))));a.preventDefault()}},this))}.call(this)}Kk.prototype.pb=function(a){this.ol.pb(a)};Kk.prototype.Pd=function(a,b){this.a.n.Pd(a,b)};Kk.prototype.start=function(){this.di.start()};
function Lk(){var a=new Kk(ld("weapp-canvas"));a.pb(new Bj("Satellite"));a.pb(new Bj("Roadmap"));a.pb(new Bj("Terrain"));a.pb(new tg);a.pb(new sg);a.pb(new Ij("Aerial","AsLurrtJotbxkJmnsefUYbatUuBkeBTzTL930TvcOekeG8SaQPY9Z5LDKtiuzAOu"));a.pb(new Ij("AerialWithLabels","AsLurrtJotbxkJmnsefUYbatUuBkeBTzTL930TvcOekeG8SaQPY9Z5LDKtiuzAOu"));a.pb(new Ij("Road","AsLurrtJotbxkJmnsefUYbatUuBkeBTzTL930TvcOekeG8SaQPY9Z5LDKtiuzAOu"));a.Pd("swissBUILDINGS3d_10.json");a.a.n.c.setPosition(O(46.91131),O(7.45883));
Fh(a.a.n.c,1144);a.a.n.c.setHeading(0);a.a.n.c.setTilt(0.923);a.start()}var Mk="WEApp".split("."),Nk=s;!(Mk[0]in Nk)&&Nk.execScript&&Nk.execScript("var "+Mk[0]);for(var Ok;Mk.length&&(Ok=Mk.shift());)!Mk.length&&w(Lk)?Nk[Ok]=Lk:Nk=Nk[Ok]?Nk[Ok]:Nk[Ok]={};
