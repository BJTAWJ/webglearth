/*
 * Copyright (C) 2011 Klokan Technologies GmbH (info@klokantech.com)
 *
 * THE COMPLETE SOURCE CODE OF THIS APPLICATION IS AVAILABLE AT:
 *
 *                 http://www.webglearth.org/
 *
 * The JavaScript code in this page is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU GPL for more details.
 *
 * USE OF THIS CODE OR ANY PART OF IT IN A NONFREE SOFTWARE IS NOT ALLOWED
 * WITHOUT PRIOR WRITTEN PERMISSION FROM KLOKAN TECHNOLOGIES GMBH.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 */
function e(a){throw a;}var i=void 0,n=null;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function p(a){return function(){return this[a]}}function q(a){return function(){return a}}var r,s=this;function t(){}function ca(a){a.Ea=function(){return a.rj||(a.rj=new a)}}
function da(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(c=="[object Window]")return"object";if(c=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(c=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b}function u(a){return a!==i}function w(a){return a===n}function y(a){return a!=n}function z(a){return da(a)=="array"}function B(a){var b=da(a);return b=="array"||b=="object"&&typeof a.length=="number"}function C(a){return typeof a=="string"}function ea(a){return typeof a=="number"}function fa(a){return da(a)=="function"}function ga(a){a=da(a);return a=="object"||a=="array"||a=="function"}
function ha(a){return a[ia]||(a[ia]=++ja)}var ia="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ja=0;function ka(a,b,c){return a.call.apply(a.bind,arguments)}function la(a,b,c){a||e(Error());if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}else return function(){return a.apply(b,arguments)}}
function D(a,b,c){D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ka:la;return D.apply(n,arguments)}function ma(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var E=Date.now||function(){return+new Date};function F(a,b){function c(){}c.prototype=b.prototype;a.b=b.prototype;a.prototype=new c;a.prototype.constructor=a};function na(a){return function(){return a}}var oa=na(!0),pa=na(n);function qa(a){var b=arguments,c=b.length;return function(){for(var a,f=0;f<c;f++)a=b[f].apply(this,arguments);return a}};function ra(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}function sa(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}var ta=/^[a-zA-Z0-9\-_.!~*'()]*$/;function ua(a){a=String(a);return!ta.test(a)?encodeURIComponent(a):a}function va(a){if(!wa.test(a))return a;a.indexOf("&")!=-1&&(a=a.replace(xa,"&amp;"));a.indexOf("<")!=-1&&(a=a.replace(ya,"&lt;"));a.indexOf(">")!=-1&&(a=a.replace(za,"&gt;"));a.indexOf('"')!=-1&&(a=a.replace(Aa,"&quot;"));return a}
var xa=/&/g,ya=/</g,za=/>/g,Aa=/\"/g,wa=/[&<>\"]/;function Ba(a){return String(a).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function Ca(){return Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^E()).toString(36)}
function Da(a,b){for(var c=0,d=sa(String(a)).split("."),f=sa(String(b)).split("."),g=Math.max(d.length,f.length),h=0;c==0&&h<g;h++){var j=d[h]||"",k=f[h]||"",l=RegExp("(\\d*)(\\D*)","g"),o=RegExp("(\\d*)(\\D*)","g");do{var m=l.exec(j)||["","",""],A=o.exec(k)||["","",""];if(m[0].length==0&&A[0].length==0)break;c=Ea(m[1].length==0?0:parseInt(m[1],10),A[1].length==0?0:parseInt(A[1],10))||Ea(m[2].length==0,A[2].length==0)||Ea(m[2],A[2])}while(c==0)}return c}
function Ea(a,b){if(a<b)return-1;else if(a>b)return 1;return 0};function G(){}G.prototype.ve=!1;G.prototype.j=function(){if(!this.ve)this.ve=!0,this.i()};G.prototype.i=function(){this.Si&&Fa.apply(n,this.Si)};function Ga(a){a&&typeof a.j=="function"&&a.j()}function Fa(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];B(d)?Fa.apply(n,d):Ga(d)}};function Ha(a,b,c,d){this.zoom=a||0;this.x=b||0;this.y=c||0;this.Bf=0;this.kc=d||0;this.ed=this.Ic=n;this.state=Ia}F(Ha,G);Ha.prototype.setData=ba("ed");Ha.prototype.Xg=pa;function Ja(a){return a.ed?a.Xg(a.ed):a.Ic}Ha.prototype.Vg=t;Ha.prototype.i=function(){this.Ic=n;if(this.ed)this.Vg(this.ed),this.ed=n};var Ia=0;function H(a,b){this.x=u(a)?a:0;this.y=u(b)?b:0}H.prototype.ja=function(){return new H(this.x,this.y)};function Ka(a,b){return new H(a.x-b.x,a.y-b.y)};function La(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}La.prototype.ja=function(){return new La(this.top,this.right,this.bottom,this.left)};La.prototype.contains=function(a){return!this||!a?!1:a instanceof La?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};var Ma,Na,Oa,Pa,Qa,Ra,Sa;function Ta(){return s.navigator?s.navigator.userAgent:n}function Ua(){return s.navigator}Qa=Pa=Oa=Na=Ma=!1;var Va;if(Va=Ta()){var Wa=Ua();Ma=Va.indexOf("Opera")==0;Na=!Ma&&Va.indexOf("MSIE")!=-1;Pa=(Oa=!Ma&&Va.indexOf("WebKit")!=-1)&&Va.indexOf("Mobile")!=-1;Qa=!Ma&&!Oa&&Wa.product=="Gecko"}var Xa=Ma,I=Na,J=Qa,K=Oa,Ya=Pa,Za,$a=Ua();Za=$a&&$a.platform||"";Ra=Za.indexOf("Mac")!=-1;Sa=Za.indexOf("Win")!=-1;var ab=!!Ua()&&(Ua().appVersion||"").indexOf("X11")!=-1,bb;
a:{var cb="",db;if(Xa&&s.opera)var eb=s.opera.version,cb=typeof eb=="function"?eb():eb;else if(J?db=/rv\:([^\);]+)(\)|;)/:I?db=/MSIE\s+([^\);]+)(\)|;)/:K&&(db=/WebKit\/(\S+)/),db)var fb=db.exec(Ta()),cb=fb?fb[1]:"";if(I){var gb,hb=s.document;gb=hb?hb.documentMode:i;if(gb>parseFloat(cb)){bb=String(gb);break a}}bb=cb}var ib={};function L(a){return ib[a]||(ib[a]=Da(bb,a)>=0)}var jb={};function kb(){return jb[9]||(jb[9]=I&&document.documentMode&&document.documentMode>=9)};function lb(a,b){for(var c in a)b.call(i,a[c],c,a)}function mb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function nb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function ob(){var a=pb,b;for(b in a)return!1;return!0}function qb(a,b,c){b in a&&e(Error('The object already contains the key "'+b+'"'));a[b]=c}var rb="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");
function sb(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var g=0;g<rb.length;g++)c=rb[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var M=Array.prototype,tb=M.indexOf?function(a,b,c){return M.indexOf.call(a,b,c)}:function(a,b,c){c=c==n?0:c<0?Math.max(0,a.length+c):c;if(C(a))return!C(b)||b.length!=1?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},N=M.forEach?function(a,b,c){M.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=C(a)?a.split(""):a,g=0;g<d;g++)g in f&&b.call(c,f[g],g,a)},ub=M.filter?function(a,b,c){return M.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=[],g=0,h=C(a)?a.split(""):
a,j=0;j<d;j++)if(j in h){var k=h[j];b.call(c,k,j,a)&&(f[g++]=k)}return f},vb=M.map?function(a,b,c){return M.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=Array(d),g=C(a)?a.split(""):a,h=0;h<d;h++)h in g&&(f[h]=b.call(c,g[h],h,a));return f},wb=M.every?function(a,b,c){return M.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=C(a)?a.split(""):a,g=0;g<d;g++)if(g in f&&!b.call(c,f[g],g,a))return!1;return!0};
function xb(a,b){var c;a:{c=a.length;for(var d=C(a)?a.split(""):a,f=0;f<c;f++)if(f in d&&b.call(i,d[f],f,a)){c=f;break a}c=-1}return c<0?n:C(a)?a.charAt(c):a[c]}function yb(a,b){return tb(a,b)>=0}function zb(a,b){var c=tb(a,b),d;(d=c>=0)&&M.splice.call(a,c,1);return d}function Ab(a){return M.concat.apply(M,arguments)}function Bb(a){if(z(a))return Ab(a);else{for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}}
function Cb(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],f;if(z(d)||(f=B(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(f)for(var g=a.length,h=d.length,j=0;j<h;j++)a[g+j]=d[j];else a.push(d)}}function Db(a,b,c,d){M.splice.apply(a,Eb(arguments,1))}function Eb(a,b,c){return arguments.length<=2?M.slice.call(a,b):M.slice.call(a,b,c)}function Fb(a,b){M.sort.call(a,b||Gb)}function Gb(a,b){return a>b?1:a<b?-1:0}
function Hb(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];z(d)?b.push.apply(b,Hb.apply(n,d)):b.push(d)}return b};function Ib(a){if(typeof a.wb=="function")a=a.wb();else if(B(a)||C(a))a=a.length;else{var b=0,c;for(c in a)b++;a=b}return a}function Jb(a){if(typeof a.Qa=="function")return a.Qa();if(C(a))return a.split("");if(B(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return mb(a)}function Kb(a){if(typeof a.Ec=="function")return a.Ec();if(typeof a.Qa!="function"){if(B(a)||C(a)){for(var b=[],a=a.length,c=0;c<a;c++)b.push(c);return b}return nb(a)}}
function Lb(a,b,c){if(typeof a.forEach=="function")a.forEach(b,c);else if(B(a)||C(a))N(a,b,c);else for(var d=Kb(a),f=Jb(a),g=f.length,h=0;h<g;h++)b.call(c,f[h],d&&d[h],a)}function Mb(a,b){if(typeof a.every=="function")return a.every(b,i);if(B(a)||C(a))return wb(a,b,i);for(var c=Kb(a),d=Jb(a),f=d.length,g=0;g<f;g++)if(!b.call(i,d[g],c&&c[g],a))return!1;return!0};var Nb="StopIteration"in s?s.StopIteration:Error("StopIteration");function Ob(){}Ob.prototype.next=function(){e(Nb)};Ob.prototype.Cd=function(){return this};function Pb(a){if(a instanceof Ob)return a;if(typeof a.Cd=="function")return a.Cd(!1);if(B(a)){var b=0,c=new Ob;c.next=function(){for(;;)if(b>=a.length&&e(Nb),b in a)return a[b++];else b++};return c}e(Error("Not implemented"))}
function Qb(a,b,c){if(B(a))try{N(a,b,c)}catch(d){d!==Nb&&e(d)}else{a=Pb(a);try{for(;;)b.call(c,a.next(),i,a)}catch(f){f!==Nb&&e(f)}}};function Rb(a,b){this.P={};this.I=[];var c=arguments.length;if(c>1){c%2&&e(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.lf(a)}r=Rb.prototype;r.w=0;r.ke=0;r.wb=p("w");r.Qa=function(){Sb(this);for(var a=[],b=0;b<this.I.length;b++)a.push(this.P[this.I[b]]);return a};r.Ec=function(){Sb(this);return this.I.concat()};r.Fb=function(a){return Tb(this.P,a)};
r.uf=function(a){for(var b=0;b<this.I.length;b++){var c=this.I[b];if(Tb(this.P,c)&&this.P[c]==a)return!0}return!1};r.equals=function(a,b){if(this===a)return!0;if(this.w!=a.wb())return!1;var c=b||Ub;Sb(this);for(var d,f=0;d=this.I[f];f++)if(!c(this.get(d),a.get(d)))return!1;return!0};function Ub(a,b){return a===b}r.clear=function(){this.P={};this.ke=this.w=this.I.length=0};r.remove=function(a){return Tb(this.P,a)?(delete this.P[a],this.w--,this.ke++,this.I.length>2*this.w&&Sb(this),!0):!1};
function Sb(a){if(a.w!=a.I.length){for(var b=0,c=0;b<a.I.length;){var d=a.I[b];Tb(a.P,d)&&(a.I[c++]=d);b++}a.I.length=c}if(a.w!=a.I.length){for(var f={},c=b=0;b<a.I.length;)d=a.I[b],Tb(f,d)||(a.I[c++]=d,f[d]=1),b++;a.I.length=c}}r.get=function(a,b){return Tb(this.P,a)?this.P[a]:b};r.set=function(a,b){Tb(this.P,a)||(this.w++,this.I.push(a),this.ke++);this.P[a]=b};r.lf=function(a){var b;a instanceof Rb?(b=a.Ec(),a=a.Qa()):(b=nb(a),a=mb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};r.ja=function(){return new Rb(this)};
r.Cd=function(a){Sb(this);var b=0,c=this.I,d=this.P,f=this.ke,g=this,h=new Ob;h.next=function(){for(;;){f!=g.ke&&e(Error("The map has changed since the iterator was created"));b>=c.length&&e(Nb);var h=c[b++];return a?h:d[h]}};return h};function Tb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Vb(a){this.P=new Rb;a&&this.lf(a)}function Wb(a){var b=typeof a;return b=="object"&&a||b=="function"?"o"+ha(a):b.substr(0,1)+a}r=Vb.prototype;r.wb=function(){return this.P.wb()};r.add=function(a){this.P.set(Wb(a),a)};r.lf=function(a){for(var a=Jb(a),b=a.length,c=0;c<b;c++)this.add(a[c])};r.vd=function(a){for(var a=Jb(a),b=a.length,c=0;c<b;c++)this.remove(a[c])};r.remove=function(a){return this.P.remove(Wb(a))};r.clear=function(){this.P.clear()};r.contains=function(a){return this.P.Fb(Wb(a))};
r.uh=function(a){for(var b=new Vb,a=Jb(a),c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};r.Qa=function(){return this.P.Qa()};r.ja=function(){return new Vb(this)};r.equals=function(a){return this.wb()==Ib(a)&&Xb(this,a)};
function Xb(a,b){var c=Ib(b);if(a.wb()>c)return!1;!(b instanceof Vb)&&c>5&&(b=new Vb(b));return Mb(a,function(a){if(typeof b.contains=="function")a=b.contains(a);else if(typeof b.uf=="function")a=b.uf(a);else if(B(b)||C(b))a=yb(b,a);else a:{for(var c in b)if(b[c]==a){a=!0;break a}a=!1}return a})}r.Cd=function(){return this.P.Cd(!1)};function Yb(a){this.name=a;this.gb=0;this.zf=[];this.Hh=-1.4844222297453324;this.Fh=1.4844222297453324;this.Ih=-Math.PI;this.Gh=Math.PI;this.pe=[]}function Zb(a,b){if(!y(a.pe[b])){var c=1<<b,d=Math.floor((a.Ih/(2*Math.PI)+0.5)*c),f=Math.floor((a.Gh/(2*Math.PI)+0.5)*c),g=Math.floor((0.5-$b(a.Fh)/(Math.PI*2))*c),c=Math.floor((0.5-$b(a.Hh)/(Math.PI*2))*c);a.pe[b]=new La(g,f,c,d)}return a.pe[b]}r=Yb.prototype;r.kd=q(0);r.sf=q(!1);r.wg=q(!1);r.Uf=q(!0);
function ac(a){N(a.zf,function(a){this.gb--;this.Rd(a.yk,a.onload,a.gk)},a);a.zf=[]}function bc(a,b,c,d){a.Uf()?a.Rd(b,c,d):(a.zf.push(new cc(b,c,d)),a.gb++)}r.uc=aa();r.Be=q(n);r.Xh=t;r.vf=t;function dc(a,b,c,d,f){this.Li=a;this.Mi=b;this.uk=c;this.vk=d;this.Kk=f}function cc(a,b,c){this.yk=a;this.onload=b;this.gk=c};function ec(a){Yb.call(this,a);this.qg=""}F(ec,Yb);ec.prototype.sf=q(!0);ec.prototype.wg=function(a){var b=this.qg!=a;this.qg=a;return b};ec.prototype.Rd=function(a,b,c){var d=new Image;d.onload=D(function(){a.state=20;this.gb--;b(a)},this);d.onerror=D(function(){a.Bf++;a.state=-10;this.gb--;c&&c(a)},this);a.state=10;a.Ic=d;d.crossOrigin="";var f=this.Nd(a.zoom,a.x,a.y);d.src=this.qg+f;this.gb++};function fc(a){return Math.floor(Math.random()*a)}function O(a,b,c){return Math.min(Math.max(a,b),c)}function gc(a,b){var c=a%b;return c*b<0?c+b:c}function P(a){return a*Math.PI/180}function hc(a){return a*180/Math.PI};function ic(a){var b=u(i),c=new XMLHttpRequest;if(b)c.onreadystatechange=function(){c.readyState==4&&i(c.responseText)};c.open("GET",a,b);c.send(n);return b?"":c.responseText}function jc(a){a=gc(a,2*Math.PI);return a>Math.PI?a-2*Math.PI:a};function kc(a,b,c,d,f,g,h){ec.call(this,a);this.url=b;this.minZoom=c;this.maxZoom=d;this.tileSize=f;this.Xi=g===!0;this.Bg=h||[]}F(kc,ec);kc.prototype.kd=p("minZoom");kc.prototype.bb=p("maxZoom");kc.prototype.Lb=p("tileSize");kc.prototype.Nd=function(a,b,c){var d=this.url.replace("{z}",a.toFixed(0)),d=d.replace("{x}",b.toFixed(0)),d=d.replace("{y}",(this.Xi?(1<<a)-c-1:c).toFixed(0));this.Bg.length>0&&(d=d.replace("{sub}",this.Bg[fc(this.Bg.length)]));return d};var lc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function mc(a,b){var c;a instanceof mc?(this.yd(b==n?a.xb:b),nc(this,a.lc),oc(this,a.je),pc(this,a.Ac),qc(this,a.ud),this.setPath(a.getPath()),rc(this,a.ib.ja()),sc(this,a.Kd)):a&&(c=String(a).match(lc))?(this.yd(!!b),nc(this,c[1]||"",!0),oc(this,c[2]||"",!0),pc(this,c[3]||"",!0),qc(this,c[4]),this.setPath(c[5]||"",!0),rc(this,c[6]||"",!0),sc(this,c[7]||"",!0)):(this.yd(!!b),this.ib=new tc(n,this,this.xb))}r=mc.prototype;r.lc="";r.je="";r.Ac="";r.ud=n;r.Oc="";r.Kd="";r.sj=!1;r.xb=!1;
r.toString=function(){if(this.Ya)return this.Ya;var a=[];this.lc&&a.push(uc(this.lc,vc),":");this.Ac&&(a.push("//"),this.je&&a.push(uc(this.je,vc),"@"),a.push(C(this.Ac)?encodeURIComponent(this.Ac):n),this.ud!=n&&a.push(":",String(this.ud)));this.Oc&&(this.Ac&&this.Oc.charAt(0)!="/"&&a.push("/"),a.push(uc(this.Oc,this.Oc.charAt(0)=="/"?wc:xc)));var b=String(this.ib);b&&a.push("?",b);this.Kd&&a.push("#",uc(this.Kd,yc));return this.Ya=a.join("")};
r.ja=function(){var a=this.lc,b=this.je,c=this.Ac,d=this.ud,f=this.Oc,g=this.ib.ja(),h=this.Kd,j=new mc(n,this.xb);a&&nc(j,a);b&&oc(j,b);c&&pc(j,c);d&&qc(j,d);f&&j.setPath(f);g&&rc(j,g);h&&sc(j,h);return j};function nc(a,b,c){zc(a);delete a.Ya;a.lc=c?b?decodeURIComponent(b):"":b;if(a.lc)a.lc=a.lc.replace(/:$/,"")}function oc(a,b,c){zc(a);delete a.Ya;a.je=c?b?decodeURIComponent(b):"":b}function pc(a,b,c){zc(a);delete a.Ya;a.Ac=c?b?decodeURIComponent(b):"":b}
function qc(a,b){zc(a);delete a.Ya;b?(b=Number(b),(isNaN(b)||b<0)&&e(Error("Bad port number "+b)),a.ud=b):a.ud=n}r.getPath=p("Oc");r.setPath=function(a,b){zc(this);delete this.Ya;this.Oc=b?a?decodeURIComponent(a):"":a;return this};function rc(a,b,c){zc(a);delete a.Ya;b instanceof tc?(a.ib=b,a.ib.ie=a,a.ib.yd(a.xb)):(c||(b=uc(b,Ac)),a.ib=new tc(b,a,a.xb))}function Bc(a,b,c){zc(a);delete a.Ya;z(c)||(c=[String(c)]);a.ib.setValues(b,c)}
function sc(a,b,c){zc(a);delete a.Ya;a.Kd=c?b?decodeURIComponent(b):"":b}function zc(a){a.sj&&e(Error("Tried to modify a read-only Uri"))}r.yd=function(a){this.xb=a;this.ib&&this.ib.yd(a);return this};var Cc=/^[a-zA-Z0-9\-_.!~*'():\/;?]*$/;function uc(a,b){var c=n;C(a)&&(c=a,Cc.test(c)||(c=encodeURI(a)),c.search(b)>=0&&(c=c.replace(b,Dc)));return c}function Dc(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var vc=/[#\/\?@]/g,xc=/[\#\?:]/g,wc=/[\#\?]/g,Ac=/[\#\?@]/g,yc=/#/g;
function tc(a,b,c){this.Ib=a||n;this.ie=b||n;this.xb=!!c}function Ec(a){if(!a.F&&(a.F=new Rb,a.w=0,a.Ib))for(var b=a.Ib.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),f=n,g=n;d>=0?(f=b[c].substring(0,d),g=b[c].substring(d+1)):f=b[c];f=decodeURIComponent(f.replace(/\+/g," "));f=Fc(a,f);a.add(f,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}r=tc.prototype;r.F=n;r.w=n;r.wb=function(){Ec(this);return this.w};
r.add=function(a,b){Ec(this);Gc(this);a=Fc(this,a);if(this.Fb(a)){var c=this.F.get(a);z(c)?c.push(b):this.F.set(a,[c,b])}else this.F.set(a,b);this.w++;return this};r.remove=function(a){Ec(this);a=Fc(this,a);if(this.F.Fb(a)){Gc(this);var b=this.F.get(a);z(b)?this.w-=b.length:this.w--;return this.F.remove(a)}return!1};r.clear=function(){Gc(this);this.F&&this.F.clear();this.w=0};r.Fb=function(a){Ec(this);a=Fc(this,a);return this.F.Fb(a)};r.uf=function(a){var b=this.Qa();return yb(b,a)};
r.Ec=function(){Ec(this);for(var a=this.F.Qa(),b=this.F.Ec(),c=[],d=0;d<b.length;d++){var f=a[d];if(z(f))for(var g=0;g<f.length;g++)c.push(b[d]);else c.push(b[d])}return c};r.Qa=function(a){Ec(this);if(a)if(a=Fc(this,a),this.Fb(a)){var b=this.F.get(a);if(z(b))return b;else a=[],a.push(b)}else a=[];else for(var b=this.F.Qa(),a=[],c=0;c<b.length;c++){var d=b[c];z(d)?Cb(a,d):a.push(d)}return a};
r.set=function(a,b){Ec(this);Gc(this);a=Fc(this,a);if(this.Fb(a)){var c=this.F.get(a);z(c)?this.w-=c.length:this.w--}this.F.set(a,b);this.w++;return this};r.get=function(a,b){Ec(this);a=Fc(this,a);if(this.Fb(a)){var c=this.F.get(a);return z(c)?c[0]:c}else return b};r.setValues=function(a,b){Ec(this);Gc(this);a=Fc(this,a);if(this.Fb(a)){var c=this.F.get(a);z(c)?this.w-=c.length:this.w--}b.length>0&&(this.F.set(a,b),this.w+=b.length)};
r.toString=function(){if(this.Ib)return this.Ib;if(!this.F)return"";for(var a=[],b=0,c=this.F.Ec(),d=0;d<c.length;d++){var f=c[d],g=ua(f),f=this.F.get(f);if(z(f))for(var h=0;h<f.length;h++)b>0&&a.push("&"),a.push(g),f[h]!==""&&a.push("=",ua(f[h])),b++;else b>0&&a.push("&"),a.push(g),f!==""&&a.push("=",ua(f)),b++}return this.Ib=a.join("")};function Gc(a){delete a.xf;delete a.Ib;a.ie&&delete a.ie.Ya}
r.ja=function(){var a=new tc;if(this.xf)a.xf=this.xf;if(this.Ib)a.Ib=this.Ib;if(this.F)a.F=this.F.ja();return a};function Fc(a,b){var c=String(b);a.xb&&(c=c.toLowerCase());return c}r.yd=function(a){a&&!this.xb&&(Ec(this),Gc(this),Lb(this.F,function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.add(d,a))},this));this.xb=a};var Hc;function Ic(a){return(a=a.className)&&typeof a.split=="function"?a.split(/\s+/):[]}function Q(a,b){var c=Ic(a),d=Eb(arguments,1),f;f=c;for(var g=0,h=0;h<d.length;h++)yb(f,d[h])||(f.push(d[h]),g++);f=g==d.length;a.className=c.join(" ");return f}function Jc(a,b){var c=Ic(a),d=Eb(arguments,1),f;f=c;for(var g=0,h=0;h<f.length;h++)yb(d,f[h])&&(Db(f,h--,1),g++);f=g==d.length;a.className=c.join(" ");return f};function Kc(a,b){this.width=a;this.height=b}function Lc(a,b){return a==b?!0:!a||!b?!1:a.width==b.width&&a.height==b.height}r=Kc.prototype;r.ja=function(){return new Kc(this.width,this.height)};r.Gd=function(){return this.width/this.height};r.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};r.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
r.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};r.scale=function(a){this.width*=a;this.height*=a;return this};var Mc=!I||kb();!J&&!I||I&&kb()||J&&L("1.9.1");var Nc=I&&!L("9");function Oc(a){return a?new Pc(R(a)):Hc||(Hc=new Pc)}function Qc(a){return C(a)?document.getElementById(a):a}
function Rc(a,b,c,d){a=d||a;b=b&&b!="*"?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(!K||Sc(document)||L("528"))&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName)if(a=a.getElementsByClassName(c),b){for(var d={},f=0,g=0,h;h=a[g];g++)b==h.nodeName&&(d[f++]=h);d.length=f;return d}else return a;a=a.getElementsByTagName(b||"*");if(c){d={};for(g=f=0;h=a[g];g++)b=h.className,typeof b.split=="function"&&yb(b.split(/\s+/),c)&&(d[f++]=h);d.length=f;return d}else return a}
function Tc(a,b){lb(b,function(b,d){d=="style"?a.style.cssText=b:d=="class"?a.className=b:d=="for"?a.htmlFor=b:d in Uc?a.setAttribute(Uc[d],b):d.lastIndexOf("aria-",0)==0?a.setAttribute(d,b):a[d]=b})}var Uc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};function S(a,b,c){return Vc(document,arguments)}
function Vc(a,b){var c=b[0],d=b[1];if(!Mc&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',va(d.name),'"');if(d.type){c.push(' type="',va(d.type),'"');var f={};sb(f,d);d=f;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);if(d)C(d)?c.className=d:z(d)?Q.apply(n,[c].concat(d)):Tc(c,d);b.length>2&&Wc(a,c,b,2);return c}
function Wc(a,b,c,d){function f(c){c&&b.appendChild(C(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var g=c[d];B(g)&&!(ga(g)&&g.nodeType>0)?N(Xc(g)?Bb(g):g,f):f(g)}}function Sc(a){return a.compatMode=="CSS1Compat"}function Yc(a,b){Wc(R(a),a,arguments,1)}function Zc(a){for(var b;b=a.firstChild;)a.removeChild(b)}function $c(a){return a&&a.parentNode?a.parentNode.removeChild(a):n}
function ad(a){if(a.firstElementChild!=i)a=a.firstElementChild;else for(a=a.firstChild;a&&a.nodeType!=1;)a=a.nextSibling;return a}function bd(a,b){if(a.contains&&b.nodeType==1)return a==b||a.contains(b);if(typeof a.compareDocumentPosition!="undefined")return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function R(a){return a.nodeType==9?a:a.ownerDocument||a.document}
function cd(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&a.firstChild.nodeType==3){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Zc(a),a.appendChild(R(a).createTextNode(b))}var dd={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},ed={IMG:" ",BR:"\n"};function fd(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?(a=a.tabIndex,ea(a)&&a>=0&&a<32768):!1}function gd(a){var b=[];hd(a,b,!1);return b.join("")}
function hd(a,b,c){if(!(a.nodeName in dd))if(a.nodeType==3)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in ed)b.push(ed[a.nodeName]);else for(a=a.firstChild;a;)hd(a,b,c),a=a.nextSibling}function Xc(a){if(a&&typeof a.length=="number")if(ga(a))return typeof a.item=="function"||typeof a.item=="string";else if(fa(a))return typeof a.item=="function";return!1}function Pc(a){this.A=a||s.document||document}r=Pc.prototype;r.Y=Oc;
function id(a){return a.A}r.c=function(a){return C(a)?this.A.getElementById(a):a};r.t=function(a,b,c){return Vc(this.A,arguments)};r.createElement=function(a){return this.A.createElement(a)};r.createTextNode=function(a){return this.A.createTextNode(a)};function jd(a){return Sc(a.A)}function kd(a){var b=a.A,a=!K&&Sc(b)?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new H(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}r.appendChild=function(a,b){a.appendChild(b)};
r.append=Yc;r.Vh=Zc;r.removeNode=$c;r.dh=ad;r.contains=bd;function ld(a,b){this.ie=new mc(a);this.Ki=b?b:"callback";this.ee=5E3}var md=0;
ld.prototype.send=function(a,b,c,d){a=a||n;if(!document.documentElement.firstChild)return c&&c(a),n;d=d||"_"+(md++).toString(36)+E().toString(36);s._callbacks_||(s._callbacks_={});var f=document.createElement("script"),g=n;this.ee>0&&(g=s.setTimeout(nd(d,f,a,c),this.ee));c=this.ie.ja();if(a)for(var h in a)(!a.hasOwnProperty||a.hasOwnProperty(h))&&Bc(c,h,a[h]);b&&(s._callbacks_[d]=od(d,f,b,g),Bc(c,this.Ki,"_callbacks_."+d));Tc(f,{type:"text/javascript",id:d,charset:"UTF-8",src:c.toString()});document.getElementsByTagName("head")[0].appendChild(f);
return{fb:d,ee:g}};ld.prototype.cancel=function(a){if(a&&a.fb){var b=Qc(a.fb);b&&b.tagName=="SCRIPT"&&typeof s._callbacks_[a.fb]=="function"&&(a.ee&&s.clearTimeout(a.ee),pd(a.fb,b,!1))}};function nd(a,b,c,d){return function(){pd(a,b,!1);d&&d(c)}}function od(a,b,c,d){return function(f){s.clearTimeout(d);pd(a,b,!0);c.apply(i,arguments)}}function pd(a,b,c){s.setTimeout(function(){$c(b)},0);s._callbacks_[a]&&(c?delete s._callbacks_[a]:s._callbacks_[a]=t)};function qd(a,b){this.Ek=a||"http://open.mapquestapi.com/nominatim/v1/search";this.Vd=b||{};this.wh=new ld(this.Ek,"json_callback")}
function rd(a,b,c,d){a.Vd.q=b;a.Vd.format="json";a.Vd.addressdetails=1;a.Vd.limit=c;if(!b||b.length==1)d(b,[]);else{if(c==1)a.Wj=b;if(!(c>1&&b===a.Wj))a.Yh!==n&&a.wh.cancel(a.Yh),a.Yh=a.wh.send(a.Vd,function(a){var c=ub(a,function(a){return a["class"]=="place"});c.length>0?(N(c,function(a){var b=a.address.country_code=="us"?a.address.state:a.address.country;a.type=="suburb"&&(b=a.address.city+", "+b);a.display_name=a.address[a.type]?a.address[a.type]+", "+b:a.display_name}),d(b,c)):d(b,a)})}};var sd;var td=!I||kb(),ud=I&&!L("8");function vd(a,b){this.type=a;this.currentTarget=this.target=b}F(vd,G);r=vd.prototype;r.i=function(){delete this.type;delete this.target;delete this.currentTarget};r.Rc=!1;r.Yd=!0;r.stopPropagation=function(){this.Rc=!0};r.preventDefault=function(){this.Yd=!1};function wd(a){a.preventDefault()};function xd(a){xd[" "](a);return a}xd[" "]=t;function yd(a,b){a&&this.dc(a,b)}F(yd,vd);var zd=[1,4,2];r=yd.prototype;r.target=n;r.relatedTarget=n;r.offsetX=0;r.offsetY=0;r.clientX=0;r.clientY=0;r.screenX=0;r.screenY=0;r.button=0;r.keyCode=0;r.charCode=0;r.ctrlKey=!1;r.altKey=!1;r.shiftKey=!1;r.metaKey=!1;r.ik=!1;r.ta=n;
r.dc=function(a,b){var c=this.type=a.type;vd.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(J){var f;a:{try{xd(d.nodeName);f=!0;break a}catch(g){}f=!1}f||(d=n)}}else if(c=="mouseover")d=a.fromElement;else if(c=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.ik=Ra?a.metaKey:a.ctrlKey;this.state=a.state;this.ta=a;delete this.Yd;delete this.Rc};function Ad(a,b){return td?a.ta.button==b:a.type=="click"?b==0:!!(a.ta.button&zd[b])}function Bd(a){return Ad(a,0)&&!(K&&Ra&&a.ctrlKey)}
r.stopPropagation=function(){yd.b.stopPropagation.call(this);this.ta.stopPropagation?this.ta.stopPropagation():this.ta.cancelBubble=!0};r.preventDefault=function(){yd.b.preventDefault.call(this);var a=this.ta;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,ud)try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123)a.keyCode=-1}catch(b){}};r.Zi=p("ta");r.i=function(){yd.b.i.call(this);this.relatedTarget=this.currentTarget=this.target=this.ta=n};function Cd(){}var Dd=0;r=Cd.prototype;r.key=0;r.Sc=!1;r.Rg=!1;r.dc=function(a,b,c,d,f,g){fa(a)?this.vh=!0:a&&a.handleEvent&&fa(a.handleEvent)?this.vh=!1:e(Error("Invalid listener argument"));this.qd=a;this.Th=b;this.src=c;this.type=d;this.capture=!!f;this.Ee=g;this.Rg=!1;this.key=++Dd;this.Sc=!1};r.handleEvent=function(a){return this.vh?this.qd.call(this.Ee||this.src,a):this.qd.handleEvent.call(this.qd,a)};var Ed,Fd=(Ed="ScriptEngine"in s&&s.ScriptEngine()=="JScript")?s.ScriptEngineMajorVersion()+"."+s.ScriptEngineMinorVersion()+"."+s.ScriptEngineBuildVersion():"0";function Gd(a,b){this.Ch=b;this.Dc=[];a>this.Ch&&e(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Dc.push(this.Gb?this.Gb():{})}F(Gd,G);Gd.prototype.Gb=n;Gd.prototype.Zg=n;Gd.prototype.getObject=function(){return this.Dc.length?this.Dc.pop():this.Gb?this.Gb():{}};function Hd(a,b){a.Dc.length<a.Ch?a.Dc.push(b):Kd(a,b)}function Kd(a,b){if(a.Zg)a.Zg(b);else if(ga(b))if(fa(b.j))b.j();else for(var c in b)delete b[c]}
Gd.prototype.i=function(){Gd.b.i.call(this);for(var a=this.Dc;a.length;)Kd(this,a.pop());delete this.Dc};var Ld,Md,Nd,Od,Pd,Qd,Rd,Sd,Td,Ud,Vd;
(function(){function a(){return{w:0,jb:0}}function b(){return[]}function c(){function a(b){b=h.call(a.src,a.key,b);if(!b)return b}return a}function d(){return new Cd}function f(){return new yd}var g=Ed&&!(Da(Fd,"5.7")>=0),h;Qd=function(a){h=a};if(g){Ld=function(){return j.getObject()};Md=function(a){Hd(j,a)};Nd=function(){return k.getObject()};Od=function(a){Hd(k,a)};Pd=function(){return l.getObject()};Rd=function(){Hd(l,c())};Sd=function(){return o.getObject()};Td=function(a){Hd(o,a)};Ud=function(){return m.getObject()};
Vd=function(a){Hd(m,a)};var j=new Gd(0,600);j.Gb=a;var k=new Gd(0,600);k.Gb=b;var l=new Gd(0,600);l.Gb=c;var o=new Gd(0,600);o.Gb=d;var m=new Gd(0,600);m.Gb=f}else Ld=a,Md=t,Nd=b,Od=t,Pd=c,Rd=t,Sd=d,Td=t,Ud=f,Vd=t})();var Wd={},Xd={},Yd={},Zd={};
function T(a,b,c,d,f){if(b)if(z(b)){for(var g=0;g<b.length;g++)T(a,b[g],c,d,f);return n}else{var d=!!d,h=Xd;b in h||(h[b]=Ld());h=h[b];d in h||(h[d]=Ld(),h.w++);var h=h[d],j=ha(a),k;h.jb++;if(h[j]){k=h[j];for(g=0;g<k.length;g++)if(h=k[g],h.qd==c&&h.Ee==f){if(h.Sc)break;return k[g].key}}else k=h[j]=Nd(),h.w++;g=Pd();g.src=a;h=Sd();h.dc(c,g,a,b,d,f);c=h.key;g.key=c;k.push(h);Wd[c]=h;Yd[j]||(Yd[j]=Nd());Yd[j].push(h);a.addEventListener?(a==s||!a.Wg)&&a.addEventListener(b,g,d):a.attachEvent(b in Zd?Zd[b]:
Zd[b]="on"+b,g);return c}else e(Error("Invalid event type"))}function $d(a,b,c,d,f){if(z(b))for(var g=0;g<b.length;g++)$d(a,b[g],c,d,f);else if(d=!!d,a=ae(a,b,d))for(g=0;g<a.length;g++)if(a[g].qd==c&&a[g].capture==d&&a[g].Ee==f){U(a[g].key);break}}
function U(a){if(!Wd[a])return!1;var b=Wd[a];if(b.Sc)return!1;var c=b.src,d=b.type,f=b.Th,g=b.capture;c.removeEventListener?(c==s||!c.Wg)&&c.removeEventListener(d,f,g):c.detachEvent&&c.detachEvent(d in Zd?Zd[d]:Zd[d]="on"+d,f);c=ha(c);f=Xd[d][g][c];if(Yd[c]){var h=Yd[c];zb(h,b);h.length==0&&delete Yd[c]}b.Sc=!0;f.Kh=!0;be(d,g,c,f);delete Wd[a];return!0}
function be(a,b,c,d){if(!d.Le&&d.Kh){for(var f=0,g=0;f<d.length;f++)if(d[f].Sc){var h=d[f].Th;h.src=n;Rd(h);Td(d[f])}else f!=g&&(d[g]=d[f]),g++;d.length=g;d.Kh=!1;g==0&&(Od(d),delete Xd[a][b][c],Xd[a][b].w--,Xd[a][b].w==0&&(Md(Xd[a][b]),delete Xd[a][b],Xd[a].w--),Xd[a].w==0&&(Md(Xd[a]),delete Xd[a]))}}
function ce(a){var b,c=0,d=b==n;b=!!b;if(a==n)lb(Yd,function(a){for(var f=a.length-1;f>=0;f--){var g=a[f];if(d||b==g.capture)U(g.key),c++}});else if(a=ha(a),Yd[a])for(var a=Yd[a],f=a.length-1;f>=0;f--){var g=a[f];if(d||b==g.capture)U(g.key),c++}}function ae(a,b,c){var d=Xd;return b in d&&(d=d[b],c in d&&(d=d[c],a=ha(a),d[a]))?d[a]:n}
function de(a,b,c,d,f){var g=1,b=ha(b);if(a[b]){a.jb--;a=a[b];a.Le?a.Le++:a.Le=1;try{for(var h=a.length,j=0;j<h;j++){var k=a[j];k&&!k.Sc&&(g&=ee(k,f)!==!1)}}finally{a.Le--,be(c,d,b,a)}}return Boolean(g)}function ee(a,b){var c=a.handleEvent(b);a.Rg&&U(a.key);return c}
Qd(function(a,b){if(!Wd[a])return!0;var c=Wd[a],d=c.type,f=Xd;if(!(d in f))return!0;var f=f[d],g,h;sd===i&&(sd=I&&!s.addEventListener);if(sd){var j;if(!(j=b))a:{j="window.event".split(".");for(var k=s;g=j.shift();)if(y(k[g]))k=k[g];else{j=n;break a}j=k}g=j;j=!0 in f;k=!1 in f;if(j){if(g.keyCode<0||g.returnValue!=i)return!0;a:{var l=!1;if(g.keyCode==0)try{g.keyCode=-1;break a}catch(o){l=!0}if(l||g.returnValue==i)g.returnValue=!0}}l=Ud();l.dc(g,this);g=!0;try{if(j){for(var m=Nd(),A=l.currentTarget;A;A=
A.parentNode)m.push(A);h=f[!0];h.jb=h.w;for(var v=m.length-1;!l.Rc&&v>=0&&h.jb;v--)l.currentTarget=m[v],g&=de(h,m[v],d,!0,l);if(k){h=f[!1];h.jb=h.w;for(v=0;!l.Rc&&v<m.length&&h.jb;v++)l.currentTarget=m[v],g&=de(h,m[v],d,!1,l)}}else g=ee(c,l)}finally{if(m)m.length=0,Od(m);l.j();Vd(l)}return g}d=new yd(b,this);try{g=ee(c,d)}finally{d.j()}return g});function fe(){}F(fe,G);r=fe.prototype;r.Wg=!0;r.Ue=n;r.vg=ba("Ue");r.addEventListener=function(a,b,c,d){T(this,a,b,c,d)};r.removeEventListener=function(a,b,c,d){$d(this,a,b,c,d)};
r.dispatchEvent=function(a){var b=a.type||a,c=Xd;if(b in c){if(C(a))a=new vd(a,this);else if(a instanceof vd)a.target=a.target||this;else{var d=a,a=new vd(b,this);sb(a,d)}var d=1,f,c=c[b],b=!0 in c,g;if(b){f=[];for(g=this;g;g=g.Ue)f.push(g);g=c[!0];g.jb=g.w;for(var h=f.length-1;!a.Rc&&h>=0&&g.jb;h--)a.currentTarget=f[h],d&=de(g,f[h],a.type,!0,a)&&a.Yd!=!1}if(!1 in c)if(g=c[!1],g.jb=g.w,b)for(h=0;!a.Rc&&h<f.length&&g.jb;h++)a.currentTarget=f[h],d&=de(g,f[h],a.type,!1,a)&&a.Yd!=!1;else for(f=this;!a.Rc&&
f&&g.jb;f=f.Ue)a.currentTarget=f,d&=de(g,f,a.type,!1,a)&&a.Yd!=!1;a=Boolean(d)}else a=!0;return a};r.i=function(){fe.b.i.call(this);ce(this);this.Ue=n};function ge(a,b,c){this.Sd=a;this.nc=c;this.k=b;T(b,[he,ie,je,ke],this);this.lb=n;this.ra=[];this.va=-1;this.Da=0;this.zc=this.ba=n}F(ge,fe);r=ge.prototype;r.Cj=10;r.zi=!0;r.Pg=!1;r.si=!1;r.li=!1;var he="hilite",ie="select",ke="dismiss",je="canceldismiss";r=ge.prototype;r.handleEvent=function(a){if(a.target==this.k)switch(a.type){case he:this.eb(a.row);break;case ie:le(this);break;case je:me(this);break;case ke:ne(this)}};r.ld=p("ba");r.Ra=function(){return this.k.$()};
function oe(a){var b=a.Da+a.ra.length-1;a.va>=a.Da&&a.va<b?a.eb(a.va+1):a.va==-1?a.eb(a.Da):a.va==b&&(a.Pg?a.eb(-1):a.si&&a.eb(a.Da))}function pe(a){a.va>a.Da?a.eb(a.va-1):a.Pg&&a.va==a.Da?a.eb(-1):a.si&&(a.va==-1||a.va==a.Da)&&a.eb(a.Da+a.ra.length-1)}r.eb=function(a){this.va=a;this.k.eb(a);return qe(this,a)!=-1};
function le(a){var b=qe(a,a.va);if(b!=-1){var b=a.ra[b],c=a.nc,d=b.toString();if(u(i)?0:c.rd){var f=re(c,c.o(),se(c.N)),g=te(c,c.o());c.rk.test(d)||(d=d.replace(/[\s\xa0]+$/,"")+c.Qi);c.Gk&&(f!=0&&!/^[\s\xa0]*$/.test(g[f-1])&&(d=" "+d),f==g.length-1&&(d+=" "));if(d!=g[f]){g[f]=d;d=c.N;J&&d.blur();d.value=g.join("");for(var h=0,j=0;j<=f;j++)h+=g[j].length;d.focus();f=h;g=c.N;d=f;ue(g)?g.selectionStart=d:I&&(h=ve(g),j=h[0],j.inRange(h[1])&&(d=we(g,d),j.collapse(!0),j.move("character",d),j.select()));
g=c.N;ue(g)?g.selectionEnd=f:I&&(h=ve(g),d=h[1],h[0].inRange(d)&&(f=we(g,f),g=we(g,se(g)),d.collapse(!0),d.moveEnd("character",f-g),d.select()))}}else c.S(d);c.tg=!0;a.li?(a.lb=n,ne(a)):a.Hb();a.dispatchEvent({type:"update",row:b});a.li&&a.nc.update(!0);return!0}else return a.Hb(),a.dispatchEvent({type:"update",row:n}),!1}r.Hb=function(){this.va=-1;this.lb=n;this.Da+=this.ra.length;this.ra=[];window.clearTimeout(this.zc);this.zc=n;this.k.Hb();this.dispatchEvent("suggestionsupdate")};
function ne(a){if(!a.zc)a.zc=window.setTimeout(D(a.Hb,a),100)}function me(a){window.setTimeout(D(function(){if(this.zc)window.clearTimeout(this.zc),this.zc=n},a),10)}r.i=function(){ge.b.i.call(this);this.k.j();this.nc.j();this.Sd=n};r.Bj=function(a,b,c){this.lb==a&&this.rg(b,c)};
r.rg=function(a,b){var c=b?qe(this,this.va):n;this.Da+=this.ra.length;this.ra=a;for(var d=[],f=0;f<a.length;++f)d.push({id:this.Da+f,data:a[f]});this.k.rg(d,this.lb,this.ba);this.zi&&d.length!=0&&this.lb?this.eb(c!=n?this.Da+c:this.Da):this.va=-1;this.dispatchEvent("suggestionsupdate")};function qe(a,b){var c=b-a.Da;return c<0||c>=a.ra.length?-1:c}r.of=function(a){var b=this.nc;b.of.apply(b,arguments)};r.update=function(a){this.nc.update(a)};function xe(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}xe.prototype.ja=function(){return new xe(this.left,this.top,this.width,this.height)};xe.prototype.uh=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top),a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,!0}return!1};
xe.prototype.contains=function(a){return a instanceof xe?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};xe.prototype.Kb=function(){return new Kc(this.width,this.height)};function ye(a,b){var c=R(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,n))?c[b]||c.getPropertyValue(b):""}function ze(a,b){return a.currentStyle?a.currentStyle[b]:n}function Ae(a,b){return ye(a,b)||ze(a,b)||a.style[b]}function Be(a,b,c){var d,f=J&&(Ra||ab)&&L("1.9");b instanceof H?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Ce(d,f);a.style.top=Ce(b,f)}function De(a){a=a?a.nodeType==9?a:R(a):document;return I&&!kb()&&!jd(Oc(a))?a.body:a.documentElement}
function Ee(a){var b=a.getBoundingClientRect();if(I)a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop;return b}
function Fe(a){if(I)return a.offsetParent;for(var b=R(a),c=Ae(a,"position"),d=c=="fixed"||c=="absolute",a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Ae(a,"position"),d=d&&c=="static"&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||c=="fixed"||c=="absolute"||c=="relative"))return a;return n}
function Ge(a){for(var b=new La(0,Infinity,Infinity,0),c=Oc(a),d=c.A.body,f=c.A.documentElement,g=!K&&Sc(c.A)?c.A.documentElement:c.A.body;a=Fe(a);)if((!I||a.clientWidth!=0)&&(!K||a.clientHeight!=0||a!=d)&&a!=d&&a!=f&&Ae(a,"overflow")!="visible"){var h=He(a),j;j=a;if(J&&!L("1.9")){var k=parseFloat(ye(j,"borderLeftWidth"));if(Ie(j)){var l=j.offsetWidth-j.clientWidth-k-parseFloat(ye(j,"borderRightWidth"));k+=l}j=new H(k,parseFloat(ye(j,"borderTopWidth")))}else j=new H(j.clientLeft,j.clientTop);h.x+=
j.x;h.y+=j.y;b.top=Math.max(b.top,h.y);b.right=Math.min(b.right,h.x+a.clientWidth);b.bottom=Math.min(b.bottom,h.y+a.clientHeight);b.left=Math.max(b.left,h.x)}d=g.scrollLeft;g=g.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,g);c=c.A.parentWindow||c.A.defaultView||window;f=c.document;K&&!L("500")&&!Ya?(typeof c.innerHeight=="undefined"&&(c=window),f=c.innerHeight,a=c.document.documentElement.scrollHeight,c==c.top&&a<f&&(f-=15),c=new Kc(c.innerWidth,f)):(c=Sc(f)?f.documentElement:f.body,c=
new Kc(c.clientWidth,c.clientHeight));b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,g+c.height);return b.top>=0&&b.left>=0&&b.bottom>b.top&&b.right>b.left?b:n}
function He(a){var b,c=R(a),d=Ae(a,"position"),f=J&&c.getBoxObjectFor&&!a.getBoundingClientRect&&d=="absolute"&&(b=c.getBoxObjectFor(a))&&(b.screenX<0||b.screenY<0),g=new H(0,0),h=De(c);if(a==h)return g;if(a.getBoundingClientRect)b=Ee(a),a=kd(Oc(c)),g.x=b.left+a.x,g.y=b.top+a.y;else if(c.getBoxObjectFor&&!f)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),g.x=b.screenX-a.screenX,g.y=b.screenY-a.screenY;else{b=a;do{g.x+=b.offsetLeft;g.y+=b.offsetTop;b!=a&&(g.x+=b.clientLeft||0,g.y+=b.clientTop||0);if(K&&
Ae(b,"position")=="fixed"){g.x+=c.body.scrollLeft;g.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(Xa||K&&d=="absolute")g.y-=c.body.offsetTop;for(b=a;(b=Fe(b))&&b!=c.body&&b!=h;)if(g.x-=b.scrollLeft,!Xa||b.tagName!="TR")g.y-=b.scrollTop}return g}
function Je(a){var b=new H;if(a.nodeType==1)if(a.getBoundingClientRect)a=Ee(a),b.x=a.left,b.y=a.top;else{var c=kd(Oc(a)),a=He(a);b.x=a.x-c.x;b.y=a.y-c.y}else{var c=fa(a.Zi),d=a;a.targetTouches?d=a.targetTouches[0]:c&&a.ta.targetTouches&&(d=a.ta.targetTouches[0]);b.x=d.clientX;b.y=d.clientY}return b}function Ke(a,b,c){var d=He(a);if(b instanceof H)c=b.y,b=b.x;Be(a,a.offsetLeft+(b-d.x),a.offsetTop+(c-d.y))}function Ce(a,b){typeof a=="number"&&(a=(b?Math.round(a):a)+"px");return a}
function Le(a){if(Ae(a,"display")!="none")return Me(a);var b=a.style,c=b.display,d=b.visibility,f=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=Me(a);b.display=c;b.position=f;b.visibility=d;return a}function Me(a){var b=a.offsetWidth,c=a.offsetHeight,d=K&&!b&&!c;return(!u(b)||d)&&a.getBoundingClientRect?(a=Ee(a),new Kc(a.right-a.left,a.bottom-a.top)):new Kc(b,c)}function Ne(a){var b=He(a),a=Le(a);return new xe(b.x,b.y,a.width,a.height)}
function Oe(a,b){a.style.display=b?"":"none"}function Ie(a){return"rtl"==Ae(a,"direction")}var Pe=J?"MozUserSelect":K?"WebkitUserSelect":n;function Qe(a,b,c){c=!c?a.getElementsByTagName("*"):n;if(Pe){if(b=b?"none":"",a.style[Pe]=b,c)for(var a=0,d;d=c[a];a++)d.style[Pe]=b}else if(I||Xa)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}
function Re(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);else{var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var f=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return f}}var Se={thin:2,medium:4,thick:6};function Te(a,b){if(ze(a,b+"Style")=="none")return 0;var c=ze(a,b+"Width");return c in Se?Se[c]:Re(a,c)}
function Ue(a){if(I){var b=Te(a,"borderLeft"),c=Te(a,"borderRight"),d=Te(a,"borderTop"),a=Te(a,"borderBottom");return new La(d,c,a,b)}else return b=ye(a,"borderLeftWidth"),c=ye(a,"borderRightWidth"),d=ye(a,"borderTopWidth"),a=ye(a,"borderBottomWidth"),new La(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))};function Ve(a,b){this.Pd=a||1;this.fe=b||We;this.qf=D(this.Eg,this);this.bg=E()}F(Ve,fe);Ve.prototype.enabled=!1;var We=s.window;r=Ve.prototype;r.v=n;r.setInterval=function(a){this.Pd=a;this.v&&this.enabled?(this.stop(),this.start()):this.v&&this.stop()};r.Eg=function(){if(this.enabled){var a=E()-this.bg;if(a>0&&a<this.Pd*0.8)this.v=this.fe.setTimeout(this.qf,this.Pd-a);else if(this.dispatchEvent(Xe),this.enabled)this.v=this.fe.setTimeout(this.qf,this.Pd),this.bg=E()}};
r.start=function(){this.enabled=!0;if(!this.v)this.v=this.fe.setTimeout(this.qf,this.Pd),this.bg=E()};r.stop=function(){this.enabled=!1;if(this.v)this.fe.clearTimeout(this.v),this.v=n};r.i=function(){Ve.b.i.call(this);this.stop();delete this.fe};var Xe="tick";function Ye(a,b,c,d){(!z(a)||!z(b))&&e(Error("Start and end parameters must be arrays"));a.length!=b.length&&e(Error("Start and end points must be the same length"));this.Bd=a;this.Ui=b;this.duration=c;this.Mg=d;this.coords=[]}F(Ye,fe);var pb={},Ze=n;function $e(){af();var a=E(),b;for(b in pb)bf(pb[b],a);Ze=ob()?n:We.setTimeout($e,20)}function af(){Ze&&(We.clearTimeout(Ze),Ze=n)}function cf(a){a=ha(a);delete pb[a];ob()&&af()}r=Ye.prototype;r.p=0;r.bh=0;r.ya=0;r.startTime=n;r.ah=n;r.$f=n;
r.play=function(a){if(a||this.p==0)this.ya=0,this.coords=this.Bd;else if(this.p==1)return!1;cf(this);this.startTime=a=E();this.p==-1&&(this.startTime-=this.duration*this.ya);this.ah=this.startTime+this.duration;this.$f=this.startTime;this.ya||this.Ka();df(this,"play");this.p==-1&&this.ng();this.p=1;var b=ha(this);b in pb||(pb[b]=this);Ze||(Ze=We.setTimeout($e,20));bf(this,a);return!0};r.stop=function(a){cf(this);this.p=0;if(a)this.ya=1;ef(this,this.ya);this.og();this.jc()};
r.i=function(){this.p!=0&&this.stop(!1);this.kg();Ye.b.i.call(this)};function bf(a,b){a.ya=(b-a.startTime)/(a.ah-a.startTime);if(a.ya>=1)a.ya=1;a.bh=1E3/(b-a.$f);a.$f=b;ef(a,a.ya);a.ya==1?(a.p=0,cf(a),df(a,"finish"),a.jc()):a.p==1&&a.ig()}function ef(a,b){fa(a.Mg)&&(b=a.Mg(b));a.coords=Array(a.Bd.length);for(var c=0;c<a.Bd.length;c++)a.coords[c]=(a.Ui[c]-a.Bd[c])*b+a.Bd[c]}r.ig=function(){df(this,"animate")};r.Ka=function(){df(this,"begin")};r.kg=function(){df(this,"destroy")};
r.jc=function(){df(this,"end")};r.ng=function(){df(this,"resume")};r.og=function(){df(this,"stop")};function df(a,b){a.dispatchEvent(new ff(b,a))}function ff(a,b){vd.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.G=b.coords[2];this.duration=b.duration;this.ya=b.ya;this.Df=b.bh;this.state=b.p;this.Lk=b}F(ff,vd);function V(a,b,c,d,f){Ye.call(this,b,c,d,f);this.element=a}F(V,Ye);V.prototype.Yc=t;V.prototype.ig=function(){this.Yc();V.b.ig.call(this)};V.prototype.jc=function(){this.Yc();V.b.jc.call(this)};V.prototype.Ka=function(){this.Yc();V.b.Ka.call(this)};function gf(a,b,c,d,f){(b.length!=2||c.length!=2)&&e(Error("Start and end points must be 2D"));V.apply(this,arguments)}F(gf,V);
gf.prototype.Yc=function(){this.element.style.left=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};function hf(a,b,c,d){gf.call(this,a,[a.offsetLeft,a.offsetTop],b,c,d)}F(hf,gf);hf.prototype.Ka=function(){this.Bd=[this.element.offsetLeft,this.element.offsetTop];hf.b.Ka.call(this)};function jf(a,b,c,d,f){V.call(this,a,[b],[c],d,f)}F(jf,V);jf.prototype.Yc=function(){this.element.style.width=Math.round(this.coords[0])+"px"};
function kf(a,b,c,d,f){V.call(this,a,[b],[c],d,f)}F(kf,V);kf.prototype.Yc=function(){this.element.style.height=Math.round(this.coords[0])+"px"};function lf(a,b,c,d,f){ea(b)&&(b=[b]);ea(c)&&(c=[c]);V.call(this,a,b,c,d,f);(b.length!=1||c.length!=1)&&e(Error("Start and end points must be 1D"))}F(lf,V);
lf.prototype.Yc=function(){var a=this.coords[0],b=this.element.style;if("opacity"in b)b.opacity=a;else if("MozOpacity"in b)b.MozOpacity=a;else if("filter"in b)b.filter=a===""?"":"alpha(opacity="+a*100+")"};lf.prototype.show=function(){this.element.style.display=""};function mf(a,b,c){lf.call(this,a,1,0,b,c)}F(mf,lf);mf.prototype.Ka=function(){this.show();mf.b.Ka.call(this)};mf.prototype.jc=function(){this.element.style.display="none";mf.b.jc.call(this)};
function nf(a,b,c){lf.call(this,a,0,1,b,c)}F(nf,lf);nf.prototype.Ka=function(){this.show();nf.b.Ka.call(this)};function of(){}ca(of);of.prototype.Sj=0;function pf(a){return":"+(a.Sj++).toString(36)}of.Ea();function qf(a,b){a.setAttribute("role",b);a.Uk=b}function W(a,b,c){a.setAttribute("aria-"+b,c)};function rf(a,b,c,d){this.ga=a||document.body;this.V=Oc(this.ga);this.mk=!a;this.f=n;this.lb="";this.ra=[];this.Tc=[];this.fi=this.Fe=-1;this.U=!1;this.className="ac-renderer";this.sg="ac-row";this.yh="active";this.Ng="ac-active";this.nj="ac-highlighted";this.dd=b||n;this.Fk=d!=n?d:!0;this.Sf=!1;this.ok=c!=n?c:!1;this.Wf=n;this.ff=!1;this.Ne=0}F(rf,fe);r=rf.prototype;r.c=p("f");r.rg=function(a,b,c){this.lb=b;this.ra=a;this.Fe=-1;this.fi=E();this.ba=c;this.Tc=[];sf(this)};
r.Hb=function(){this.ba&&W(this.ba,"activedescendant","");if(this.U)this.U=!1,this.ba&&W(this.ba,"haspopup",!1),this.Ne>0?(Ga(this.D),this.D=new mf(this.f,this.Ne),this.D.play()):Oe(this.f,!1)};r.show=function(){if(!this.U)this.U=!0,this.ba&&(qf(this.ba,"combobox"),W(this.ba,"autocomplete","list"),W(this.ba,"haspopup",!0)),this.Ne>0?(Ga(this.D),this.D=new nf(this.f,this.Ne),this.D.play()):Oe(this.f,!0)};r.$=p("U");
function tf(a,b){var c=b>=0&&b<a.Tc.length?a.Tc[b]:i;if(a.dispatchEvent({type:"rowhilite",Vk:c})&&(uf(a),a.Fe=b,c)){Q(c,a.Ng,a.yh);a.ba&&W(a.ba,"activedescendant",c?c.id:"");var d=a.f,f=He(c),g=He(d),h=Ue(d),j=f.x-g.x-h.left,f=f.y-g.y-h.top,g=d.clientHeight-c.offsetHeight;d.scrollLeft+=Math.min(j,Math.max(j-(d.clientWidth-c.offsetWidth),0));d.scrollTop+=Math.min(f,Math.max(f-g,0))}}function uf(a){a.Fe>=0&&Jc(a.Tc[a.Fe],a.Ng,a.yh)}
r.eb=function(a){if(a==-1)tf(this,-1);else for(var b=0;b<this.ra.length;b++)if(this.ra[b].id==a){tf(this,b);break}};function vf(a){if(!a.f){var b=a.V.t("div",{style:"display:none"});a.f=b;Q(b,a.className);qf(b,"listbox");b.id=pf(of.Ea());a.V.appendChild(a.ga,b);T(b,"click",a.hh,!1,a);T(b,"mousedown",a.De,!1,a);T(a.V.A,"mousedown",a.jh,!1,a);T(b,"mouseover",a.kh,!1,a)}}
function sf(a){vf(a);if(a.ff)a.f.style.visibility="hidden";if(a.Hk)a.f.style.minWidth=a.Hk.clientWidth+"px";a.Tc.length=0;a.V.Vh(a.f);if(a.dd&&a.dd.Ab)a.dd.Ab(a);else{var b=n;Qb(a.ra,function(a){var d=this.lb,f=this.V.t("div",{className:this.sg,id:pf(of.Ea())});qf(f,"option");this.dd&&this.dd.Wh?this.dd.Wh(a,d,f):f.innerHTML=va(a.data.toString());d&&this.Fk&&wf(this,f,d);Q(f,this.sg);this.Tc.push(f);a=f;this.ff?this.f.insertBefore(a,b):this.V.appendChild(this.f,a);b=a},a)}a.ra.length==0?a.Hb():(a.show(),
a.Xd(),Qe(a.f,!0))}r.Xd=function(){if(this.ba&&this.mk){var a=He(this.ba),b=Le(this.ba),c=Le(De(this.ba)),d=Le(this.f);a.y=this.ff?a.y-d.height:a.y+b.height;(this.ok||a.x+d.width>c.width)&&this.Wf!="LEFT"?(a.x=a.x+b.width-d.width,this.Wf="RIGHT"):this.Wf="LEFT";Ke(this.f,a);if(this.ff)this.f.style.visibility="visible"}};
r.i=function(){if(this.f)$d(this.f,"click",this.hh,!1,this),$d(this.f,"mousedown",this.De,!1,this),$d(this.V.A,"mousedown",this.jh,!1,this),$d(this.f,"mouseover",this.kh,!1,this),this.V.removeNode(this.f),this.f=n,this.U=!1;Ga(this.D);delete this.ga;rf.b.i.call(this)};
function wf(a,b,c){if(b.nodeType==3){var d=n;z(c)&&c.length>1&&!a.Sf&&(d=Eb(c,1));c=xf(a,c);if(c.length!=0){for(var f=b.nodeValue,g=RegExp("(.*?)(^|\\W+)("+c+")","gi"),c=[],h=0,j=g.exec(f),k=0;j;)k++,c.push(j[1]),c.push(j[2]),c.push(j[3]),h=g.lastIndex,j=g.exec(f);c.push(f.substring(h));if(c.length>1){d=!a.Sf?1:k;for(f=0;f<d;f++)g=3*f,b.nodeValue=c[g]+c[g+1],h=a.V.createElement("b"),h.className=a.nj,a.V.appendChild(h,a.V.createTextNode(c[g+2])),h=b.parentNode.insertBefore(h,b.nextSibling),b.parentNode.insertBefore(a.V.createTextNode(""),
h.nextSibling),b=h.nextSibling;a=Eb(c,d*3);b.nodeValue=a.join("")}else d&&wf(a,b,d)}}else for(b=b.firstChild;b;)d=b.nextSibling,wf(a,b,c),b=d}function xf(a,b){var c="";if(!b)return c;a.Sf?z(b)?(c=ub(b,function(a){return!/^[\s\xa0]*$/.test(a==n?"":String(a))}),c=vb(c,Ba),c=c.join("|")):(c=b.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,""),c=Ba(c),c=c.replace(/ /g,"|")):c=z(b)?b.length>0?Ba(b[0]):"":Ba(b);return c}
function yf(a,b){for(;b&&b!=a.f&&!yb(Ic(b),a.sg);)b=b.parentNode;return b?tb(a.Tc,b):-1}r.hh=function(a){var b=yf(this,a.target);b>=0&&this.dispatchEvent({type:ie,row:this.ra[b].id});a.stopPropagation()};r.De=function(a){this.dispatchEvent(je);a.stopPropagation();a.preventDefault()};r.jh=function(a){this.ba==a.target?(uf(this),a.stopPropagation()):this.dispatchEvent(ke)};r.kh=function(a){a=yf(this,a.target);a>=0&&!(E()-this.fi<300)&&this.dispatchEvent({type:he,row:this.ra[a].id})};function zf(a){this.oh=a;this.I=[]}F(zf,G);var Af=[];r=zf.prototype;r.h=function(a,b,c,d,f){z(b)||(Af[0]=b,b=Af);for(var g=0;g<b.length;g++)this.I.push(T(a,b[g],c||this,d||!1,f||this.oh||this));return this};r.ca=function(a,b,c,d,f){if(z(b))for(var g=0;g<b.length;g++)this.ca(a,b[g],c,d,f);else{a:{c=c||this;f=f||this.oh||this;d=!!d;if(a=ae(a,b,d))for(b=0;b<a.length;b++)if(!a[b].Sc&&a[b].qd==c&&a[b].capture==d&&a[b].Ee==f){a=a[b];break a}a=n}if(a)a=a.key,U(a),zb(this.I,a)}return this};
r.vd=function(){N(this.I,U);this.I.length=0};r.i=function(){zf.b.i.call(this);this.vd()};r.handleEvent=function(){e(Error("EventHandler.handleEvent not implemented"))};function se(a){var b;a:{var c=0,d=0;if(ue(a))c=a.selectionStart,d=-1;else if(I){var f=ve(a);b=f[0];f=f[1];if(b.inRange(f)){b.setEndPoint("EndToStart",f);if(a.type=="textarea"){f.duplicate();c=a=b.text;for(d=!1;!d;)b.compareEndPoints("StartToEnd",b)==0?d=!0:(b.moveEnd("character",-1),b.text==a?c+="\r\n":d=!0);b=[c.length,-1];break a}c=b.text.length;d=-1}}b=[c,d]}return b[0]}
function ve(a){var b=a.ownerDocument||a.document,c=b.selection.createRange();a.type=="textarea"?(b=b.body.createTextRange(),b.moveToElementText(a)):b=a.createTextRange();return[b,c]}function we(a,b){if(a.type=="textarea")b=a.value.substring(0,b).replace(/(\r\n|\r|\n)/g,"\n").length;return b}function ue(a){try{return typeof a.selectionStart=="number"}catch(b){return!1}};var Bf,Cf;Cf=Bf=!1;var Df=Ta();Df&&(Df.indexOf("Firefox")!=-1||Df.indexOf("Camino")!=-1||(Df.indexOf("iPhone")!=-1||Df.indexOf("iPod")!=-1?Bf=!0:Df.indexOf("iPad")!=-1&&(Cf=!0)));var Ef=Bf,Ff=Cf;function Gf(a,b,c,d,f){if(!I&&(!K||!L("525")))return!0;if(Ra&&f)return Hf(a);if(f&&!d)return!1;if(!c&&(b==17||b==18))return!1;if(I&&d&&b==a)return!1;switch(a){case 13:return!(I&&kb());case 27:return!K}return Hf(a)}
function Hf(a){if(a>=48&&a<=57)return!0;if(a>=96&&a<=106)return!0;if(a>=65&&a<=90)return!0;if(K&&a==0)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}};function If(a,b){a&&this.Hd(a,b)}F(If,fe);r=If.prototype;r.f=n;r.Ie=n;r.Xf=n;r.Je=n;r.gc=-1;r.fc=-1;
var Jf={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Kf={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Lf={61:187,59:186},Mf=I||K&&L("525");r=If.prototype;
r.Lf=function(a){if(K&&(this.gc==17&&!a.ctrlKey||this.gc==18&&!a.altKey))this.fc=this.gc=-1;Mf&&!Gf(a.keyCode,this.gc,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):this.fc=J&&a.keyCode in Lf?Lf[a.keyCode]:a.keyCode};r.gj=function(){this.fc=this.gc=-1};
r.handleEvent=function(a){var b=a.ta,c,d;I&&a.type=="keypress"?(c=this.fc,d=c!=13&&c!=27?b.keyCode:0):K&&a.type=="keypress"?(c=this.fc,d=b.charCode>=0&&b.charCode<63232&&Hf(c)?b.charCode:0):Xa?(c=this.fc,d=Hf(c)?b.keyCode:0):(c=b.keyCode||this.fc,d=b.charCode||0,Ra&&d==63&&!c&&(c=191));var f=c,g=b.keyIdentifier;c?c>=63232&&c in Jf?f=Jf[c]:c==25&&a.shiftKey&&(f=9):g&&g in Kf&&(f=Kf[g]);a=f==this.gc;this.gc=f;b=new Nf(f,d,a,b);try{this.dispatchEvent(b)}finally{b.j()}};r.c=p("f");
r.Hd=function(a,b){this.Je&&this.detach();this.f=a;this.Ie=T(this.f,"keypress",this,b);this.Xf=T(this.f,"keydown",this.Lf,b,this);this.Je=T(this.f,"keyup",this.gj,b,this)};r.detach=function(){if(this.Ie)U(this.Ie),U(this.Xf),U(this.Je),this.Je=this.Xf=this.Ie=n;this.f=n;this.fc=this.gc=-1};r.i=function(){If.b.i.call(this);this.detach()};function Nf(a,b,c,d){d&&this.dc(d,i);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}F(Nf,yd);function Of(a,b,c,d){d=d||150;this.$d=y(a)?a:Pf;this.Qi=this.$d.substring(0,1);a=this.rd?"[\\s"+this.$d+"]+":"[\\s]+";this.mi=RegExp("^"+a+"|"+a+"$","g");this.rk=RegExp("\\s*["+this.$d+"]$");this.Ah=b||"";this.kk=this.rd=c!=n?c:!0;this.v=d>0?new Ve(d):n;this.sa=new zf(this);this.hf=new zf(this);this.L=new If;this.xh=-1}F(Of,G);var Qf=(Ef||Ff)&&!L("533.17.9"),Pf=",;";r=Of.prototype;r.Gk=!0;r.Yi=!0;r.oi=!1;r.tk=!0;r.sk=!0;r.kf=n;r.N=n;r.ag="";r.tc=!1;r.tg=!1;r.ni=!0;r.o=function(){return this.N.value};
r.S=function(a){this.N.value=a};r.of=function(a){for(var b=0;b<arguments.length;b++){var c=arguments[b];ga(c)&&c.nodeType==1&&W(c,"haspopup",!0);this.sa.h(c,"focus",this.Fc);this.sa.h(c,"blur",this.Nb);if(!this.N&&(this.hf.h(c,"keydown",this.bk),ga(c)&&c.nodeType==1)){var d=R(c);(d&&d.activeElement)==c&&Rf(this,c)}}};r.i=function(){Of.b.i.call(this);this.kf!=n&&window.clearTimeout(this.kf);this.sa.j();delete this.sa;this.hf.j();this.L.j()};function Sf(a){a.v?a.v.setInterval(300):a.v=new Ve(300)}
r.cb=function(a){switch(a.keyCode){case 40:if(this.M.Ra())return this.oi?pe(this.M):oe(this.M),a.preventDefault(),!0;else if(!this.rd)return this.update(!0),a.preventDefault(),!0;break;case 38:if(this.M.Ra())return this.oi?oe(this.M):pe(this.M),a.preventDefault(),!0;break;case 9:if(this.M.Ra()&&!a.shiftKey){if(this.update(),le(this.M)&&this.kk)return a.preventDefault(),!0}else this.M.Hb();break;case 13:if(this.M.Ra()){if(this.update(),le(this.M))return a.preventDefault(),a.stopPropagation(),!0}else this.M.Hb();
break;case 27:if(this.M.Ra())return this.M.Hb(),a.preventDefault(),a.stopPropagation(),!0;break;case 229:if(!this.tc){if(!this.tc)this.sa.h(this.N,"keyup",this.Ph),this.sa.h(this.N,"keypress",this.Oh),this.tc=!0;return!0}break;default:this.v&&!this.ni&&(this.v.stop(),this.v.start())}return Tf(this,a)};function Tf(a,b){var c=a.rd&&b.charCode&&a.$d.indexOf(String.fromCharCode(b.charCode))!=-1;a.tk&&c&&a.update();return a.sk&&c&&le(a.M)?(b.preventDefault(),!0):!1}r.fj=q(!1);
r.Fc=function(a){Rf(this,a.target||n)};function Rf(a,b){a.hf.vd();a.M&&me(a.M);if(b!=a.N)a.N=b,a.v&&(a.v.start(),a.sa.h(a.v,Xe,a.sd)),a.ag=a.o(),a.L.Hd(a.N),a.sa.h(a.L,"key",a.Qh),I&&a.sa.h(a.N,"keypress",a.Nh)}r.Nb=function(){Qf?this.kf=window.setTimeout(D(this.Sh,this),0):this.Sh()};
r.Sh=function(){if(this.N)this.sa.ca(this.L,"key",this.Qh),this.L.detach(),this.sa.ca(this.N,"keyup",this.fj),I&&this.sa.ca(this.N,"keypress",this.Nh),this.tc&&Uf(this),this.N=n,this.v&&(this.v.stop(),this.sa.ca(this.v,Xe,this.sd)),this.M&&ne(this.M)};r.sd=function(){this.update()};r.bk=function(a){this.Fc(a)};r.Qh=function(a){this.xh=a.keyCode;this.M&&this.cb(a)};r.Oh=function(){this.tc&&this.xh!=229&&Uf(this)};r.Ph=function(a){this.tc&&(a.keyCode==13||a.keyCode==77&&a.ctrlKey)&&Uf(this)};
function Uf(a){if(a.tc)a.tc=!1,a.sa.ca(a.N,"keypress",a.Oh),a.sa.ca(a.N,"keyup",a.Ph)}r.Nh=function(a){Tf(this,a)};r.update=function(a){if(this.N&&(a||this.o()!=this.ag)){if(a||!this.tg){var a=se(this.N),b=this.o(),a=te(this,b)[re(this,b,a)],a=this.mi?String(a).replace(this.mi,""):a;if(this.M&&(this.M.ba=this.N,b=this.M,this.o(),b.lb!=a))b.lb=a,rd(b.Sd,b.lb,b.Cj,D(b.Bj,b)),me(b)}this.ag=this.o()}this.tg=!1};
function re(a,b,c){a=te(a,b);if(c==b.length)return a.length-1;for(var d=b=0,f=0;d<a.length&&f<=c;d++)f+=a[d].length,b=d;return b}function te(a,b){if(!a.rd)return[b];for(var c=String(b).split(""),d=[],f=[],g=0,h=!1;g<c.length;g++)if(a.Ah&&a.Ah.indexOf(c[g])!=-1){if(a.Yi&&!h)d.push(f.join("")),f.length=0;f.push(c[g]);h=!h}else!h&&a.$d.indexOf(c[g])!=-1?(f.push(c[g]),d.push(f.join("")),f.length=0):f.push(c[g]);d.push(f.join(""));return d};function Vf(a,b,c){var d=new rf(n,{Wh:function(a,b,c){c.innerHTML=a.data.display_name+" ("+a.data.type+")"}});this.Sd=new qd(b,c);b=new Of(n,n,!1);Sf(b);b.ni=!1;b.M=this;b.of(a);ge.call(this,this.Sd,d,b);this.addEventListener("update",function(b){a.value=b.row.display_name})}F(Vf,ge);Vf.prototype.search=function(a,b,c){rd(this.Sd,a,b,c)};function Wf(){this.Uh=E()}new Wf;Wf.prototype.set=ba("Uh");Wf.prototype.get=p("Uh");function Xf(a,b){this.rb=Ed?[]:"";a!=n&&this.append.apply(this,arguments)}Xf.prototype.set=function(a){this.clear();this.append(a)};Ed?(Xf.prototype.rf=0,Xf.prototype.append=function(a,b,c){b==n?this.rb[this.rf++]=a:(this.rb.push.apply(this.rb,arguments),this.rf=this.rb.length);return this}):Xf.prototype.append=function(a,b,c){this.rb+=a;if(b!=n)for(var d=1;d<arguments.length;d++)this.rb+=arguments[d];return this};Xf.prototype.clear=function(){Ed?this.rf=this.rb.length=0:this.rb=""};
Xf.prototype.toString=function(){if(Ed){var a=this.rb.join("");this.clear();a&&this.append(a);return a}else return this.rb};function Yf(a){ec.call(this,a||"OpenStreetMaps")}F(Yf,ec);Yf.prototype.bb=q(18);Yf.prototype.Lb=q(256);Yf.prototype.Nd=function(a,b,c){var d=["a","b","c"];return(new Xf("http://",d[fc(d.length)],".tile.openstreetmap.org/",a,"/",b,"/",c,".png")).toString()};Yf.prototype.uc=function(a){Yc(a,"\u00a9 ",S("a",{href:"http://www.openstreetmap.org/"},"OpenStreetMap")," contributors, CC-BY-SA")};function Zf(){Yf.call(this,"MapQuest OSM")}F(Zf,Yf);Zf.prototype.Nd=function(a,b,c){return(new Xf("http://otile",1+fc(3),".mqcdn.com/tiles/1.0.0/osm/",a,"/",b,"/",c,".png")).toString()};Zf.prototype.uc=function(a){Yc(a,"Map data \u00a9 ",S("a",{href:"http://www.openstreetmap.org/"},"OpenStreetMap")," contributors, CC-BY-SA",S("br"));Yc(a,"Tiles Courtesy of ",S("a",{href:"http://open.mapquest.co.uk/"},"MapQuest")," ",S("img",{src:"http://developer.mapquest.com/content/osm/mq_logo.png",border:0}))};function $f(a){this.V=a||Oc();this.Zd=ag}F($f,fe);$f.prototype.oj=of.Ea();var ag=n;function bg(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}e(Error("Invalid component state"))}r=$f.prototype;r.fb=n;r.H=!1;r.f=n;r.Zd=n;r.hg=n;r.ga=n;r.ma=n;r.Na=n;r.qi=!1;
function cg(a){return a.fb||(a.fb=pf(a.oj))}function dg(a,b){if(a.ga&&a.ga.Na){var c=a.ga.Na,d=a.fb;d in c&&delete c[d];qb(a.ga.Na,b,a)}a.fb=b}r.c=p("f");r.ua=function(){return this.md||(this.md=new zf(this))};function eg(a,b){a==b&&e(Error("Unable to set parent component"));b&&a.ga&&a.fb&&fg(a.ga,a.fb)&&a.ga!=b&&e(Error("Unable to set parent component"));a.ga=b;$f.b.vg.call(a,b)}r.getParent=p("ga");r.vg=function(a){this.ga&&this.ga!=a&&e(Error("Method not supported"));$f.b.vg.call(this,a)};r.Y=p("V");
r.t=function(){this.f=this.V.createElement("div")};r.Ab=function(a){gg(this,a)};function gg(a,b,c){a.H&&e(Error("Component already rendered"));a.f||a.t();b?b.insertBefore(a.f,c||n):a.V.A.body.appendChild(a.f);(!a.ga||a.ga.H)&&a.da()}r.ka=function(a){if(this.H)e(Error("Component already rendered"));else if(a&&this.Za(a)){this.qi=!0;if(!this.V||this.V.A!=R(a))this.V=Oc(a);this.tb(a);this.da()}else e(Error("Invalid element to decorate"))};r.Za=q(!0);r.tb=ba("f");
r.da=function(){this.H=!0;hg(this,function(a){!a.H&&a.c()&&a.da()})};r.Pa=function(){hg(this,function(a){a.H&&a.Pa()});this.md&&this.md.vd();this.H=!1};r.i=function(){$f.b.i.call(this);this.H&&this.Pa();this.md&&(this.md.j(),delete this.md);hg(this,function(a){a.j()});!this.qi&&this.f&&$c(this.f);this.ga=this.hg=this.f=this.Na=this.ma=n};r.Dd=function(a,b){this.Ed(a,ig(this),b)};
r.Ed=function(a,b,c){a.H&&(c||!this.H)&&e(Error("Component already rendered"));(b<0||b>ig(this))&&e(Error("Child component index out of bounds"));if(!this.Na||!this.ma)this.Na={},this.ma=[];a.getParent()==this?(this.Na[cg(a)]=a,zb(this.ma,a)):qb(this.Na,cg(a),a);eg(a,this);Db(this.ma,b,0,a);a.H&&this.H&&a.getParent()==this?(c=this.X(),c.insertBefore(a.c(),c.childNodes[b]||n)):c?(this.f||this.t(),b=jg(this,b+1),gg(a,this.X(),b?b.f:n)):this.H&&!a.H&&a.f&&a.da()};r.X=p("f");
function kg(a){if(a.Zd==n)a.Zd=Ie(a.H?a.f:a.V.A.body);return a.Zd}r.Ad=function(a){this.H&&e(Error("Component already rendered"));this.Zd=a};function ig(a){return a.ma?a.ma.length:0}function fg(a,b){return a.Na&&b?(b in a.Na?a.Na[b]:i)||n:n}function jg(a,b){return a.ma?a.ma[b]||n:n}function hg(a,b,c){a.ma&&N(a.ma,b,c)}function lg(a,b){return a.ma&&b?tb(a.ma,b):-1}
r.removeChild=function(a,b){if(a){var c=C(a)?a:cg(a),a=fg(this,c);if(c&&a){var d=this.Na;c in d&&delete d[c];zb(this.ma,a);b&&(a.Pa(),a.f&&$c(a.f));eg(a,n)}}a||e(Error("Child is not in parent component"));return a};r.Vh=function(a){for(;this.ma&&this.ma.length!=0;)this.removeChild(jg(this,0),a)};function mg(){}var ng;ca(mg);r=mg.prototype;r.vb=aa();r.t=function(a){var b=a.Y().t("div",this.jd(a).join(" "),a.getContent());this.Ye(a,b);return b};r.X=function(a){return a};r.Jd=function(a,b,c){if(a=a.c?a.c():a)if(I&&!L("7")){var d=og(Ic(a),b);d.push(b);ma(c?Q:Jc,a).apply(n,d)}else c?Q(a,b):Jc(a,b)};r.Za=q(!0);
r.ka=function(a,b){b.id&&dg(a,b.id);var c=this.X(b);c&&c.firstChild?pg(a,c.firstChild.nextSibling?Bb(c.childNodes):c.firstChild):a.ad=n;var d=0,f=this.r(),g=this.r(),h=!1,j=!1,c=!1,k=Ic(b);N(k,function(a){!h&&a==f?(h=!0,g==f&&(j=!0)):!j&&a==g?j=!0:d|=this.If(a)},this);a.p=d;h||(k.push(f),g==f&&(j=!0));j||k.push(g);var l=a.ab;l&&k.push.apply(k,l);if(I&&!L("7")){var o=og(k);o.length>0&&(k.push.apply(k,o),c=!0)}if(!h||!j||l||c)b.className=k.join(" ");this.Ye(a,b);return b};
r.pd=function(a){kg(a)&&this.Ad(a.c(),!0);a.isEnabled()&&this.pc(a,a.$())};r.Ye=function(a,b){a.isEnabled()||this.Ia(b,1,!0);a.p&8&&this.Ia(b,8,!0);a.T&16&&this.Ia(b,16,!!(a.p&16));a.T&64&&this.Ia(b,64,a.Ra())};r.ae=function(a,b){Qe(a,!b,!I&&!Xa)};r.Ad=function(a,b){this.Jd(a,this.r()+"-rtl",b)};r.ec=function(a){var b;return a.T&32&&(b=a.Z())?fd(b):!1};r.pc=function(a,b){var c;if(a.T&32&&(c=a.Z())){if(!b&&a.p&32){try{c.blur()}catch(d){}a.p&32&&a.Nb(n)}if(fd(c)!=b)b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex"))}};
r.setVisible=function(a,b){Oe(a,b)};r.Ha=function(a,b,c){var d=a.c();if(d){var f=this.Ld(b);f&&this.Jd(a,f,c);this.Ia(d,b,c)}};r.Ia=function(a,b,c){ng||(ng={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=ng[b])&&W(a,b,c)};r.setContent=function(a,b){var c=this.X(a);if(c&&(Zc(c),b))if(C(b))cd(c,b);else{var d=function(a){if(a){var b=R(c);c.appendChild(C(a)?b.createTextNode(a):a)}};z(b)?N(b,d):B(b)&&!("nodeType"in b)?N(Bb(b),d):d(b)}};r.Z=function(a){return a.c()};r.r=q("goog-control");
r.jd=function(a){var b=this.r(),c=[b],d=this.r();d!=b&&c.push(d);b=a.p;for(d=[];b;){var f=b&-b;d.push(this.Ld(f));b&=~f}c.push.apply(c,d);(a=a.ab)&&c.push.apply(c,a);I&&!L("7")&&c.push.apply(c,og(c));return c};function og(a,b){var c=[];b&&(a=a.concat([b]));N([],function(d){wb(d,ma(yb,a))&&(!b||yb(d,b))&&c.push(d.join("_"))});return c}r.Ld=function(a){this.qe||qg(this);return this.qe[a]};
r.If=function(a){if(!this.ii){this.qe||qg(this);var b=this.qe,c={},d;for(d in b)c[b[d]]=d;this.ii=c}a=parseInt(this.ii[a],10);return isNaN(a)?0:a};function qg(a){var b=a.r();a.qe={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function rg(a,b){a||e(Error("Invalid class name "+a));fa(b)||e(Error("Invalid decorator function "+b));sg[a]=b}var tg={},sg={};function X(a,b,c){$f.call(this,c);if(!b){for(var b=this.constructor,d;b;){d=ha(b);if(d=tg[d])break;b=b.b?b.b.constructor:n}b=d?fa(d.Ea)?d.Ea():new d:n}this.k=b;this.ad=a}F(X,$f);r=X.prototype;r.ad=n;r.p=0;r.T=39;r.pf=255;r.cf=0;r.U=!0;r.ab=n;r.Nf=!0;r.oe=!1;r.Ve=n;function ug(a,b){a.H&&b!=a.Nf&&vg(a,b);a.Nf=b}r.Z=function(){return this.k.Z(this)};r.Ae=function(){return this.L||(this.L=new If)};function wg(a,b){if(b)a.ab?yb(a.ab,b)||a.ab.push(b):a.ab=[b],a.k.Jd(a,b,!0)}
r.Jd=function(a,b){if(b)wg(this,a);else if(a&&this.ab){zb(this.ab,a);if(this.ab.length==0)this.ab=n;this.k.Jd(this,a,!1)}};r.t=function(){var a=this.k.t(this);this.f=a;var b=this.Ve||this.k.vb();b&&qf(a,b);this.oe||this.k.ae(a,!1);this.$()||this.k.setVisible(a,!1)};r.X=function(){return this.k.X(this.c())};r.Za=function(a){return this.k.Za(a)};r.tb=function(a){this.f=a=this.k.ka(this,a);var b=this.Ve||this.k.vb();b&&qf(a,b);this.oe||this.k.ae(a,!1);this.U=a.style.display!="none"};
r.da=function(){X.b.da.call(this);this.k.pd(this);if(this.T&-2&&(this.Nf&&vg(this,!0),this.T&32)){var a=this.Z();if(a){var b=this.Ae();b.Hd(a);this.ua().h(b,"key",this.cb).h(a,"focus",this.Fc).h(a,"blur",this.Nb)}}};function vg(a,b){var c=a.ua(),d=a.c();b?(c.h(d,"mouseover",a.Pf).h(d,"mousedown",a.Gc).h(d,"mouseup",a.Hc).h(d,"mouseout",a.Of),I&&c.h(d,"dblclick",a.ih)):(c.ca(d,"mouseover",a.Pf).ca(d,"mousedown",a.Gc).ca(d,"mouseup",a.Hc).ca(d,"mouseout",a.Of),I&&c.ca(d,"dblclick",a.ih))}
r.Pa=function(){X.b.Pa.call(this);this.L&&this.L.detach();this.$()&&this.isEnabled()&&this.k.pc(this,!1)};r.i=function(){X.b.i.call(this);this.L&&(this.L.j(),delete this.L);delete this.k;this.ab=this.ad=n};r.getContent=p("ad");r.setContent=function(a){this.k.setContent(this.c(),a);this.ad=a};function pg(a,b){a.ad=b}
r.hd=function(){var a=this.getContent();if(!a)return"";if(!C(a))if(z(a))a=vb(a,gd).join("");else{if(Nc&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];hd(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Nc||(a=a.replace(/ +/g," "));a!=" "&&(a=a.replace(/^\s*/,""))}return ra(a)};r.Ad=function(a){X.b.Ad.call(this,a);var b=this.c();b&&this.k.Ad(b,a)};r.ae=function(a){this.oe=a;var b=this.c();b&&this.k.ae(b,a)};r.$=p("U");
r.setVisible=function(a,b){if(b||this.U!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.c();c&&this.k.setVisible(c,a);this.isEnabled()&&this.k.pc(this,a);this.U=a;return!0}return!1};r.isEnabled=function(){return!(this.p&1)};r.oc=function(a){var b=this.getParent();if((!b||typeof b.isEnabled!="function"||b.isEnabled())&&xg(this,1,!a))a||(this.setActive(!1),this.Bb(!1)),this.$()&&this.k.pc(this,a),this.Ha(1,!a)};r.Bb=function(a){xg(this,2,a)&&this.Ha(2,a)};
r.setActive=function(a){xg(this,4,a)&&this.Ha(4,a)};r.xg=function(a){xg(this,8,a)&&this.Ha(8,a)};r.Ra=function(){return!!(this.p&64)};r.R=function(a){xg(this,64,a)&&this.Ha(64,a)};r.Ha=function(a,b){if(this.T&a&&b!=!!(this.p&a))this.k.Ha(this,a,b),this.p=b?this.p|a:this.p&~a};function yg(a,b,c){a.H&&a.p&b&&!c&&e(Error("Component already rendered"));!c&&a.p&b&&a.Ha(b,!1);a.T=c?a.T|b:a.T&~b}function zg(a,b){return!!(a.pf&b)&&!!(a.T&b)}
function xg(a,b,c){return!!(a.T&b)&&!!(a.p&b)!=c&&(!(a.cf&b)||a.dispatchEvent(bg(b,c)))&&!a.ve}r.Pf=function(a){(!a.relatedTarget||!bd(this.c(),a.relatedTarget))&&this.dispatchEvent("enter")&&this.isEnabled()&&zg(this,2)&&this.Bb(!0)};r.Of=function(a){if((!a.relatedTarget||!bd(this.c(),a.relatedTarget))&&this.dispatchEvent("leave"))zg(this,4)&&this.setActive(!1),zg(this,2)&&this.Bb(!1)};
r.Gc=function(a){this.isEnabled()&&(zg(this,2)&&this.Bb(!0),Bd(a)&&(zg(this,4)&&this.setActive(!0),this.k.ec(this)&&this.Z().focus()));!this.oe&&Bd(a)&&a.preventDefault()};r.Hc=function(a){this.isEnabled()&&(zg(this,2)&&this.Bb(!0),this.p&4&&this.td(a)&&zg(this,4)&&this.setActive(!1))};r.ih=function(a){this.isEnabled()&&this.td(a)};
r.td=function(a){if(zg(this,16)){var b=!(this.p&16);xg(this,16,b)&&this.Ha(16,b)}zg(this,8)&&this.xg(!0);zg(this,64)&&this.R(!this.Ra());b=new vd("action",this);if(a)for(var c=["altKey","ctrlKey","metaKey","shiftKey","platformModifierKey"],d,f=0;d=c[f];f++)b[d]=a[d];return this.dispatchEvent(b)};r.Fc=function(){zg(this,32)&&xg(this,32,!0)&&this.Ha(32,!0)};r.Nb=function(){zg(this,4)&&this.setActive(!1);zg(this,32)&&xg(this,32,!1)&&this.Ha(32,!1)};
r.cb=function(a){return this.$()&&this.isEnabled()&&this.nd(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};r.nd=function(a){return a.keyCode==13&&this.td(a)};fa(X)||e(Error("Invalid component class "+X));fa(mg)||e(Error("Invalid renderer class "+mg));var Ag=ha(X);tg[Ag]=mg;rg("goog-control",function(){return new X(n)});function Bg(){}F(Bg,mg);ca(Bg);r=Bg.prototype;r.vb=q("button");r.Ia=function(a,b,c){b==16?W(a,"pressed",c):Bg.b.Ia.call(this,a,b,c)};r.t=function(a){var b=Bg.b.t.call(this,a),c=a.Od();c&&this.yg(b,c);(c=a.o())&&this.S(b,c);a.T&16&&this.Ia(b,16,!!(a.p&16));return b};r.ka=function(a,b){var b=Bg.b.ka.call(this,a,b),c=this.o(b);a.mb=c;a.Gg=this.Od(b);a.T&16&&this.Ia(b,16,!!(a.p&16));return b};r.o=t;r.S=t;r.Od=function(a){return a.title};r.yg=function(a,b){if(a)a.title=b||""};r.r=q("goog-button");function Cg(){}F(Cg,Bg);ca(Cg);r=Cg.prototype;r.vb=aa();r.t=function(a){ug(a,!1);a.pf&=-256;yg(a,32,!1);return a.Y().t("button",{"class":this.jd(a).join(" "),disabled:!a.isEnabled(),title:a.Od()||"",value:a.o()||""},a.hd()||"")};r.Za=function(a){return a.tagName=="BUTTON"||a.tagName=="INPUT"&&(a.type=="button"||a.type=="submit"||a.type=="reset")};r.ka=function(a,b){ug(a,!1);a.pf&=-256;yg(a,32,!1);b.disabled&&Q(b,this.Ld(1));return Cg.b.ka.call(this,a,b)};r.pd=function(a){a.ua().h(a.c(),"click",a.td)};
r.ae=t;r.Ad=t;r.ec=function(a){return a.isEnabled()};r.pc=t;r.Ha=function(a,b,c){Cg.b.Ha.call(this,a,b,c);if((a=a.c())&&b==1)a.disabled=c};r.o=function(a){return a.value};r.S=function(a,b){if(a)a.value=b};r.Ia=t;function Dg(a,b,c){X.call(this,a,b||Cg.Ea(),c)}F(Dg,X);r=Dg.prototype;r.o=p("mb");r.S=function(a){this.mb=a;this.k.S(this.c(),a)};r.Od=p("Gg");r.yg=function(a){this.Gg=a;this.k.yg(this.c(),a)};r.i=function(){Dg.b.i.call(this);delete this.mb;delete this.Gg};r.da=function(){Dg.b.da.call(this);if(this.T&32){var a=this.Z();a&&this.ua().h(a,"keyup",this.nd)}};r.nd=function(a){return a.keyCode==13&&a.type=="key"||a.keyCode==32&&a.type=="keyup"?this.td(a):a.keyCode==32};rg("goog-button",function(){return new Dg(n)});function Eg(){}F(Eg,Bg);ca(Eg);r=Eg.prototype;r.t=function(a){var b={"class":"goog-inline-block "+this.jd(a).join(" "),title:a.Od()||""},b=a.Y().t("div",b,this.se(a.getContent(),a.Y()));this.Ye(a,b);return b};r.vb=q("button");r.Ye=function(a,b){a.isEnabled()||this.Ia(b,1,!0);a.p&8&&this.Ia(b,8,!0);a.T&16&&this.Ia(b,16,!0);a.Ra()&&this.Ia(b,64,!0)};r.X=function(a){return a&&a.firstChild.firstChild};
r.se=function(a,b){return b.t("div","goog-inline-block "+(this.r()+"-outer-box"),b.t("div","goog-inline-block "+(this.r()+"-inner-box"),a))};r.Za=function(a){return a.tagName=="DIV"};r.ka=function(a,b){Fg(b,!0);Fg(b,!1);var c;a:{if((c=a.Y().dh(b))&&c.className.indexOf(this.r()+"-outer-box")!=-1)if((c=a.Y().dh(c))&&c.className.indexOf(this.r()+"-inner-box")!=-1){c=!0;break a}c=!1}c||b.appendChild(this.se(b.childNodes,a.Y()));Q(b,"goog-inline-block",this.r());return Eg.b.ka.call(this,a,b)};r.r=q("goog-custom-button");
function Fg(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(c.nodeType==3){var f=c.nodeValue;if(sa(f)=="")a.removeChild(c);else{c.nodeValue=b?f.replace(/^[\s\xa0]+/,""):f.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function Gg(a,b,c){Dg.call(this,a,b||Eg.Ea(),c)}F(Gg,Dg);rg("goog-custom-button",function(){return new Gg(n)});function Z(a,b){if(a instanceof Z)this.B=a.ge();else{var c;if(c=B(a))a:{for(var d=c=0;d<a.length;d++){if(!B(a[d])||c>0&&a[d].length!=c){c=!1;break a}for(var f=0;f<a[d].length;f++)if(!ea(a[d][f])){c=!1;break a}if(c==0)c=a[d].length}c=c!=0}c?this.B=Bb(a):a instanceof Kc?this.B=Hg(a.height,a.width):ea(a)&&ea(b)&&a>0&&b>0?this.B=Hg(a,b):e(Error("Invalid argument(s) for Matrix contructor"))}this.m=new Kc(this.B[0].length,this.B.length)}
function Ig(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new Z(b)}function Jg(a,b,c){for(var d=0;d<a.Kb().height;d++)for(var f=0;f<a.Kb().width;f++)b.call(c,a.B[d][f],d,f,a)}function Kg(a,b){var c=new Z(a.Kb());Jg(a,function(d,f,g){c.B[f][g]=b.call(i,d,f,g,a)});return c}function Hg(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var f=0;f<b;f++)c[d][f]=0}return c}r=Z.prototype;
r.add=function(a){Lc(this.m,a.Kb())||e(Error("Matrix summation is only supported on arrays of equal size"));return Kg(this,function(b,c,d){return b+a.B[c][d]})};function Lg(a,b){a.m.height!=b.Kb().height&&e(Error("The given matrix has height "+b.m.height+", but  needs to have height "+a.m.height+"."));var c=new Z(a.m.height,a.m.width+b.m.width);Jg(a,function(a,b,g){c.B[b][g]=a});Jg(b,function(a,b,g){c.B[b][this.m.width+g]=a},a);return c}
r.equals=function(a,b){if(this.m.width!=a.m.width)return!1;if(this.m.height!=a.m.height)return!1;for(var c=b||0,d=0;d<this.m.height;d++)for(var f=0;f<this.m.width;f++)if(!(Math.abs(this.B[d][f]-a.B[d][f])<=(c||1.0E-6)))return!1;return!0};r.Kb=p("m");function Mg(a){var b=new Z(a.m.width,a.m.height);Jg(a,function(a,d,f){b.B[f][d]=a});return b}function Ng(a,b,c){return!(b>=0&&b<a.m.height&&c>=0&&c<a.m.width)?n:a.B[b][c]}
function Og(a,b,c,d){b>=0&&b<a.m.height&&c>=0&&c<a.m.width||e(Error("Index out of bounds when setting matrix value, ("+b+","+c+") in size ("+a.m.height+","+a.m.width+")"));a.B[b][c]=d}r.multiply=function(a){if(a instanceof Z)return this.m.width!=a.Kb().height&&e(Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.")),Pg(this,a);else if(ea(a))return Qg(this,a);else e(Error("A matrix can only be multiplied by a number or another matrix."))};
r.Dg=function(a){Lc(this.m,a.Kb())||e(Error("Matrix subtraction is only supported on arrays of equal size."));return Kg(this,function(b,c,d){return b-a.B[c][d]})};r.ge=p("B");function Rg(a,b,c,d){var f=new Z((c?c:a.m.height-1)-0+1,(d?d:a.m.width-1)-b+1);Jg(f,function(a,c,d){f.B[c][d]=this.B[0+c][b+d]},a);return f}function Pg(a,b){var c=new Z(a.m.height,b.Kb().width);Jg(c,function(a,f,g){for(var h=a=0;h<this.m.width;h++)a+=Ng(this,f,h)*Ng(b,h,g);Og(c,f,g,a)},a);return c}
function Qg(a,b){return Kg(a,function(a){return a*b})};function Sg(){this.wa=Ig(4)}Sg.prototype.translate=function(a,b,c){this.wa=this.wa.multiply(new Z([[1,0,0,a],[0,1,0,b],[0,0,1,c],[0,0,0,1]]))};Sg.prototype.scale=function(a,b,c){this.wa=this.wa.multiply(new Z([[a,0,0,0],[0,b,0,0],[0,0,c,0],[0,0,0,1]]))};function Tg(a,b){var c=Math.cos(b),d=Math.sin(b);a.wa=a.wa.multiply(new Z([[1,0,0,0],[0,c,-d,0],[0,d,c,0],[0,0,0,1]]))}function Ug(a,b){var c=Math.cos(b),d=Math.sin(b);a.wa=a.wa.multiply(new Z([[c,-d,0,0],[d,c,0,0],[0,0,1,0],[0,0,0,1]]))};function Vg(a,b,c){function d(a,b){try{var c=a.getContext(b);if(y(c))return c}catch(d){}return n}for(var f=n,g=["webgl","experimental-webgl"],h=0;w(f)&&h<g.length;++h)f=f||d(a,g[h]);w(f)&&(u(c)?c():e(Error("unable to get a valid WebGL context")));f.enable(f.CULL_FACE);f.cullFace(f.BACK);f.clearColor(0,0,0,0);f.clearDepth(1);f.enable(f.DEPTH_TEST);f.depthFunc(f.LEQUAL);f.blendFunc(f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA);this.canvas=a;this.Ef=b||n;this.g=f;this.pb=a.width;this.ob=a.height;f.viewport(0,0,
this.pb,this.ob);this.ne=this.Cc=0;this.me=1;this.Gd=this.pb/this.ob;this.Qc=Ig(4);this.Ga=new Sg;this.Pe=this.Oe=this.Qc;this.Ff=this.ye=this.Zf=this.Qg=this.Df=0;T(s,"resize",this.We,!1,this)}function Wg(a){a.Cc=P(50);a.ne=1.0E-6;a.me=5;a.Gd=a.pb/a.ob;Xg(a)}function Xg(a){var b=1/Math.tan(a.Cc/2);a.Qc=new Z([[b/a.Gd,0,0,0],[0,b,0,0],[0,0,0,0],[0,0,-1,0]]);Yg(a)}function Yg(a){var b=a.ne-a.me;Og(a.Qc,2,2,(a.me+a.ne)/b);Og(a.Qc,2,3,2*a.me*a.ne/b)}
Vg.prototype.We=function(){this.pb=this.canvas.width=this.canvas.clientWidth;this.ob=this.canvas.height=this.canvas.clientHeight;this.g.viewport(0,0,this.pb,this.ob);this.Gd=this.pb/this.ob;Xg(this);Zg(this.n)};Vg.prototype.n=n;
function $g(a){a.Oe=a.Qc.multiply(a.Ga.wa);var b,c=a.Oe;c.m.width!=c.m.height&&e(Error("An inverse can only be taken on a square matrix."));b=Ig(c.m.height);a:{for(var c=Lg(c,b),d=new Z(c),f=0,g=0;g<d.m.height;g++){if(f>=d.m.width)break;for(var h=g;d.B[h][f]==0;)if(h++,h==d.m.height&&(h=g,f++,f==d.m.width)){c=d;break a}var j=c,k=g,l=j.B[h];j.B[h]=j.B[k];j.B[k]=l;h=d.B[g][f];for(j=f;j<d.m.width;j++)d.B[g][j]/=h;for(h=0;h<d.m.height;h++)if(h!=g){k=d.B[h][f];for(j=f;j<d.m.width;j++)d.B[h][j]-=k*d.B[g][j]}f++}c=
d}b=!Rg(c,0,b.m.width-1,b.m.height-1).equals(b)?n:Rg(c,b.m.width);a.Pe=b;return a.Oe}Vg.prototype.jg=t;Vg.prototype.Wd="";function ah(a,b,c){c=a.g.createShader(c);a.g.shaderSource(c,b);a.g.compileShader(c);a.g.getShaderParameter(c,a.g.COMPILE_STATUS)?w(c)&&e(Error("Unknown")):e(Error("Shader err: "+a.g.getShaderInfoLog(c)));return c};var bh={"earth-fs-overlay.glsl":"precision mediump float;uniform sampler2D uBufferL0A;uniform sampler2D uBufferL1A;uniform sampler2D uBufferL2A;uniform sampler2D uBufferLnA;varying float vFallbackA;varying vec2 vTCA;uniform sampler2D uBufferL0B;uniform sampler2D uBufferL1B;uniform sampler2D uBufferL2B;varying float vFallbackB;varying vec2 vTCB;uniform float uMixFactor;void main(){float fallbackA=floor(vFallbackA+0.5);vec4 colorA;if(fallbackA==0.0){colorA=texture2D(uBufferL0A,vTCA);}else if(fallbackA==1.0){colorA=texture2D(uBufferL1A,vTCA);}else if(fallbackA==2.0){colorA=texture2D(uBufferL2A,vTCA);}else if(fallbackA==-1.0){colorA=texture2D(uBufferLnA,vTCA);}else{discard;}float fallbackB=floor(vFallbackB+0.5);vec4 colorB=vec4(0.0);if(fallbackB==0.0){colorB=texture2D(uBufferL0B,vTCB);}else if(fallbackB==1.0){colorB=texture2D(uBufferL1B,vTCB);}else if(fallbackB==2.0){colorB=texture2D(uBufferL2B,vTCB);}gl_FragColor=mix(colorA,colorB,uMixFactor*colorB.a);}",
"earth-fs.glsl":"precision mediump float;uniform sampler2D uBufferL0A;uniform sampler2D uBufferL1A;uniform sampler2D uBufferL2A;uniform sampler2D uBufferLnA;varying float vFallbackA;varying vec2 vTCA;void main(){float fallback=floor(vFallbackA+0.5);if(fallback==0.0){gl_FragColor=texture2D(uBufferL0A,vTCA);}else if(fallback==1.0){gl_FragColor=texture2D(uBufferL1A,vTCA);}else if(fallback==2.0){gl_FragColor=texture2D(uBufferL2A,vTCA);}else if(fallback==-1.0){gl_FragColor=texture2D(uBufferLnA,vTCA);}else{discard;}}",
"earth-vs-overlay.glsl":"#define BUFF_SIDE 4.0\n#define BUFF_SIZE 16\n#define TERRAIN %TERRAIN_BOOL%\n#define BUFF_SIDE_T %BUFFER_SIDE_T_FLOAT%\n#define BUFF_SIZE_T int(BUFF_SIDE_T*BUFF_SIDE_T)\nprecision highp float;const float PI=3.1415927;const float PI2=6.2831855;const float EARTH_RADIUS=6378137.0;const float TERRAIN_MIN=-10000.0;const float TERRAIN_MAX=12000.0;attribute vec2 aVertexPosition;attribute vec2 aTextureCoord;uniform mat4 uMVPMatrix;uniform float uTileCount;uniform vec2 uOffset;uniform float uMetaL0A[BUFF_SIZE];uniform float uMetaL1A[BUFF_SIZE];uniform float uMetaL2A[BUFF_SIZE];uniform vec2 uOffLA[3];varying float vFallbackA;varying vec2 vTCA;uniform float uMetaL0B[BUFF_SIZE];uniform float uMetaL1B[BUFF_SIZE];uniform float uMetaL2B[BUFF_SIZE];uniform vec2 uOffLB[3];varying float vFallbackB;varying vec2 vTCB;\n#if TERRAIN\nuniform float uMetaL0T[BUFF_SIZE_T];uniform float uMetaL1T[BUFF_SIZE_T];uniform vec2 uOffLT[2];uniform sampler2D uBufferL0T;uniform sampler2D uBufferL1T;uniform sampler2D uBufferLnT;uniform float uDegradationT;bool validateOffsetT(vec2 off){return off.x>=0.0&&off.y>=0.0&&off.x<BUFF_SIDE_T&&off.y<BUFF_SIDE_T;}\n#endif\nbool validateOffset(vec2 off){return off.x>=0.0&&off.y>=0.0&&off.x<BUFF_SIDE&&off.y<BUFF_SIDE;}vec2 modFirst(vec2 x,float y){return vec2(x.x-y*floor(x.x/y),x.y);}void main(){vec2 phi=PI2*(aVertexPosition+uOffset)/uTileCount;vec2 tileCoords=vec2(mod(aVertexPosition.x-aTextureCoord.x+uOffset.x+uTileCount*0.5,uTileCount),-aTextureCoord.y-aVertexPosition.y-uOffset.y+uTileCount*0.5);float elev=0.0;\n#if TERRAIN\nvec2 TCT;float fallbackT=-1.0;float degradationModifier=exp2(uDegradationT);vec2 offT=modFirst(tileCoords/degradationModifier-uOffLT[0],uTileCount/degradationModifier);vec2 rawElev;if(validateOffsetT(offT)&&uMetaL0T[int(floor(offT.y)*BUFF_SIDE_T+offT.x)]==1.0){fallbackT=0.0;}else{offT=modFirst((tileCoords/(2.0*degradationModifier))-uOffLT[1],uTileCount/(2.0*degradationModifier));if(validateOffsetT(offT)&&uMetaL1T[int(floor(offT.y)*BUFF_SIDE_T+offT.x)]==1.0){fallbackT=1.0;}else{TCT=(tileCoords+aTextureCoord)/uTileCount;}}if(fallbackT>=0.0){TCT=(offT+aTextureCoord/(exp2(fallbackT)*degradationModifier)+mod(uOffLT[int(fallbackT)],BUFF_SIDE_T))/BUFF_SIDE_T;}TCT.y=1.0-TCT.y;if(fallbackT==0.0){rawElev=texture2D(uBufferL0T,TCT).rg;}else if(fallbackT==1.0){rawElev=texture2D(uBufferL1T,TCT).rg;}else{rawElev=texture2D(uBufferLnT,TCT).rg;}elev=((TERRAIN_MAX-TERRAIN_MIN)*(rawElev.r+rawElev.g/256.0)-TERRAIN_MAX)/EARTH_RADIUS;\n#endif\nfloat exp_2y=exp(2.0*phi.y);float tanh=((exp_2y-1.0)/(exp_2y+1.0));float cosy=sqrt(1.0-tanh*tanh);vec3 pos=vec3(sin(phi.x)*cosy,tanh,cos(phi.x)*cosy);gl_Position=uMVPMatrix*vec4(pos*(1.0+elev),1.0);if(abs(phi.y)>PI){vFallbackA=-1.0e3;return;}vFallbackA=-1.0;vec2 off=modFirst(tileCoords-uOffLA[0],uTileCount);if(validateOffset(off)&&uMetaL0A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=0.0;}else{off=modFirst((tileCoords/2.0)-uOffLA[1],uTileCount/2.0);if(validateOffset(off)&&uMetaL1A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=1.0;}else{off=modFirst((tileCoords/4.0)-uOffLA[2],uTileCount/4.0);if(validateOffset(off)&&uMetaL2A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=2.0;}}}if(vFallbackA>=0.0){vTCA=(off+aTextureCoord/exp2(vFallbackA)+mod(uOffLA[int(vFallbackA)],BUFF_SIDE))/BUFF_SIDE;}else{vTCA=(tileCoords+aTextureCoord)/uTileCount;}vTCA.y=1.0-vTCA.y;vFallbackB=-1.0;off=modFirst(tileCoords-uOffLB[0],uTileCount);if(validateOffset(off)&&uMetaL0B[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackB=0.0;}else{off=modFirst((tileCoords/2.0)-uOffLB[1],uTileCount/2.0);if(validateOffset(off)&&uMetaL1B[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackB=1.0;}else{off=modFirst((tileCoords/4.0)-uOffLB[2],uTileCount/4.0);if(validateOffset(off)&&uMetaL2B[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackB=2.0;}}}if(vFallbackB>=0.0){vTCB=(off+aTextureCoord/exp2(vFallbackB)+mod(uOffLB[int(vFallbackB)],BUFF_SIDE))/BUFF_SIDE;}else{vTCB=(tileCoords+aTextureCoord)/uTileCount;}vTCB.y=1.0-vTCB.y;}",
"earth-vs.glsl":"#define BUFF_SIDE 8.0\n#define BUFF_SIZE 64\n#define TERRAIN %TERRAIN_BOOL%\n#define BUFF_SIDE_T %BUFFER_SIDE_T_FLOAT%\n#define BUFF_SIZE_T int(BUFF_SIDE_T*BUFF_SIDE_T)\nprecision highp float;const float PI=3.1415927;const float PI2=6.2831855;const float EARTH_RADIUS=6378137.0;const float TERRAIN_MIN=-10000.0;const float TERRAIN_MAX=12000.0;attribute vec2 aVertexPosition;attribute vec2 aTextureCoord;uniform mat4 uMVPMatrix;uniform float uTileCount;uniform vec2 uOffset;uniform float uMetaL0A[BUFF_SIZE];uniform float uMetaL1A[BUFF_SIZE];uniform float uMetaL2A[BUFF_SIZE];uniform vec2 uOffLA[3];varying float vFallbackA;varying vec2 vTCA;\n#if TERRAIN\nuniform float uMetaL0T[BUFF_SIZE_T];uniform float uMetaL1T[BUFF_SIZE_T];uniform vec2 uOffLT[2];uniform sampler2D uBufferL0T;uniform sampler2D uBufferL1T;uniform sampler2D uBufferLnT;uniform float uDegradationT;bool validateOffsetT(vec2 off){return off.x>=0.0&&off.y>=0.0&&off.x<BUFF_SIDE_T&&off.y<BUFF_SIDE_T;}\n#endif\nbool validateOffset(vec2 off){return off.x>=0.0&&off.y>=0.0&&off.x<BUFF_SIDE&&off.y<BUFF_SIDE;}vec2 modFirst(vec2 x,float y){return vec2(x.x-y*floor(x.x/y),x.y);}void main(){vec2 phi=PI2*(aVertexPosition+uOffset)/uTileCount;vec2 tileCoords=vec2(mod(aVertexPosition.x-aTextureCoord.x+uOffset.x+uTileCount*0.5,uTileCount),-aTextureCoord.y-aVertexPosition.y-uOffset.y+uTileCount*0.5);float elev=0.0;\n#if TERRAIN\nvec2 TCT;float fallbackT=-1.0;float degradationModifier=exp2(uDegradationT);vec2 offT=modFirst(tileCoords/degradationModifier-uOffLT[0],uTileCount/degradationModifier);vec2 rawElev;if(validateOffsetT(offT)&&uMetaL0T[int(floor(offT.y)*BUFF_SIDE_T+offT.x)]==1.0){fallbackT=0.0;}else{offT=modFirst((tileCoords/(2.0*degradationModifier))-uOffLT[1],uTileCount/(2.0*degradationModifier));if(validateOffsetT(offT)&&uMetaL1T[int(floor(offT.y)*BUFF_SIDE_T+offT.x)]==1.0){fallbackT=1.0;}else{TCT=(tileCoords+aTextureCoord)/uTileCount;}}if(fallbackT>=0.0){TCT=(offT+aTextureCoord/(exp2(fallbackT)*degradationModifier)+mod(uOffLT[int(fallbackT)],BUFF_SIDE_T))/BUFF_SIDE_T;}TCT.y=1.0-TCT.y;if(fallbackT==0.0){rawElev=texture2D(uBufferL0T,TCT).rg;}else if(fallbackT==1.0){rawElev=texture2D(uBufferL1T,TCT).rg;}else{rawElev=texture2D(uBufferLnT,TCT).rg;}elev=((TERRAIN_MAX-TERRAIN_MIN)*(rawElev.r+rawElev.g/256.0)-TERRAIN_MAX)/EARTH_RADIUS;\n#endif\nfloat exp_2y=exp(2.0*phi.y);float tanh=((exp_2y-1.0)/(exp_2y+1.0));float cosy=sqrt(1.0-tanh*tanh);vec3 pos=vec3(sin(phi.x)*cosy,tanh,cos(phi.x)*cosy);gl_Position=uMVPMatrix*vec4(pos*(1.0+elev),1.0);if(abs(phi.y)>PI){vFallbackA=-1.0e3;return;}vFallbackA=-1.0;vec2 off=modFirst(tileCoords-uOffLA[0],uTileCount);if(validateOffset(off)&&uMetaL0A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=0.0;}else{off=modFirst((tileCoords/2.0)-uOffLA[1],uTileCount/2.0);if(validateOffset(off)&&uMetaL1A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=1.0;}else{off=modFirst((tileCoords/4.0)-uOffLA[2],uTileCount/4.0);if(validateOffset(off)&&uMetaL2A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=2.0;}}}if(vFallbackA>=0.0){vTCA=(off+aTextureCoord/exp2(vFallbackA)+mod(uOffLA[int(vFallbackA)],BUFF_SIDE))/BUFF_SIDE;}else{vTCA=(tileCoords+aTextureCoord)/uTileCount;}vTCA.y=1.0-vTCA.y;}",
"halo-fs.glsl":"precision lowp float;uniform sampler2D uGradient;varying vec2 vCoords;void main(){float distance=vCoords.x*vCoords.x+vCoords.y*vCoords.y;if(distance<0.98){discard;}else{gl_FragColor=texture2D(uGradient,vec2((sqrt(distance)-1.0)/0.1,0.5));}}","halo-vs.glsl":"precision lowp float;attribute vec2 aVertexPosition;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;varying vec2 vCoords;void main(){gl_Position=uPMatrix*(uMVMatrix[3]+uMVMatrix[0]*aVertexPosition.x+uMVMatrix[1]*aVertexPosition.y);gl_Position.z=0.0;vCoords=aVertexPosition;}"};function ch(a){return a in bh?bh[a]:ic("../we/shaders/"+a)};function dh(a){var c;this.a=a.a;c=this.g=a.a.g,a=c;this.pi=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.pi);a.bufferData(a.ARRAY_BUFFER,new Float32Array([1.1,1.1,-1.1,1.1,1.1,-1.1,-1.1,-1.1]),a.STATIC_DRAW);this.fh=a.createTexture();var b=new Uint8Array([224,224,255,255,207,218,250,220,179,194,245,180,137,166,237,145,84,123,221,110,51,94,198,75,25,67,178,30,13,53,161,0]);a.bindTexture(a.TEXTURE_2D,this.fh);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,8,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);b=ch("halo-fs.glsl");a=ch("halo-vs.glsl");b=ah(this.a,b,this.g.FRAGMENT_SHADER);a=ah(this.a,a,this.g.VERTEX_SHADER);this.Ua=this.g.createProgram();w(this.Ua)&&e(Error("Unknown"));this.g.attachShader(this.Ua,a);this.g.attachShader(this.Ua,b);this.g.bindAttribLocation(this.Ua,0,"aVertexPosition");
this.g.linkProgram(this.Ua);this.g.getProgramParameter(this.Ua,this.g.LINK_STATUS)||e(Error("Shader program err: "+this.g.getProgramInfoLog(this.Ua)));this.le=this.g.getAttribLocation(this.Ua,"aVertexPosition");this.g.enableVertexAttribArray(this.le);this.Qj=this.g.getUniformLocation(this.Ua,"uMVMatrix");this.hk=this.g.getUniformLocation(this.Ua,"uPMatrix");this.$i=this.g.getUniformLocation(this.Ua,"uGradient")}
dh.prototype.draw=function(){this.g.useProgram(this.Ua);this.g.bindBuffer(this.g.ARRAY_BUFFER,this.pi);this.g.vertexAttribPointer(this.le,2,this.g.FLOAT,!1,0,0);this.g.activeTexture(this.g.TEXTURE0);this.g.bindTexture(this.g.TEXTURE_2D,this.fh);this.g.uniform1i(this.$i,0);var a=new Float32Array(Hb(Mg(this.a.Ga.wa).ge())),b=new Float32Array(Hb(Mg(this.a.Qc).ge()));this.g.uniformMatrix4fv(this.Qj,!1,a);this.g.uniformMatrix4fv(this.hk,!1,b);this.g.drawArrays(this.g.TRIANGLE_STRIP,0,4)};function eh(a){this.e=a;this.Ob=this.yb=0;this.ia=1E7;this.Aa=n;this.Zh=this.Vb=this.od=0}F(eh,fe);r=eh.prototype;r.setPosition=function(a,b){this.yb=O(a,-1.57,1.57);this.Ob=jc(b);this.Aa=n;this.dispatchEvent(new fh(gh))};function hh(a,b,c){function d(a){var d=c;c=d*Math.cos(a)-2*b*Math.sin(a);b=d*Math.sin(a)/2+b*Math.cos(a)}d(a.Zh);b/=Math.max(Math.abs(Math.cos(a.Vb)),0.1);d(a.od);a.setPosition(a.yb+b,a.Ob+c)}r.getPosition=function(){return[this.yb,this.Ob]};
function ih(a,b){a.ia=O(b,250,1E7);a.Aa=n;a.dispatchEvent(new fh(jh));a.dispatchEvent(new fh(gh))}r.setZoom=function(a){this.Aa=O(a,kh(this.e),this.e.W.oa.bb());a=Math.cos(Math.abs(this.yb))*2*Math.PI/Math.pow(2,this.Aa)*this.e.de;this.ia=1/Math.tan(this.e.a.Cc/2)*(a/2)*6378137;this.dispatchEvent(new fh(gh));this.dispatchEvent(new fh(jh))};
r.getZoom=function(){if(w(this.Aa)){var a=2*(this.ia/6378137)*Math.tan(this.e.a.Cc/2)/this.e.de;this.Aa=O(Math.log(Math.cos(Math.abs(this.yb))*2*Math.PI/a)/Math.LN2,kh(this.e),this.e.W.oa.bb())}return this.Aa};r.ld=function(){return lh(this.e,this.e.a.pb/2,this.e.a.ob/2,!0)};r.setHeading=ba("od");r.setTilt=ba("Vb");r.getHeading=p("od");r.getTilt=p("Vb");var gh="zoomchanged",jh="altchanged";function fh(a){vd.call(this,a)}F(fh,vd);function mh(a,b,c,d,f){function g(a,b,c,d){a?a=b:(a=b/Math.max(1,Math.sqrt(c*c+d*d)),a=Math.max(1,Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))));return a}a=a.g;this.nb=[];this.bd=[];this.z=[];for(var h=-b/2;h<b/2;++h)for(var j=-c/2;j<c/2;++j){var k=g(f,d,h,j),l=[j+1<c/2&&g(f,d,h,j+1)>k,h+1<b/2&&g(f,d,h+1,j)>k,j-1>-c/2&&g(f,d,h,j-1)>k,h-1>-b/2&&g(f,d,h-1,j)>k];nh(this,h,j,k,l)}this.gf=a.createBuffer();this.ef=a.createBuffer();this.sh=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.gf);a.bufferData(a.ARRAY_BUFFER,
new Float32Array(this.nb),a.STATIC_DRAW);this.gf.Vf=2;a.bindBuffer(a.ARRAY_BUFFER,this.ef);a.bufferData(a.ARRAY_BUFFER,new Float32Array(this.bd),a.STATIC_DRAW);this.ef.Vf=2;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.sh);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.z),a.STATIC_DRAW);this.Uj=this.z.length}
function nh(a,b,c,d,f){for(var g=a.nb.length/2,h=0;h<=d;++h)for(var j=0;j<=d;++j)a.nb.push(b+j/d,c+h/d),a.bd.push(j/d,1-h/d);var k=[0,0,0,0];if(f[0]){k[0]=a.nb.length/2;for(j=0;j<d;++j)a.nb.push(b+(j+0.5)/d,c+1),a.bd.push((j+0.5)/d,0)}if(f[1]){k[1]=a.nb.length/2;for(h=0;h<d;++h)a.nb.push(b+1,c+(h+0.5)/d),a.bd.push(1,1-(h+0.5)/d)}if(f[2]){k[2]=a.nb.length/2;for(j=0;j<d;++j)a.nb.push(b+(j+0.5)/d,c),a.bd.push((j+0.5)/d,1)}if(f[3]){k[3]=a.nb.length/2;for(h=0;h<d;++h)a.nb.push(b,c+(h+0.5)/d),a.bd.push(0,
1-(h+0.5)/d)}b=D(aa(),a);c=d+1;for(h=0;h<d;++h)for(j=0;j<d;++j){var l=g+h*c+j;a.z.push(l);var o=h==0&&f[2],m=j==0&&f[3];o&&!m?(a.z.push(k[2]+j),a.z.push(l+c),b(),a.z.push(k[2]+j)):m&&!o?(a.z.push(l+1),a.z.push(k[3]+h),b(),a.z.push(k[3]+h)):m&&o&&(a.z.push(k[2]+j),a.z.push(k[3]+h),b(),a.z.push(k[3]+h),a.z.push(k[2]+j),a.z.push(l+c),b(),a.z.push(k[2]+j));a.z.push(l+1);a.z.push(l+c);b();a.z.push(l+c+1);o=h==d-1&&f[0];m=j==d-1&&f[1];o&&!m?(a.z.push(k[0]+j),a.z.push(l+1),b(),a.z.push(k[0]+j)):m&&!o?(a.z.push(l+
c),a.z.push(k[1]+h),b(),a.z.push(k[1]+h)):o&&m&&(a.z.push(k[0]+j),a.z.push(k[1]+h),b(),a.z.push(k[1]+h),a.z.push(k[0]+j),a.z.push(l+1),b(),a.z.push(k[0]+j));a.z.push(l+c);a.z.push(l+1);b()}};function oh(a,b,c,d){b=b.g;this.C=a;this.le=b.getAttribLocation(this.C,"aVertexPosition");b.enableVertexAttribArray(this.le);this.ji=b.getAttribLocation(this.C,"aTextureCoord");b.enableVertexAttribArray(this.ji);this.Rj=$(b,this.C,"uMVPMatrix");this.Dj=$(b,this.C,"uMetaL0A");this.Gj=$(b,this.C,"uMetaL1A");this.Jj=$(b,this.C,"uMetaL2A");this.vj=$(b,this.C,"uOffLA");this.Ai=$(b,this.C,"uBufferL0A");this.Di=$(b,this.C,"uBufferL1A");this.Gi=$(b,this.C,"uBufferL2A");this.Ii=$(b,this.C,"uBufferLnA");if(c)this.Ej=
$(b,this.C,"uMetaL0B"),this.Hj=$(b,this.C,"uMetaL1B"),this.Kj=$(b,this.C,"uMetaL2B"),this.wj=$(b,this.C,"uOffLB"),this.Bi=$(b,this.C,"uBufferL0B"),this.Ei=$(b,this.C,"uBufferL1B"),this.Hi=$(b,this.C,"uBufferL2B"),this.Lj=$(b,this.C,"uMixFactor");if(d)this.Ri=$(b,this.C,"uDegradationT"),this.Fj=$(b,this.C,"uMetaL0T"),this.Ij=$(b,this.C,"uMetaL1T"),this.xj=$(b,this.C,"uOffLT"),this.Ci=$(b,this.C,"uBufferL0T"),this.Fi=$(b,this.C,"uBufferL1T"),this.Ji=$(b,this.C,"uBufferLnT");this.Ak=$(b,this.C,"uTileCount");
this.Vj=$(b,this.C,"uOffset")}function $(a,b,c){a=a.getUniformLocation(b,c);w(a)&&e(Error("Invalid name "+c));return a};function ph(a){this.Ub=new Rb;this.Lc=[];this.xk=512;this.Ug=new Ve(2E4);T(this.Ug,Xe,this.Ni,!1,this);this.Ug.start();qh(this,a)}function qh(a,b){a.ki=E();a.Ma=b;Lb(a.Ub,function(a){a.j()});a.Ub.clear();a.Lc=[]}r=ph.prototype;r.Ma=n;r.ki=0;r.zk=t;
r.Ni=function(){var a=ub(this.Ub.Qa(),function(a){return a.state==20||a.state==Ia||a.state==-10});for(Fb(a,function(a,b){return a.kc-b.kc});this.Ub.wb()>this.xk&&a.length>0;){var b=a.shift();b.state==Ia&&zb(this.Lc,b);this.Ub.remove(b.zoom+"_"+b.x+"_"+b.y);b.j()}};r.Bk=function(a){a.kc<this.ki?(a.state=-10,this.Ub.remove(a.zoom+"_"+a.x+"_"+a.y),a.j()):this.zk(a)};
function rh(a){Fb(a.Lc,function(a,b){return a.kc-b.kc});for(var b=Math.min(a.Lc.length,5-a.Ma.gb),c=0;c<b;c++)bc(a.Ma,a.Lc.pop(),D(a.Bk,a))};function sh(a,b,c,d){this.sb=b;this.Zb=[];this.u=c;this.Ma=a;this.Fg=new ph(a);this.Aa=d;this.La=1<<this.Aa;this.fd=this.u>=this.La;this.Qb=this.Nc=0;this.buffer=n;this.xa=[];th(this)}function th(a){a.xa=[];for(var b=0;b<a.u;++b)a.xa.push(Array(a.u));a.buffer&&a.buffer.clear()}sh.prototype.disable=function(){this.Zb=[];th(this);this.buffer=n};sh.prototype.Db=function(a){this.Ma=a;qh(this.Fg,a);this.Zb=[];th(this)};
function uh(a){a.Zb=[];for(var b=D(function(a,b){var c=(this.fd?this.La:this.u)/2;a+=c;b+=c;this.xa[b][a]!==1&&vh(this,this.Nc+a,this.Qb+b,d)},a),c=D(function(a,c){for(var d=-c;d<c;++d)b(d,-c),b(d,c-1);for(d=-c;d<c;++d)b(-c,d),b(c-1,d)},a),d=E(),a=Math.min(a.u,a.La)/2;a>0;--a)c(d+a,a)}
function vh(a,b,c,d){var b=gc(b,a.La),c=gc(c,a.La),f;a:{f=a.Fg;var g=a.Aa,h=b,j=c,c=g+"_"+h+"_"+j,b=f.Ub.get(c);if(y(b))b.state==-10?d-b.kc>7E3&&(b.j(),b=new Ha(g,h,j,d),f.Ub.set(c,b),f.Lc.push(b)):b.kc=d;else{d=b=new Ha(g,h,j,d);g=Zb(f.Ma,d.zoom);if(!(d.x>=g.left&&d.x<=g.right&&d.y>=g.top&&d.y<=g.bottom)){f=n;break a}f.Ub.set(c,b);f.Lc.push(b)}f=b}!w(f)&&f.state==20&&a.Zb.push(f)};function wh(a,b,c){var d;d=this.Mb=a.g,a=d;this.Jg=b;this.Rf=c;this.Va=a.createTexture();xh(this)}wh.prototype.We=function(a,b){if(!(this.Jg==a&&this.Rf==b))this.Jg=a,this.Rf=b,this.Mb.deleteTexture(this.Va),this.Va=this.Mb.createTexture(),xh(this)};
function xh(a){var b=a.Mb;b.bindTexture(b.TEXTURE_2D,a.Va);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,1);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,a.Jg,a.Rf,0,b.RGBA,b.UNSIGNED_BYTE,n);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR_MIPMAP_LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR_MIPMAP_LINEAR)}wh.prototype.clear=function(){this.Mb.deleteTexture(this.Va);this.Va=this.Mb.createTexture();xh(this)};function yh(a,b,c){function d(b){g.isTexture(h)&&(b.Bf>=3||bc(a,b,f,d))}function f(c){if(g.isTexture(h)){g.bindTexture(g.TEXTURE_2D,h);try{g.texSubImage2D(g.TEXTURE_2D,0,c.x*k,(j-c.y-1)*k,g.RGBA,g.UNSIGNED_BYTE,Ja(c))}catch(l){a.sf()&&(a.wg(b.Wd)||!(c.Ic&&c.Ic.src.lastIndexOf(b.Wd,0)==0))?bc(a,c,f,d):b.jg()}}}var g=this.Mb=b.g,h=g.createTexture();this.Va=h;var j=1<<c,k=a.Lb();g.bindTexture(g.TEXTURE_2D,h);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,1);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,k*j,k*j,0,g.RGBA,g.UNSIGNED_BYTE,
n);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);for(var l=0;l<j;++l)for(var o=0;o<j;++o)bc(a,new Ha(c,l,o),f,d)}F(yh,G);yh.prototype.i=function(){this.Mb.deleteTexture(this.Va)};function zh(a,b,c,d,f,g,h){this.sb=b;this.u=c;this.Ta=f;this.Me=g;this.Ma=a;var j=a.Lb();this.Cb=[];for(var k=0;k<d;++k)this.Cb.push(new wh(b,this.u*j,this.u*j));for(this.ea=[];f<=g;++f)this.ea.push(new sh(a,b,c,f));for(k=0;k<d;++k)this.ea[k].buffer=this.Cb[k];this.Xa=0;this.Qd=h?n:new yh(a,b,2)}zh.prototype.Db=function(a){if(!w(this.Qd))this.Qd.j(),this.Qd=new yh(a,this.sb,2);this.Ma=a;var b=this.u*a.Lb();N(this.Cb,function(a){a.We(b,b)});N(this.ea,function(b){b.Db(a)});Ah(this)};
function Bh(a,b,c,d,f,g){for(var g=O(g,a.Ta,a.Me),h=g-(a.Ta+a.Xa+a.Cb.length-1);h>0;){var j=a.ea[a.Xa].buffer;a.ea[a.Xa].disable();a.ea[++a.Xa+a.Cb.length-1].buffer=j;h--}for(;h<0&&a.Xa>0;)j=a.ea[a.Xa+a.Cb.length-1].buffer,a.ea[a.Xa+a.Cb.length-1].disable(),a.ea[--a.Xa].buffer=j,h++;for(var h=1<<g,k=!1,c=(c/(2*Math.PI)+0.5)*h,b=(0.5-$b(b)/(Math.PI*2))*h,f=(f/(2*Math.PI)+0.5)*h,j=(0.5-$b(d)/(Math.PI*2))*h,d=g-a.Ta;d>=a.Xa;d--){var l=O(c-a.u/2,f-a.u,f),o=O(b-a.u/2,j-a.u,j),m=Zb(a.Ma,a.Ta+d),l=O(l,m.left,
m.right+1-a.u),o=O(o,m.top,m.bottom+1-a.u),l=gc(Math.round(l),h),o=Math.round(o),m=a.ea[d],A=o,o=!1;if(!m.fd){var v=l-m.Nc,Y=A-m.Qb;Math.abs(v)>m.La/2&&(v=(v-(v==0?0:v<0?-1:1)*m.La)%m.La);m.Nc=l;m.Qb=A;if(Math.abs(v)>=m.u||Math.abs(Y)>=m.u)th(m),o=!0;else{o=v!=0||Y!=0;if(v>0)for(l=0;l<m.u;++l)m.xa[l].splice(0,v),m.xa[l].push.apply(m.xa[l],Array(v));if(v<0)for(l=0;l<m.u;++l)m.xa[l].splice(m.u+v,-v),m.xa[l].unshift.apply(m.xa[l],Array(-v));if(Y>0)for(l=0;l<Y;++l)m.xa.shift(),m.xa.push(Array(m.u));if(Y<
0)for(l=0;l<-Y;++l)m.xa.pop(),m.xa.unshift(Array(m.u))}}uh(m);k|=o;c/=2;b/=2;f/=2;j/=2}k&&Ah(a);f=1;for(d=a.Xa;f>0&&d<=g-a.Ta;d++){h=f;c=a.ea[d];b=0;if(c.Zb.length>0){f=Math.min(c.Zb.length,f>=0?1:0);for(j=0;j<f;j++){l=c;k=c.Zb.pop();if(!w(l.buffer)&&k.zoom==l.Aa&&(m=k.x-l.Nc,o=k.y-l.Qb,v=1<<l.Aa,m=gc(m,v),o=gc(o,v),!(m<0||m>=l.u||o<0||o>=l.u))){v=l.sb.g;A=l.Ma.Lb();v.bindTexture(v.TEXTURE_2D,l.buffer.Va);Y=gc(m+l.Nc,l.u)*A;A*=l.u-gc(o+l.Qb,l.u)-1;try{v.texSubImage2D(v.TEXTURE_2D,0,Y,A,v.RGBA,v.UNSIGNED_BYTE,
Ja(k)),l.xa[o][m]=1}catch(Jd){l.Ma.sf()&&(l.Ma.wg(l.sb.Wd)||!(k.Ic&&k.Ic.src.lastIndexOf(l.sb.Wd,0)==0))?vh(l,k.x,k.y,k.kc):l.sb.jg()}}b++}}rh(c.Fg);b>0&&(c.sb.g.bindTexture(c.sb.g.TEXTURE_2D,c.buffer.Va),c.sb.g.generateMipmap(c.sb.g.TEXTURE_2D));f=h-b}}function Ch(a,b,c){return b>a.Me||b-c<a.Ta?Array(a.u*a.u):Hb(a.ea[b-a.Ta-c].xa)}function Dh(a,b,c){return b>a.Me||b-c<a.Ta?n:a.ea[b-a.Ta-c].buffer.Va}
function Eh(a,b,c){if(b>a.Me)return Array(2*c);for(var d=[],f=b-a.Ta;f>b-a.Ta-c;--f)d.push(Math.round(a.ea[Math.max(0,f)].Nc),Math.round(a.ea[Math.max(0,f)].Qb));return d}
function Ah(a){for(var b=Array(a.Cb.length),c=0;c<a.Cb.length;c++){var d=a.ea[a.Xa+c],f=Fh((0.5-d.Qb/d.La)*2*Math.PI),g=Fh((0.5-(d.Qb+d.u)/d.La)*2*Math.PI);b[c]=new dc(d.fd?0:Fh((0.5-(d.Qb+d.u/2)/d.La)*2*Math.PI),d.fd?0:((d.Nc+d.u/2)/d.La-0.5)*2*Math.PI,d.fd?Math.PI/2:Math.abs(f-g),d.fd?Math.PI:d.u/d.La*2*Math.PI,d.Aa)}a.Ma.Xh(b)};function Gh(a,b){this.a=a.a;this.n=a;this.oa=b||new Zf;this.Ja=new zh(this.oa,this.a,8,3,1,19);this.na=this.cd=n;this.Te=0;this.Wc=!1;this.Db(this.oa,!0);this.Xc=1;this.ic=[0,0];this.ai=[new mh(this.a,1,1,1),new mh(this.a,4,4,16,!0),new mh(this.a,6,6,8,!0),new mh(this.a,8,8,8,!0),new mh(this.a,10,10,8),new mh(this.a,64,64,this.Wc?8:4)];this.yj=Hh(this,!1);this.zj=Hh(this,!0)}
Gh.prototype.Db=function(a,b,c){if(a)a.vf=D(this.n.Ig,this.n);if(c)if(this.cd=a)y(this.na)?this.na.Db(a):(this.Ja=new zh(this.oa,this.a,4,3,1,19),this.na=new zh(this.cd,this.a,4,3,0,15));else{if(y(this.na))this.Ja=new zh(this.oa,this.a,8,3,1,19),this.na=n}else{if(!a)return;this.Ja.Db(a);this.oa=a}b!==!0&&(Zg(this.n),this.n.Ig(),this.n.d.setZoom(this.n.d.getZoom()))};
Gh.prototype.draw=function(){var a=this.a.g;this.Xc=1<<this.n.d.getZoom();var b=this.n.d.getPosition(),c=this.n.d.ld()||b;this.ic[0]=Math.floor(b[1]/(2*Math.PI)*this.Xc);this.ic[1]=O(Math.floor($b(b[0])/(Math.PI*2)*this.Xc),-this.Xc/2,this.Xc/2);Bh(this.Ja,c[0],c[1],b[0],b[1],Math.floor(this.n.d.getZoom()));this.na&&Bh(this.na,c[0],c[1],b[0],b[1],Math.floor(this.n.d.getZoom()));this.Wc&&Bh(this.ac,c[0],c[1],b[0],b[1],Math.floor(this.n.d.getZoom())-5);c=Math.floor(this.n.d.getZoom());this.Xc=1<<c;
b=this.na?this.zj:this.yj;a.useProgram(b.C);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,Dh(this.Ja,c,0));a.uniform1i(b.Ai,0);a.activeTexture(a.TEXTURE1);a.bindTexture(a.TEXTURE_2D,Dh(this.Ja,c,1));a.uniform1i(b.Di,1);a.activeTexture(a.TEXTURE2);a.bindTexture(a.TEXTURE_2D,Dh(this.Ja,c,2));a.uniform1i(b.Gi,2);a.activeTexture(a.TEXTURE3);a.bindTexture(a.TEXTURE_2D,this.Ja.Qd.Va);a.uniform1i(b.Ii,3);a.uniform1fv(b.Dj,new Float32Array(Ch(this.Ja,c,0)));a.uniform1fv(b.Gj,new Float32Array(Ch(this.Ja,
c,1)));a.uniform1fv(b.Jj,new Float32Array(Ch(this.Ja,c,2)));a.uniform2fv(b.vj,new Float32Array(Eh(this.Ja,c,3)));this.na&&(a.activeTexture(a.TEXTURE4),a.bindTexture(a.TEXTURE_2D,Dh(this.na,c,0)),a.uniform1i(b.Bi,4),a.activeTexture(a.TEXTURE5),a.bindTexture(a.TEXTURE_2D,Dh(this.na,c,1)),a.uniform1i(b.Ei,5),a.activeTexture(a.TEXTURE6),a.bindTexture(a.TEXTURE_2D,Dh(this.na,c,2)),a.uniform1i(b.Hi,6),a.uniform1fv(b.Ej,new Float32Array(Ch(this.na,c,0))),a.uniform1fv(b.Hj,new Float32Array(Ch(this.na,c,1))),
a.uniform1fv(b.Kj,new Float32Array(Ch(this.na,c,2))),a.uniform2fv(b.wj,new Float32Array(Eh(this.na,c,3))),a.uniform1f(b.Lj,this.Te));if(this.Wc){var d=O(c-5,2,this.df.bb());a.uniform1f(b.Ri,c-d);a.activeTexture(a.TEXTURE7);a.bindTexture(a.TEXTURE_2D,Dh(this.ac,d,0));a.uniform1i(b.Ci,7);a.activeTexture(a.TEXTURE8);a.bindTexture(a.TEXTURE_2D,Dh(this.ac,d,1));a.uniform1i(b.Fi,8);a.activeTexture(a.TEXTURE9);a.bindTexture(a.TEXTURE_2D,this.ac.Qd.Va);a.uniform1i(b.Ji,9);a.uniform1fv(b.Fj,new Float32Array(Ch(this.ac,
d,0)));a.uniform1fv(b.Ij,new Float32Array(Ch(this.ac,d,1)));a.uniform2fv(b.xj,new Float32Array(Eh(this.ac,d,2)))}d=new Float32Array(Hb(Mg($g(this.a)).ge()));c=this.ai[Math.min(c,this.ai.length-1)];a.bindBuffer(a.ARRAY_BUFFER,c.gf);a.vertexAttribPointer(b.le,c.gf.Vf,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,c.ef);a.vertexAttribPointer(b.ji,c.ef.Vf,a.FLOAT,!1,0,0);a.uniformMatrix4fv(b.Rj,!1,d);a.uniform1f(b.Ak,this.Xc);a.uniform2fv(b.Vj,new Float32Array(this.ic));a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,
c.sh);a.drawElements(a.TRIANGLES,c.Uj,a.UNSIGNED_SHORT,0)};
function Hh(a,b){var c=a.a.g,d=ch("earth-fs"+(b?"-overlay":"")+".glsl"),f=ch("earth-vs"+(b?"-overlay":"")+".glsl"),f=f.replace("%TERRAIN_BOOL%",a.Wc?"1":"0");a.Wc&&(f=f.replace("%BUFFER_SIDE_T_FLOAT%",a.ac.u.toFixed(1)));var d=ah(a.a,d,c.FRAGMENT_SHADER),f=ah(a.a,f,c.VERTEX_SHADER),g=c.createProgram();w(g)&&e(Error("Unknown"));c.attachShader(g,f);c.attachShader(g,d);c.bindAttribLocation(g,0,"aVertexPosition");c.linkProgram(g);c.getProgramParameter(g,c.LINK_STATUS)||e(Error("Shader program err: "+
c.getProgramInfoLog(g)));return new oh(g,a.a,b,a.Wc)}function Ih(a,b,c,d){var f=Math.sin((c-a)/2),b=Math.sin((d-b)/2);return 6378137*2*Math.asin(Math.sqrt(f*f+Math.cos(a)*Math.cos(c)*b*b))};function Jh(a,b,c){this.x=u(a)?a:0;this.y=u(b)?b:0;this.G=u(c)?c:0}Jh.prototype.ja=function(){return new Jh(this.x,this.y,this.G)};Jh.prototype.ge=function(){return[this.x,this.y,this.G]};function Kh(a,b,c){this.x=a;this.y=b;this.G=c}F(Kh,Jh);r=Kh.prototype;r.ja=function(){return new Kh(this.x,this.y,this.G)};r.scale=function(a){this.x*=a;this.y*=a;this.G*=a;return this};r.normalize=function(){return this.scale(1/Math.sqrt(this.x*this.x+this.y*this.y+this.G*this.G))};r.add=function(a){this.x+=a.x;this.y+=a.y;this.G+=a.G;return this};r.Dg=function(a){this.x-=a.x;this.y-=a.y;this.G-=a.G;return this};r.equals=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.G==a.G};function Lh(a,b,c,d,f,g){if(w(d))return n;a=d.multiply(new Z([[a/f*2-1],[1-2*b/g],[c*2-1],[1]]));if(Ng(a,3,0)==0)return n;a=a.multiply(1/Ng(a,3,0));return new Kh(Ng(a,0,0),Ng(a,1,0),Ng(a,2,0))};function Mh(a,b,c,d,f,g){this.a=a;this.th=b||n;this.sc=c||document.createElement("div");if(!u(c))a=this.a.canvas,a.parentNode&&a.parentNode.insertBefore(this.sc,a.nextSibling);this.he=d||document.createElement("img");if(!u(d))d=this.sc,d.parentNode&&d.parentNode.insertBefore(this.he,d.nextSibling);this.vi=g||n;this.W=new Gh(this,f);this.aj=new dh(this);this.de=0;this.d=new eh(this);Zg(this);this.Ig()}
Mh.prototype.Ig=function(){w(this.sc)||(Zc(this.sc),Yc(this.sc,this.vi),this.W.oa.uc(this.sc),this.W.cd&&(Yc(this.sc,S("br"),S("strong",{},"Overlay data:"),S("br")),this.W.cd.uc(this.sc)));if(!w(this.he))w(this.W.oa.Be())?this.he.style.visibility="hidden":(this.he.src=this.W.oa.Be(),this.he.style.visibility="visible")};function kh(a){return Math.max(3,a.W.oa.kd())}function Zg(a){a.de=0.7*a.a.canvas.height/a.W.oa.Lb()}
Mh.prototype.draw=function(){var a=this.a.g;if(!w(this.th)){for(var b=this.th,c=hc(this.d.yb).toFixed(4)+"; "+hc(this.d.Ob).toFixed(4)+" @ "+this.d.ia.toFixed(0)+"m -> z="+this.d.getZoom().toFixed(3)+"; ",d=this.W,f=d.Ja,g="",h=0;h<f.ea.length;++h)g+=h+f.Ta+":"+f.ea[h].Zb.length+" ";f="BufferQueue size: "+g+"; Loading tiles: "+d.oa.gb;d.cd&&(f+=" + "+d.cd.gb);b.innerHTML=c+f}b=this.d.ia/6378137;c=this.a;c.ne=0.25*b;c.me=1+b;Yg(c);a.enable(a.BLEND);a.disable(a.DEPTH_TEST);b=Math.sin((Math.PI-this.a.Cc)/
2);c=Math.sin(this.a.Cc/2);this.a.Ga.wa=Ig(4);Tg(this.a.Ga,-this.d.getTilt());this.a.Ga.translate(0,0,c-1-this.d.ia/6378137);this.a.Ga.scale(b,b,b);this.aj.draw();a.disable(a.BLEND);a.enable(a.DEPTH_TEST);this.a.Ga.wa=Ig(4);Ug(this.a.Ga,-this.d.Zh);Tg(this.a.Ga,-this.d.getTilt());Ug(this.a.Ga,-this.d.getHeading());this.a.Ga.translate(0,0,-1-this.d.ia/6378137);Tg(this.a.Ga,this.d.yb);a=this.a.Ga;c=-this.d.Ob;b=Math.cos(c);c=Math.sin(c);a.wa=a.wa.multiply(new Z([[b,0,c,0],[0,1,0,0],[-c,0,b,0],[0,0,
0,1]]));this.W.draw()};function Nh(a,b){var c=a.ja();c.x=-c.x;c.y=-c.y;c.G=-c.G;var d=b.x*c.x+b.y*c.y+b.G*c.G,f=d*d-(c.x*c.x+c.y*c.y+c.G*c.G)+1;return f<0?n:(c=Math.min(d+Math.sqrt(f),d-Math.sqrt(f)),d=Math.max(d+Math.sqrt(f),d-Math.sqrt(f)),[c,d])}
function lh(a,b,c,d){var f=Lh(b,c,0,a.a.Pe,a.a.pb,a.a.ob),a=Lh(b,c,1,a.a.Pe,a.a.pb,a.a.ob);if(w(f)||w(a))return n;a.Dg(f);a.normalize();b=Nh(f,a);if(w(b))return n;a=a.scale(b[0]);f=new Kh(f.x+a.x,f.y+a.y,f.G+a.G);a=Math.asin(f.x/Math.sqrt(1-f.y*f.y));f.G<0&&(a=Math.PI-a);return d==!0?[Math.asin(f.y),jc(a)]:[hc(Math.asin(f.y)),hc(jc(a))]}function $b(a){return Math.log(Math.tan(a/2+Math.PI/4))}function Fh(a){return 2*Math.atan(Math.exp(a))-Math.PI/2};function Oh(a,b,c){this.target=a;this.handle=b||a;this.zh=c||new xe(NaN,NaN,NaN,NaN);this.A=R(a);this.ub=new zf(this);T(this.handle,["touchstart","mousedown"],this.ei,!1,this)}F(Oh,fe);var Ph=I||J&&L("1.9.3");r=Oh.prototype;r.clientX=0;r.clientY=0;r.screenX=0;r.screenY=0;r.gi=0;r.hi=0;r.gd=0;r.bc=0;r.$a=!0;r.Oa=!1;r.qh=0;r.Mj=0;r.pj=!1;r.ua=p("ub");r.oc=ba("$a");
r.i=function(){Oh.b.i.call(this);$d(this.handle,["touchstart","mousedown"],this.ei,!1,this);this.ub.j();delete this.target;delete this.handle;delete this.ub};
r.ei=function(a){var b=a.type=="mousedown";if(this.$a&&!this.Oa&&(!b||Bd(a))){Qh(a);if(this.qh==0)if(Rh(this,a),this.Oa)a.preventDefault();else return;else a.preventDefault();var b=this.A,c=b.documentElement,d=!Ph;this.ub.h(b,["touchmove","mousemove"],this.jj,d);this.ub.h(b,["touchend","mouseup"],this.we,d);Ph?(c.setCapture(!1),this.ub.h(c,"losecapture",this.we)):this.ub.h(b?b.parentWindow||b.defaultView:window,"blur",this.we);I&&this.pj&&this.ub.h(b,"dragstart",wd);this.qk&&this.ub.h(this.qk,"scroll",
this.ek,d);this.clientX=this.gi=a.clientX;this.clientY=this.hi=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.gd=this.target.offsetLeft;this.bc=this.target.offsetTop;this.pg=kd(Oc(this.A));this.Mj=E()}else this.dispatchEvent("earlycancel")};function Rh(a,b){if(a.dispatchEvent(new Sh("start",a,b.clientX,b.clientY,b))!==!1)a.Oa=!0}
r.we=function(a,b){this.ub.vd();Ph&&this.A.releaseCapture();var c=Th(this,this.gd),d=Uh(this,this.bc);this.Oa?(Qh(a),this.Oa=!1,this.dispatchEvent(new Sh("end",this,a.clientX,a.clientY,a,c,d,b||a.type=="touchcancel"))):this.dispatchEvent("earlycancel");(a.type=="touchend"||a.type=="touchcancel")&&a.preventDefault()};
function Qh(a){var b=a.type;b=="touchstart"||b=="touchmove"?a.dc(a.ta.targetTouches[0],a.currentTarget):(b=="touchend"||b=="touchcancel")&&a.dc(a.ta.changedTouches[0],a.currentTarget)}
r.jj=function(a){if(this.$a){Qh(a);var b=a.clientX-this.clientX,c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.Oa){var d=this.gi-this.clientX,f=this.hi-this.clientY;if(d*d+f*f>this.qh&&(Rh(this,a),!this.Oa)){this.we(a);return}}c=Vh(this,b,c);b=c.x;c=c.y;this.Oa&&this.dispatchEvent(new Sh("beforedrag",this,a.clientX,a.clientY,a,b,c))!==!1&&(Wh(this,a,b,c),a.preventDefault())}};
function Vh(a,b,c){var d=kd(Oc(a.A));b+=d.x-a.pg.x;c+=d.y-a.pg.y;a.pg=d;a.gd+=b;a.bc+=c;b=Th(a,a.gd);a=Uh(a,a.bc);return new H(b,a)}r.ek=function(a){var b=Vh(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;Wh(this,a,b.x,b.y)};function Wh(a,b,c,d){a.yf(c,d);a.dispatchEvent(new Sh("drag",a,b.clientX,b.clientY,b,c,d))}function Th(a,b){var c=a.zh,d=!isNaN(c.left)?c.left:n,c=!isNaN(c.width)?c.width:0;return Math.min(d!=n?d+c:Infinity,Math.max(d!=n?d:-Infinity,b))}
function Uh(a,b){var c=a.zh,d=!isNaN(c.top)?c.top:n,c=!isNaN(c.height)?c.height:0;return Math.min(d!=n?d+c:Infinity,Math.max(d!=n?d:-Infinity,b))}r.yf=function(a,b){this.target.style.left=a+"px";this.target.style.top=b+"px"};function Sh(a,b,c,d,f,g,h,j){vd.call(this,a);this.clientX=c;this.clientY=d;this.Mk=f;this.left=u(g)?g:b.gd;this.top=u(h)?h:b.bc;this.$g=b;this.Nk=!!j}F(Sh,vd);function Xh(a){this.f=a;this.fa=T(this.f,J?"DOMMouseScroll":"mousewheel",this)}F(Xh,fe);
Xh.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.ta;if(a.type=="mousewheel"){c=1;if(I||K&&(Sa||L("532.0")))c=40;d=K&&Ra&&-a.wheelDelta%c!=0?-a.wheelDelta:-a.wheelDelta/c;u(a.wheelDeltaX)?(b=K&&Ra&&-a.wheelDeltaX%c!=0?-a.wheelDeltaX:-a.wheelDeltaX/c,c=K&&Ra&&-a.wheelDeltaY%c!=0?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,d>100?d=3:d<-100&&(d=-3),u(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;ea(this.Dh)&&(b=O(b,-this.Dh,this.Dh));ea(this.Eh)&&(c=O(c,-this.Eh,this.Eh));b=new Yh(d,a,
b,c);try{this.dispatchEvent(b)}finally{b.j()}};Xh.prototype.i=function(){Xh.b.i.call(this);U(this.fa);delete this.fa};function Yh(a,b,c,d){b&&this.dc(b,i);this.type="mousewheel";this.detail=a;this.gd=c;this.bc=d}F(Yh,yd);function Zh(){Ye.call(this,[0],[0],0);this.za=[]}F(Zh,Ye);Zh.prototype.ng=function(){this.Af(function(a){a.play(a.ya==0)});Zh.b.ng.call(this)};Zh.prototype.og=function(){this.Af(function(a){a.stop()});Zh.b.og.call(this)};Zh.prototype.kg=function(){this.Yg();Zh.b.kg.call(this)};Zh.prototype.Yg=function(){N(this.za,function(a){a.j()})};function $h(){Zh.call(this)}F($h,Zh);$h.prototype.Ka=function(){for(var a=0;a<this.za.length;a++)this.za[a].play();$h.b.Ka.call(this)};
$h.prototype.Af=function(a){N(this.za,a)};$h.prototype.add=function(a){this.za.push(a);this.duration=Math.max(this.duration,a.duration)};$h.prototype.remove=function(a){if(zb(this.za,a)&&a.duration==this.duration)this.duration=0,N(this.za,function(a){this.duration=Math.max(a.duration,this.duration)},this)};function ai(){Zh.call(this);this.tf=new zf(this)}F(ai,Zh);r=ai.prototype;r.yc=0;r.Ka=function(){bi(this);ai.b.Ka.call(this)};r.jc=function(){ci(this);ai.b.jc.call(this)};
function ci(a){a.yc=0;a.tf.vd()}function bi(a){a.p==-1&&(ci(a),N(a.za,function(a){a.ya=0;ef(a,a.ya);a.stop()}));a.za[a.yc].play();a.yc++;a.yc<a.za.length&&a.tf.h(a.za[a.yc-1],"finish",function(){bi(this)})}r.add=function(a){this.za.push(a);this.duration+=a.duration};r.remove=function(a){zb(this.za,a)&&(this.duration-=a.duration)};r.Af=function(a){this.yc>0&&a(this.za[this.yc-1])};r.Yg=function(){N(this.za,function(a){a.j()});this.tf.j()};function di(){}F(di,fe);r=di.prototype;r.mb=0;r.hb=0;r.Sa=100;r.Ca=0;r.rc=1;r.Fa=!1;r.Mc=!1;r.S=function(a){a=ei(this,a);if(this.mb!=a)this.mb=a+this.Ca>this.Sa?this.Sa-this.Ca:a<this.hb?this.hb:a,!this.Fa&&!this.Mc&&this.dispatchEvent("change")};r.o=function(){return ei(this,this.mb)};r.xd=function(a){a=ei(this,a);if(this.Ca!=a)this.Ca=a<0?0:this.mb+a>this.Sa?this.Sa-this.mb:a,!this.Fa&&!this.Mc&&this.dispatchEvent("change")};
r.Jb=function(){return this.rc==n?this.Ca:Math.round(this.Ca/this.rc)*this.rc};r.$e=function(a){if(this.hb!=a){var b=this.Fa;this.Fa=!0;this.hb=a;if(a+this.Ca>this.Sa)this.Ca=this.Sa-this.hb;a>this.mb&&this.S(a);if(a>this.Sa)this.Ca=0,this.zd(a),this.S(a);this.Fa=b;!this.Fa&&!this.Mc&&this.dispatchEvent("change")}};r.qa=function(){return ei(this,this.hb)};
r.zd=function(a){a=ei(this,a);if(this.Sa!=a){var b=this.Fa;this.Fa=!0;this.Sa=a;a<this.mb+this.Ca&&this.S(a-this.Ca);if(a<this.hb)this.Ca=0,this.$e(a),this.S(this.Sa);if(a<this.hb+this.Ca)this.Ca=this.Sa-this.hb;this.Fa=b;!this.Fa&&!this.Mc&&this.dispatchEvent("change")}};r.pa=function(){return ei(this,this.Sa)};r.af=function(a){if(this.rc!=a)this.rc=a,a=this.Fa,this.Fa=!0,this.zd(this.pa()),this.xd(this.Jb()),this.S(this.o()),this.Fa=a,!this.Fa&&!this.Mc&&this.dispatchEvent("change")};
function ei(a,b){return a.rc==n?b:a.hb+Math.round((b-a.hb)/a.rc)*a.rc};function fi(a){$f.call(this,a);this.s=new di;T(this.s,"change",this.lj,!1,this)}F(fi,$f);r=fi.prototype;r.O="horizontal";r.Ge=!1;r.Jh=!1;r.Yb=10;r.Ud=0;r.t=function(){fi.b.t.call(this);this.tb(this.Y().t("div",this.r(this.O)))};r.tb=function(a){fi.b.tb.call(this,a);Q(a,this.r(this.O));var a=this.c(),b=Rc(document,n,"goog-slider-thumb",a)[0];b||(b=this.Y().t("div","goog-slider-thumb"),qf(b,"button"),a.appendChild(b));this.K=this.Ba=b;qf(this.c(),"slider");gi(this)};
r.da=function(){fi.b.da.call(this);this.Wb=new Oh(this.K);this.Bc=new Oh(this.Ba);this.Wb.yf=this.Bc.yf=t;this.L=new If(this.c());this.hc=new Xh(this.c());this.ua().h(this.Wb,"beforedrag",this.gh).h(this.Bc,"beforedrag",this.gh).h(this.Wb,["start","end"],this.mh).h(this.Bc,["start","end"],this.mh).h(this.L,"key",this.Lf).h(this.c(),"mousedown",this.De).h(this.hc,"mousewheel",this.ij);this.c().tabIndex=0;ii(this)};r.Pa=function(){fi.b.Pa.call(this);Fa(this.Wb,this.Bc,this.L,this.hc)};
r.gh=function(a){var b=a.$g==this.Wb?this.K:this.Ba,c;this.O=="vertical"?(c=this.c().clientHeight-b.offsetHeight,c=(c-a.top)/c*(this.pa()-this.qa())+this.qa()):c=a.left/(this.c().clientWidth-b.offsetWidth)*(this.pa()-this.qa())+this.qa();c=a.$g==this.Wb?Math.min(Math.max(c,this.qa()),this.o()+this.Jb()):Math.min(Math.max(c,this.o()),this.pa());ji(this,b,c)};
r.mh=function(a){var b=a.type=="start",c=this.c();b?Q(c,"goog-slider-dragging"):Jc(c,"goog-slider-dragging");a=a.target.handle;b?Q(a,"goog-slider-thumb-dragging"):Jc(a,"goog-slider-thumb-dragging")};
r.Lf=function(a){var b=!0;switch(a.keyCode){case 36:ki(this,this.qa());break;case 35:ki(this,this.pa());break;case 33:li(this,this.Yb);break;case 34:li(this,-this.Yb);break;case 37:case 40:li(this,a.shiftKey?-this.Yb:-this.Hg);break;case 39:case 38:li(this,a.shiftKey?this.Yb:this.Hg);break;default:b=!1}b&&a.preventDefault()};
r.De=function(a){this.c().focus&&this.c().focus();var b=a.target;if(!bd(this.K,b)&&!bd(this.Ba,b))if(this.Jh)ki(this,mi(this,a));else{this.Ag(a);this.Wa=ni(this,mi(this,a));this.rh=this.O=="vertical"?this.Ke<this.Wa.offsetTop:this.Ke>this.Wa.offsetLeft+this.Wa.offsetWidth;a=R(this.c());this.ua().h(a,"mouseup",this.lh,!0).h(this.c(),"mousemove",this.Ag);if(!this.cc)this.cc=new Ve(200),this.ua().h(this.cc,Xe,this.nh);this.nh();this.cc.start()}};r.ij=function(a){li(this,(a.detail>0?-1:1)*this.Hg);a.preventDefault()};
r.nh=function(){var a;if(this.O=="vertical"){var b=this.Ke,c=this.Wa.offsetTop;this.rh?b<c&&(a=oi(this,this.Wa)+this.Yb):b>c+this.Wa.offsetHeight&&(a=oi(this,this.Wa)-this.Yb)}else b=this.Ke,c=this.Wa.offsetLeft,this.rh?b>c+this.Wa.offsetWidth&&(a=oi(this,this.Wa)+this.Yb):b<c&&(a=oi(this,this.Wa)-this.Yb);u(a)&&ji(this,this.Wa,a)};r.lh=function(){this.cc&&this.cc.stop();var a=R(this.c());this.ua().ca(a,"mouseup",this.lh,!0).ca(this.c(),"mousemove",this.Ag)};
function pi(a,b){var c,d=a.c();c=Je(b);d=Je(d);c=new H(c.x-d.x,c.y-d.y);return a.O=="vertical"?c.y:c.x}r.Ag=function(a){this.Ke=pi(this,a)};function mi(a,b){var c=a.qa(),d=a.pa();if(a.O=="vertical"){var f=a.K.offsetHeight,g=a.c().clientHeight-f,f=pi(a,b)-f/2;return(d-c)*(g-f)/g+c}else return f=a.K.offsetWidth,g=a.c().clientWidth-f,f=pi(a,b)-f/2,(d-c)*f/g+c}
function oi(a,b){if(b==a.K)return a.s.o();else if(b==a.Ba)return a.s.o()+a.s.Jb();else e(Error("Illegal thumb element. Neither minThumb nor maxThumb"))}function li(a,b){var c=oi(a,a.K)+b,d=oi(a,a.Ba)+b,c=O(c,a.qa(),a.pa()-a.Ud),d=O(d,a.qa()+a.Ud,a.pa());qi(a,c,d-c)}function ji(a,b,c){var d=n;b==a.Ba&&c<=a.s.pa()&&c>=a.s.o()+a.Ud&&(d=c-a.s.o());var f=d||a.s.Jb();b==a.K&&c>=a.qa()&&c<=a.s.o()+f-a.Ud&&(b=f-(c-a.s.o()),ei(a.s,c)+ei(a.s,b)==ei(a.s,c+b)&&(qi(a,c,b),d=n));d!=n&&a.s.xd(d)}
function qi(a,b,c){if(a.qa()<=b&&b<=a.pa()-c&&a.Ud<=c&&c<=a.pa()-b&&!(b==a.o()&&c==a.Jb()))a.s.Mc=!0,a.s.xd(0),a.s.S(b),a.s.xd(c),a.s.Mc=!1,ii(a),a.dispatchEvent("change")}r.qa=function(){return this.s.qa()};r.$e=function(a){this.s.$e(a)};r.pa=function(){return this.s.pa()};r.zd=function(a){this.s.zd(a)};function ni(a,b){return b<=a.s.o()+a.s.Jb()/2?a.K:a.Ba}r.lj=function(){ii(this);gi(this);this.dispatchEvent("change")};
function ii(a){if(a.K&&!a.Ge){var b=ri(a,oi(a,a.K)),c=ri(a,oi(a,a.Ba));if(a.O=="vertical"){if(a.K.style.top=b.y+"px",a.Ba.style.top=c.y+"px",a.Q)b=si(c.y,b.y,a.K.offsetHeight),a.Q.style.top=b.ic+"px",a.Q.style.height=b.size+"px"}else if(a.K.style.left=b.x+"px",a.Ba.style.left=c.x+"px",a.Q)b=si(b.x,c.x,a.K.offsetWidth),a.Q.style.left=b.ic+"px",a.Q.style.width=b.size+"px"}}function si(a,b,c){var d=Math.ceil(c/2);return{ic:a+d,size:Math.max(b-a+c-2*d,0)}}
function ri(a,b){var c=new H;if(a.K){var d=a.qa(),f=a.pa(),f=b==d&&d==f?0:(b-d)/(f-d);a.O=="vertical"?(d=a.c().clientHeight-a.K.offsetHeight,f=Math.round(f*d),c.y=d-f):(d=Math.round(f*(a.c().clientWidth-a.K.offsetWidth)),c.x=d)}return c}
function ki(a,b){b=Math.min(a.pa(),Math.max(b,a.qa()));a.Ge&&a.te.stop(!0);var c=new $h,d=ni(a,b),f=ri(a,b);c.add(new hf(d,a.O=="vertical"?[d.offsetLeft,f.y]:[f.x,d.offsetTop],100));if(a.Q){var g=ri(a,a.s.o()),h=ri(a,a.s.o()+a.s.Jb());d==a.K?g=f:h=f;a.O=="vertical"?(f=si(h.y,g.y,a.K.offsetHeight),c.add(new hf(a.Q,[a.Q.offsetLeft,f.ic],100)),c.add(new kf(a.Q,a.Q.offsetHeight,f.size,100))):(f=si(g.x,h.x,a.K.offsetWidth),c.add(new hf(a.Q,[f.ic,a.Q.offsetTop],100)),c.add(new jf(a.Q,a.Q.offsetWidth,f.size,
100)))}a.te=c;a.ua().h(c,"end",a.Ti);a.Ge=!0;ji(a,d,b);c.play(!1)}r.Ti=function(){this.Ge=!1};r.ce=function(a){if(this.O!=a){var b=this.r(this.O),c=this.r(a);this.O=a;if(this.c()){for(var a=this.c(),d=Ic(a),f=!1,g=0;g<d.length;g++)d[g]==b&&(Db(d,g--,1),f=!0);if(f)d.push(c),a.className=d.join(" ");this.K.style.left=this.K.style.top="";this.Ba.style.left=this.Ba.style.top="";if(this.Q)this.Q.style.left=this.Q.style.top="",this.Q.style.width=this.Q.style.height="";ii(this)}}};
r.i=function(){fi.b.i.call(this);this.cc&&this.cc.j();delete this.cc;this.te&&this.te.j();delete this.te;delete this.K;delete this.Ba;this.Q&&delete this.Q;this.s.j();delete this.s;this.L&&(this.L.j(),delete this.L);this.hc&&(this.hc.j(),delete this.hc);this.Wb&&(this.Wb.j(),delete this.Wb);this.Bc&&(this.Bc.j(),delete this.Bc)};r.Hg=1;r.af=function(a){this.s.af(a)};r.o=function(){return this.s.o()};r.S=function(a){ji(this,this.K,a)};r.Jb=function(){return this.s.Jb()};
r.xd=function(a){ji(this,this.Ba,this.s.o()+a)};r.setVisible=function(a){Oe(this.c(),a);a&&ii(this)};function gi(a){var b=a.c();b&&(W(b,"valuemin",a.qa()),W(b,"valuemax",a.pa()),W(b,"valuenow",a.o()))};function ti(a){fi.call(this,a);this.s.xd(0)}F(ti,fi);ti.prototype.r=function(a){return a=="vertical"?"goog-slider-vertical":"goog-slider-horizontal"};function ui(a,b){this.e=a;this.ha=new ti;this.ha.ce("vertical");this.ha.zd(1);this.ha.af(0.01);vi=!1;this.ha.S((this.e.d.getZoom()-kh(this.e))/this.e.W.oa.bb());this.fa=T(this.ha,"change",function(b){vi==!1&&a.d.setZoom(b.target.o()*(a.W.oa.bb()-kh(a))+kh(a));vi=!1});this.Jk=T(this.e.d,gh,this.Ik,!1,this);this.mf=new Gg("");wg(this.mf,"weapp-zoomslider-add");this.Cg=new Gg("");wg(this.Cg,"weapp-zoomslider-substract");this.ui=T(this.mf,"action",function(){a.d.setZoom(Math.floor(a.d.getZoom()+1))});
this.wk=T(this.Cg,"action",function(){a.d.setZoom(Math.floor(a.d.getZoom()-1))});this.mf.Ab(b);this.ha.Ab(b);this.Cg.Ab(b)}var vi;F(ui,G);ui.prototype.Ik=function(){vi=!0;this.ha.S((this.e.d.getZoom()-kh(this.e))/this.e.W.oa.bb())};ui.prototype.i=function(){U(this.fa);U(this.Jk);U(this.ui);U(this.wk);this.ha.j()};function wi(a){this.$b=a;this.D=n;this.bf=[];this.xe=[]}
function xi(a,b,c,d){function f(a){var b=a*a;a*=a*a;return 6*a*b+-15*b*b+10*a}y(a.D)&&a.lg();a.D=new $h;var g=a.$b.getPosition();a.bf=[0,0,a.$b.getHeading(),a.$b.getTilt()];a.xe=[0,0,0,0];yi(a,g[0],g[1],b,c);var h=["begin","animate","end"],j=new Ye(a.bf,a.xe,3E3,f);T(j,h,a.$j,!1,a);a.D.add(j);if(d)c=Ih(g[0],g[1],b,c),b=a.$b.ia,c=Math.min(b,d)+c*0.2,c=Math.max(Math.max(b,d),c),b=new Ye([b],[c],1500,f),d=new Ye([c],[d],1500,f),T(b,h,a.Mh,!1,a),T(d,h,a.Mh,!1,a),h=new ai,h.add(b),h.add(d),a.D.add(h);
T(a.D,"end",a.lg,!1,a);a.D.play()}function yi(a,b,c,d,f){var c=gc(c,2*Math.PI),f=gc(f,2*Math.PI),g=c-f;g<-Math.PI?c+=2*Math.PI:g>Math.PI&&(f+=2*Math.PI);a.bf[0]=b;a.bf[1]=c;a.xe[0]=d;a.xe[1]=f}wi.prototype.$j=function(a){this.$b.setPosition(a.coords[0],a.coords[1]);this.$b.setHeading(a.coords[2]);this.$b.setTilt(a.coords[3])};wi.prototype.Mh=function(a){ih(this.$b,a.coords[0])};wi.prototype.lg=function(){if(y(this.D))this.D.j(),this.D=n};wi.prototype.cancel=function(){this.lg()};function zi(a,b,c){this.lat=a;this.eg=b;this.element=c;this.parentElement=n;this.enabled=!0;this.visible=!1}r=zi.prototype;r.Hd=function(a){this.parentElement&&this.detach();this.parentElement=a;this.parentElement.appendChild(this.element)};r.detach=function(){if(this.parentElement)$c(this.element),this.parentElement=n};r.enable=function(a){(this.enabled=a||!1)||this.show(!1)};r.isEnabled=p("enabled");r.$=p("visible");
r.show=function(a){this.visible=a==!0;this.element.style.display=this.visible?"block":"none"};function Ai(a,b,c,d){var f=S("div",{"class":"leaflet-marker-icon"}),g=S("a",{"class":"leaflet-popup-close-button",href:"#"}),c=S("div",{"class":"leaflet-popup-content"},S("h3",{},c),S("p",{},d)),c=S("div",{"class":"leaflet-popup-content-wrapper"},c),d=S("div",{"class":"leaflet-popup-tip-container"},S("div",{"class":"leaflet-popup-tip"}));this.Pc=S("div",{"class":"leaflet-popup"},g,c,d);c=S("div",{style:"position:absolute;"},f,this.Pc);zi.call(this,a,b,c);this.show(!1);this.zg(!1);f.onclick=D(this.zg,
this,!0);g.onclick=D(this.zg,this,!1)}F(Ai,zi);Ai.prototype.zg=function(a){a?(this.Pc.style.left=-Math.round((this.Pc.offsetWidth-this.element.offsetWidth)/2)+"px",this.Pc.style.opacity=1,this.Pc.style.visibility="visible"):(this.Pc.style.opacity=0,this.Pc.style.visibility="hidden")};function Bi(a,b,c){function d(){w(Ci)&&(Ci=new google.maps.Map(document.createElement("div")));Di?f():google.maps.event.addListenerOnce(Ci,"idle",function(){Di=!0;f()})}Yb.call(this,"Google Maps - "+a);this.zb=n;this.Aj=a;this.tj=b||0;this.ak=c||t;this.re=new Vb;this.cg=0;this.dg=[];var f=D(function(){this.zb=Ci.mapTypes[Ei(a)];ac(this);this.ak()},this);y(s.Rk)&&google.maps&&google.maps.Map?d():w(Fi)?(Fi="googleMapsCallback"+Ca(),s[Fi]=D(d,this),b=document.createElement("script"),Rc(document,"head",
i,i)[0].appendChild(b),b.type="text/javascript",b.src="http://maps.google.com/maps/api/js?v=3.5&sensor=false&callback="+Fi):s[Fi]=qa(s[Fi],D(d,this))}F(Bi,Yb);Bi.prototype.Uf=function(){return!w(this.zb)};var Fi=n,Ci=n,Di=!1;r=Bi.prototype;r.kd=function(){return w(this.zb)?0:this.zb.minZoom||0};r.bb=function(){return w(this.zb)?18:this.zb.maxZoom};r.Lb=function(){return w(this.zb)?256:this.zb.tileSize.width};
r.Rd=function(a,b,c){var d=D(function(a){a=a.getElementsByTagName("img");return a[this.tj]||a[0]},this);a.Xg=d;a.Vg=D(function(a){this.zb.releaseTile(a)},this);var f=this.zb.getTile(new google.maps.Point(a.x,a.y),a.zoom,document),d=d(f);d.onload=D(function(){if(Ja(a).src==Ja(a).__src__)a.state=20,this.gb--,b(a)},this);d.onerror=D(function(){a.Bf++;a.state=-10;this.gb--;c&&c(a)},this);a.setData(f);a.state=10;this.gb++};
r.uc=function(a){this.re.wb()>0&&Yc(a,"Map Data \u00a9 "+(new Date).getFullYear()+" "+this.re.Qa().join(", ")+" \u2013 ");Yc(a,S("a",{href:"http://www.google.com/intl/en-US_US/help/terms_maps.html",target:"_blank"},"Terms of Use"))};r.Be=q("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAAYCAMAAACV6r5dAAABI1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABxcXEAAAAAAAAAAAAAAAAAAAAAAAAAAAAJCQkLCwsRERESEhIZGRkjIyMsLCw6OjpNTU1WVlZhYWFvb28AAABycnJ5eXl8fHzc3NyFhYWGhoaHiIeLi4uSkpKWlpaYmJiampqenp6mpqahoaGlpaWhoaGpqampqamrq6uqqqqur66vr6+usK6ysrK4uLi9vb3CwsLExMTJycnNzc3Q0NDT09PU1NTV1dXX19fZ2dmDg4Pg4ODi4uLj4+Pj4+Pl5eXk5OTl5eXk5OTl5eXk5OTo6Ojq6urv7+/x8fH5+fn9/f3////54OudAAAAYHRSTlNgXlpSTUY/Pjs5NTMwLSsoJiQiIB4cGhcUEgoBAAYXJy43QElWWV1SFRwQQp2LiaQyqYmwRIi1hwi5hyiEWrxsfwW/xMTJycW3qA2ajweNi4+YAdios7vFy5/g6vD2/P7aB358AAADLElEQVR4XpWUe3OiSBTFOxpMfDsqKt2dZGeiBBlx8zABx3EiZBJk8phsMyb4wvv9P8VexCpnq7aym/PX6Uv/qpt7uBDOuRB8IzRva2AYxinbbkNcrKvTqdGrMvtt2hoG4Es63+JIa9PAM03PX81GNf1NXPAR3O5av+GCn858kvlQLe+bcJfRORORYuB3G/sHuJXsbZ1wZbYgaU23bPrxcqd4wGMygsQ/bKynCN/WCTegsxtfWa8dHVhxe3oNigTaZ+OzorPIDofD62EtOv0H14a4RUGKKLOwWUAIxWxLcPr8apo+jDOHXJlGduXldT6YeuNwdWeWI5wNgnusf61YnJyu5uSQb4THTBckV8m44GaVl3kiV0n54JTkmZvKmeCT6PTUYPFtv7q3AFURZAgLUuds0xw+hG+7skVPQlCv4UzSbNqFkDxAK23lfThb49MVyQ8e/JtWXZDeKmy1t0n8BRd7GH47gL4LHQyCF2fwJ9q8YPfQLyGenC3V+8moKRUOOTlewFX+ERP9YaA+T8DZwxX7BTe3cJG1GVde4MqBm/QjN0CN8J0ZdLrpUlU/YJxQD+Y7mhDYZRNv7MFd0sJMnuHiNo6Y/oJOawnn5ePASTSe8HkAV/uyrq+DYydL+J7BmChNz8NPXVg265jZBMg5duUI669LkjlxfXfhJGSOuPSAe5Q4eSKULytw/6C4qmAz02NwU4z3wn4i/QLfs4wPw7NdrZ5NzKGTstafTdqHebfUGAyYIPyx3fVhOXm6vr5f+M1q1gn9kRH0E8d0zw1dtJdJ2eY058KyW8M3mTvNlg8wCzyZIs7tuqQ6ruuNTJVkNL3YMs2vrYxMLZpXTfNLMyMzakw8x4fVebmnqt3jekq96v+U2jpfz7teK2SzxUq7qumM2Uq7UqtpDOt2o12N7OHr/GczlezDItmoVeqKjkC+dKQzxONxsi1LtzaTiH7juLB0EcWgSkeaVRiDWheWiAE7nrj/EuP0BdRcNKGjJanheqP/iUdD7n/EpOSgL2mcvwtHRbdevk5x/qRP7P24oAX1YuxctnIy5e/HMZrGh0Kx3MY43o1vo/mX3/jfzoX94Q7k9zgAAAAASUVORK5CYII=");
r.Xh=function(a){this.re=new Vb;var b=s.GAddCopyright,c=s.GVerify,d=s.GAppFeatures;s.GAddCopyright=D(function(){arguments.length>7&&arguments[7].length>0&&this.re.add(arguments[7])},this);s.GVerify=oa;s.GAppFeatures=D(function(){this.cg--;if(this.cg<=0)s.GAddCopyright=b,s.GVerify=c,s.GAppFeatures=d,N(this.dg,function(a){a.parentNode.removeChild(a)}),this.dg=[],this.vf()},this);N(a,function(a){var b=document.createElement("script");Rc(document,"head",i,i)[0].appendChild(b);b.type="text/javascript";
this.dg.push(b);b.src="http://maps.google.com/maps?vp="+(hc(a.Li)+","+hc(a.Mi))+"&z="+a.Kk+"&spn="+(hc(a.uk)+","+hc(a.vk))+"&t="+Gi(this.Aj);this.cg++},this)};function Ei(a){switch(a){case "Terrain":return google.maps.MapTypeId.TERRAIN;case "Hybrid":return google.maps.MapTypeId.HYBRID;case "Roadmap":return google.maps.MapTypeId.ROADMAP;default:case "Satellite":return google.maps.MapTypeId.SATELLITE}}
function Gi(a){switch(a){case "Terrain":return"p";case "Hybrid":return"h";case "Roadmap":return"m";default:case "Satellite":return"k"}}var Hi=D(document.createElement,document);document.createElement=function(a){var b=Hi(a);if(a=="img")b.crossOrigin="";return b};function Ii(a,b){this.Pk=a;this.ha=new ti;this.ha.ce("horizontal");this.ha.$e(0);this.ha.zd(1);this.ha.af(0.01);this.ha.Jh=!0;this.ha.S(a.Te);this.fa=T(this.ha,"change",function(b){a.Te=b.target.o()});this.ha.Ab(b)}F(Ii,G);Ii.prototype.i=function(){U(this.fa);this.ha.j()};function Ji(a,b){ec.call(this,"Bing Maps - "+a);var c="bingsCallback_"+a,d="http://dev.virtualearth.net/REST/V1/Imagery/Metadata/"+a+"?key="+b+"&jsonp="+c;s[c]=u(s[c])?qa(D(this.bi,this),s[c]):D(this.bi,this);c=document.createElement("script");c.src=d;c.type="text/javascript";Rc(document,"head",i,i)[0].appendChild(c)}F(Ji,ec);r=Ji.prototype;r.Uf=function(){return!w(this.kb)};r.bi=function(a){this.Td=a;if(a.resourceSets.length>0)this.kb=a.resourceSets[0].resources[0],ac(this);this.vf()};
r.kd=function(){return w(this.kb)?0:this.kb.zoomMin};r.bb=function(){return w(this.kb)?18:this.kb.zoomMax};r.Lb=q(256);function Ki(a,b,c){for(var d="",f=1;f<=a;f++)d+=(c>>a-f&1)<<1|b>>a-f&1;return d}r.Nd=function(a,b,c){return w(this.kb)?"":this.kb.imageUrl.replace("{subdomain}",this.kb.imageUrlSubdomains[fc(this.kb.imageUrlSubdomains.length)]).replace("{quadkey}",Ki(a,b,c))};r.Rd=function(a,b,c){return w(this.kb)?!1:Ji.b.Rd.call(this,a,b,c)};r.uc=function(a){w(this.Td)||Yc(a,this.Td.copyright)};
r.Be=function(){return!w(this.Td)?this.Td.brandLogoUri:n};r.Td=n;r.kb=n;function Li(a){return 1-Math.pow(1-a,3)};function Mi(a,b){this.e=a;this.Oa=!1;this.Tb=i;this.Re=this.Qe=this.Sb=this.Rb=this.$h=0;this.Jc=this.fa=n;T(this.e.a.canvas,"mousedown",D(this.ck,this));T(R(this.e.a.canvas),"mouseup",D(this.dk,this));this.Fd=b||n}r=Mi.prototype;
r.ck=function(a){if(!Ad(a,2)&&!a.ctrlKey&&!a.altKey){y(this.Fd)&&this.Fd.cancel();if(this.Jc)this.Jc.stop(!1),this.Jc.j(),this.Jc=n;this.Oa=!0;this.Qe=this.Rb=a.screenX;this.Re=this.Sb=a.screenY;if(Ad(a,1)||Ad(a,0)&&a.shiftKey)if(this.Tb=this.e.d.ld(),y(this.Tb)){if(window.Id)window.Id.lat=hc(this.Tb[0]),window.Id.eg=hc(this.Tb[1]),window.Id.enable(!0);this.$h=this.e.d.getTilt()==0?this.e.d.ia:Math.sin(Math.PI-this.e.d.getTilt()-(Math.PI-Math.asin((1+this.e.d.ia/6378137)*Math.sin(this.e.d.getTilt()))))/
Math.sin(this.e.d.getTilt())*6378137}if(!w(this.fa))U(this.fa),this.fa=n;this.fa=T(R(this.e.a.canvas),"mousemove",D(this.mg,this));a.preventDefault()}};
r.dk=function(a){if(this.Oa){a.preventDefault();this.Tb=i;window.Id&&window.Id.enable(!1);this.Oa=!1;if(!w(this.fa))U(this.fa),this.fa=n;if(Ad(a,0)){var b=a.screenX-this.Qe,c=a.screenY-this.Re,a=Math.sqrt(Math.pow(b,2)+Math.pow(c,2));b/=a;c/=a;this.Rb==this.Qe&&this.Sb==this.Re&&(a*=2);if(a>6)a=Math.max(15,a)*6,this.Jc=new Ye([this.Rb,this.Sb],[this.Rb+a*b,this.Sb+a*c],1300,Li),T(this.Jc,["animate"],this.qj,!1,this),this.Jc.play(!1)}}};
r.Xe=function(a,b){if(u(this.Tb)){var c=a/this.e.a.canvas.width*Math.PI*-2,d=b/this.e.a.canvas.height*Math.PI/2;if(w(this.Tb))this.e.d.setHeading(this.e.d.getHeading()+c),this.e.d.setTilt(this.e.d.getTilt()+d);else{var f=this.e.d,g=this.Tb[0],h=this.Tb[1],j=this.$h;f.od+=c;c=Math.asin(6378137/Math.sqrt(j*j+40680631590769));f.Vb=O(f.Vb+d,-c,c);d=Math.asin(j/6378137*Math.sin(f.Vb));Math.abs(f.Vb)<1.0E-4?ih(f,j):ih(f,(Math.sin(Math.PI-f.Vb-d)/Math.sin(f.Vb)-1)*6378137);g-=Math.cos(f.od)*d;f.setPosition(g,
h+Math.sin(f.od)*d/Math.cos(g))}}else f=Math.PI*(1/this.e.a.canvas.height)*(this.e.de/Math.pow(2,this.e.d.getZoom())),hh(this.e.d,b*f,-2*a*f)};r.mg=function(a){this.Xe(a.screenX-this.Rb,a.screenY-this.Sb);this.Qe=this.Rb;this.Re=this.Sb;this.Rb=a.screenX;this.Sb=a.screenY;a.preventDefault()};r.qj=function(a){this.Xe(a.x-this.Rb,a.y-this.Sb);this.Rb=a.x;this.Sb=a.y};function Ni(a,b){this.e=a;this.v=new Ve(20);this.Lg=this.Kg=0.1;this.Tf=!1;this.xc=new X("");this.xc.cf|=255;this.ti=T(this.xc,"activate",this.Xj,!1,this);this.Pi=T(this.xc,"deactivate",this.Yj,!1,this);this.Qk=T(this.xc,"enter",this.Zj,!1,this);this.Eg=T(this.v,Xe,this.sd,!1,this);this.Oj=T(R(this.e.a.canvas),"mousemove",this.mg,!1,this);this.Nj=T(R(this.e.a.canvas),"mousedown",function(){this.Tf=!0},!1,this);this.Pj=T(R(this.e.a.canvas),"mouseup",function(){this.Tf=!1},!1,this);this.xc.Ab(b)}
F(Ni,G);r=Ni.prototype;r.Zj=function(){this.Tf&&(this.xc.Ha(4,!0),this.v.start())};r.Xj=function(){this.v.start()};r.Yj=function(){this.v&&this.v.stop()};r.sd=function(){this.Xe(this.Kg,this.Lg)};r.mg=function(a){this.Kg=-(a.offsetX-a.target.offsetWidth/2)*2;this.Lg=-(a.offsetY-a.target.offsetHeight/2)};r.i=function(){U(this.ti);U(this.Oj);U(this.Pj);U(this.Nj);U(this.Pi);U(this.Eg);this.xc.j()};
r.Xe=function(a,b){var c=Math.PI*(1/this.e.a.canvas.height)*(this.e.de/Math.pow(2,this.e.d.getZoom()));hh(this.e.d,b*c,-2*a*c)};function Oi(a,b){this.e=a;this.f=b;this.gg=new Rb}function Pi(a,b,c){b=b||Ca();c.Hd(a.f);a.gg.set(b,c)}
Oi.prototype.Dk=function(a){a=this.gg.get(a);if(a.isEnabled()){var b;a:{var c=this.e;b=a.lat;var d=a.eg;b=P(b);var d=P(d),f=Math.cos(b),f=new Kh(Math.sin(d)*f,Math.sin(b),Math.cos(d)*f),d=c.a.Oe.multiply(new Z([[f.x],[f.y],[f.G],[1]]));if(Ng(d,3,0)==0)b=n;else{d=d.multiply(1/Ng(d,3,0));b=(Ng(d,0,0)+1)/2*c.a.pb;var d=(Ng(d,1,0)-1)/-2*c.a.ob,g=1;if(b<0||b>c.a.pb||d<0||d>c.a.ob)g=0;else{c=Lh(0.5,0.5,0,c.a.Pe,1,1);if(w(c)){b=n;break a}var g=f.x-c.x,h=f.y-c.y,j=f.G-c.G,g=Math.sqrt(g*g+h*h+j*j),f=f.Dg(c).normalize(),
f=Nh(c,f),g=w(f)?0:Math.abs(g-f[0])<Math.abs(g-f[1])?1:0}b=[b,d,g]}}y(b)?(d=b[1],a.element.style.left=b[0].toFixed()+"px",a.element.style.top=d.toFixed()+"px",a.enabled&&a.show(!0),a.show(b[2]>0)):a.show(!1)}};function Qi(a,b,c,d,f,g,h,j,k,l){ec.call(this,a);b.charAt(b.length-1)!="?"&&(b+="?");this.jf=0;if(b.length>0)this.url=b,this.jf=1;this.version=c;this.uj=d;this.format=g;this.minZoom=k;this.maxZoom=l;this.tileSize=256;f=="EPSG:900913"||f=="EPSG:3857"?this.di=f:(this.jf=0,e(Error(f+" is an unsupported CRS, please use either EPSG:900913 or EPSG:3857.  WMS Server must support one of these.")));this.styles=h;j.length>0&&j.charAt(0)!="&"&&(j="&"+j);this.Wi=j}F(Qi,ec);Qi.prototype.kd=p("minZoom");
Qi.prototype.bb=p("maxZoom");Qi.prototype.Lb=q(256);
Qi.prototype.Nd=function(a,b,c){function d(a,b){var c=Math.PI-2*Math.PI*a/Math.pow(2,b);return 180/Math.PI*Math.atan(0.5*(Math.exp(c)-Math.exp(-c)))}function f(a){a>89.5&&(a=89.5);a<-89.5&&(a=-89.5);a=Math.tan(0.5*(Math.PI*0.5-a*(Math.PI/180)));return 0-6378137*Math.log(a)}var g="";if(this.jf==1){var g=f(d(c,a)),h=f(d(c+1,a)),c=6378137*(b/Math.pow(2,a)*360-180)*(Math.PI/180),j=6378137*((b+1)/Math.pow(2,a)*360-180)*(Math.PI/180),a=Math.max(g,h),b=Math.max(c,j),h=Math.min(g,h),c=Math.min(c,j),g=this.url+
"service=WMS&request=GetMap&version="+this.version,g=g+"&Width="+this.tileSize+"&Height="+this.tileSize,g=g+"&Layers="+this.uj+"&Format="+this.format;this.version.substr(0,3)=="1.0"||this.version.substr(0,3)=="1.1"?g=g+"&SRS="+this.di:this.version.substr(0,3)=="1.3"&&(g=g+"&CRS="+this.di);g=g+"&STYLES="+this.styles;g=g+"&BBOX="+c+","+h+","+b+","+a;g+=this.Wi}return g};function Ri(a){Qi.call(this,"Georeferencer.org - "+a,"http://wms.georeferencer.org/map/"+a+"/wms-polynomial","1.1.1","raster","EPSG:900913","image/png","","TRANSPARENT=true",0,18);var b="georeferencerCallback_"+a.substr(0,22);s[b]=D(function(a){var c=a.document;if(y(c)){var a=c.geotrans,g=c.width,h=c.height;if(a&&g&&h&&a.length>5){var j=g*a[0],c=h*a[1],k=g*a[2],l=h*a[3],o=g*(a[0]+a[2]);h*=a[1]+a[3];g=a[4]+Math.min(Math.min(0,j),Math.min(k,o));j=a[4]+Math.max(Math.max(0,j),Math.max(k,o));k=a[5]+Math.min(Math.min(0,
c),Math.min(l,h));a=a[5]+Math.max(Math.max(0,c),Math.max(l,h));this.Hh=P(k);this.Fh=P(a);this.Ih=P(g);this.Gh=P(j);this.pe=[]}}s[b]=n},this);var c=document.createElement("script");c.src="http://www.georeferencer.org/map/"+a+".js?callback="+b;c.type="text/javascript";Rc(document,"head",i,i)[0].appendChild(c)}F(Ri,Qi);Ri.prototype.uc=function(a){Yc(a,S("a",{href:"http://www.georeferencer.org/",target:"_blank"},"Georeferencer.org"))};function Si(a){this.e=a;this.hc=new Xh(a.a.canvas);this.fa=T(this.hc,"mousewheel",function(a){this.Aa(-(a.bc==0?0:a.bc<0?-1:1));a.preventDefault()},!1,this);this.Oi=T(a.a.canvas,"dblclick",D(function(a){ih(this.d,this.d.ia/2);var c=lh(this,a.offsetX,a.offsetY,!0)||this.d.ld(this);if(c){var d=(this.d.Ob+c[1])/2;Math.abs(this.d.Ob-c[1])>Math.PI&&(d+=Math.PI);this.d.setPosition((this.d.yb+c[0])/2,d)}a.preventDefault()},a));this.pk=T(a.a.canvas,"mouseup",D(function(a){if(Ad(a,2)){ih(this.d,this.d.ia*
2);var c=lh(this,a.offsetX,a.offsetY,!0)||this.d.ld(this);c&&this.d.setPosition(2*this.d.yb-c[0],2*this.d.Ob-c[1]);a.preventDefault()}},a));this.Tj=T(a.a.canvas,"contextmenu",function(a){a.preventDefault()});this.D=n;this.Vc=this.Uc=0}F(Si,G);
Si.prototype.Aa=function(a){var b=120;a*=-1;if(this.D)if(this.Vc>this.Uc==a>0)return;else this.D.j(),this.D=n,b*=(this.e.d.ia-this.Uc)/(this.Vc-this.Uc),a=this.Vc,this.Vc=this.Uc,this.Uc=a;else this.Uc=this.e.d.ia,this.Vc=O(this.Uc*Math.pow(2,a),250,1E7);if(!(isNaN(b)||b<=0)){var a=this.e.d.getPosition(),c=this.e.d.ld()||a,d=this.Vc/this.e.d.ia;a.push(this.e.d.ia);this.D=new Ye(a,[c[0]+d*(a[0]-c[0]),c[1]+d*(a[1]-c[1]),this.Vc],b);T(this.D,["animate","finish"],function(a){this.e.d.setPosition(a.x,
a.y);ih(this.e.d,a.G)},!1,this);T(this.D,["finish"],this.Vi,!1,this);this.D.play(!1)}};Si.prototype.Vi=function(){if(this.D)this.D.j(),this.D=n};Si.prototype.i=function(){U(this.fa);U(this.Oi);U(this.pk);U(this.Tj);this.hc.j();this.D.j()};function Ti(a,b){var c=S("div",{style:"position:absolute;width:16px;height:32px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBoZWlnaHQ9IjMyIiB3aWR0aD0iMTYiIHZlcnNpb249IjEuMSI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwtMTAyMC4zNjIyKSI+PHBhdGggc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgZD0ibTE1LDcuODdjMCwzLjQ3LTIuNzcsNi4yOC02LjE5LDYuMjhzLTYuMTktMi44MS02LjE5LTYuMjgsMi43Ny02LjI4LDYuMTktNi4yOCw2LjE5LDIuODEsNi4xOSw2LjI4em0tNi4xNiwyMy4ydi0xNi41IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjcwNzEwNjc4LDEwMjAuNzE1OCkiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2Utd2lkdGg9IjFweCIgZmlsbD0iI2UxMzUxZSIvPjwvZz48L3N2Zz4=);margin:-32px 0 0 -8px;opacity:0.8;"});
zi.call(this,a,b,c);this.show(!1)}F(Ti,zi);function Ui(a,b,c,d,f,g,h,j){var k,l=c.offsetParent;if(l){var o=l.tagName=="HTML"||l.tagName=="BODY";if(!o||Ae(l,"position")!="static")k=He(l),o||(k=Ka(k,new H(l.scrollLeft,l.scrollTop)))}l=Ne(a);(o=Ge(a))&&l.uh(new xe(o.left,o.top,o.right-o.left,o.bottom-o.top));var o=Oc(a),m=Oc(c);if(o.A!=m.A){var A=o.A.body,m=m.A.parentWindow||m.A.defaultView,v=new H(0,0),Y=R(A)?R(A).parentWindow||R(A).defaultView:window,Jd=A;do{var hi=Y==m?He(Jd):Je(Jd);v.x+=hi.x;v.y+=hi.y}while(Y&&Y!=m&&(Jd=Y.frameElement)&&
(Y=Y.parent));A=Ka(v,He(A));I&&!jd(o)&&(A=Ka(A,kd(o)));l.left+=A.x;l.top+=A.y}a=(b&4&&Ie(a)?b^2:b)&-5;b=new H(a&2?l.left+l.width:l.left,a&1?l.top+l.height:l.top);k&&(b=Ka(b,k));f&&(b.x+=(a&2?-1:1)*f.x,b.y+=(a&1?-1:1)*f.y);var x;if(h&&(x=Ge(c))&&k)x.top-=k.y,x.right-=k.x,x.bottom-=k.y,x.left-=k.x;a:{k=b.ja();f=0;a=(d&4&&Ie(c)?d^2:d)&-5;d=Le(c);j=j?j.ja():d.ja();if(g||a!=0)a&2?k.x-=j.width+(g?g.right:0):g&&(k.x+=g.left),a&1?k.y-=j.height+(g?g.bottom:0):g&&(k.y+=g.top);if(h){if(x){g=k;f=0;if((h&65)==
65&&(g.x<x.left||g.x>=x.right))h&=-2;if((h&132)==132&&(g.y<x.top||g.y>=x.bottom))h&=-5;if(g.x<x.left&&h&1)g.x=x.left,f|=1;g.x<x.left&&g.x+j.width>x.right&&h&16&&(j.width-=g.x+j.width-x.right,f|=4);if(g.x+j.width>x.right&&h&1)g.x=Math.max(x.right-j.width,x.left),f|=1;h&2&&(f|=(g.x<x.left?16:0)|(g.x+j.width>x.right?32:0));if(g.y<x.top&&h&4)g.y=x.top,f|=2;g.y>=x.top&&g.y+j.height>x.bottom&&h&32&&(j.height-=g.y+j.height-x.bottom,f|=8);if(g.y+j.height>x.bottom&&h&4)g.y=Math.max(x.bottom-j.height,x.top),
f|=2;h&8&&(f|=(g.y<x.top?64:0)|(g.y+j.height>x.bottom?128:0));h=f}else h=256;f=h;if(f&496){c=f;break a}}Be(c,k);if(!Lc(d,j))g=jd(Oc(R(c))),I&&(!g||!L("8"))?(h=c.style,g?(I?(g=Re(c,ze(c,"paddingLeft")),d=Re(c,ze(c,"paddingRight")),k=Re(c,ze(c,"paddingTop")),x=Re(c,ze(c,"paddingBottom")),g=new La(k,d,x,g)):(g=ye(c,"paddingLeft"),d=ye(c,"paddingRight"),k=ye(c,"paddingTop"),x=ye(c,"paddingBottom"),g=new La(parseFloat(k),parseFloat(d),parseFloat(x),parseFloat(g))),c=Ue(c),h.pixelWidth=j.width-c.left-g.left-
g.right-c.right,h.pixelHeight=j.height-c.top-g.top-g.bottom-c.bottom):(h.pixelWidth=j.width,h.pixelHeight=j.height)):(c=c.style,J?c.MozBoxSizing="border-box":K?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=j.width+"px",c.height=j.height+"px");c=f}return c};function Vi(){}Vi.prototype.Xd=aa();function Wi(a,b){this.element=a;this.wf=b}F(Wi,Vi);Wi.prototype.Xd=function(a,b,c){Ui(this.element,this.wf,a,b,i,c)};function Xi(a,b,c){Wi.call(this,a,b);this.wi=c}F(Xi,Wi);Xi.prototype.eh=q(5);Xi.prototype.Xd=function(a,b,c,d){var f=Ui(this.element,this.wf,a,b,n,c,10,d);if(f&496){var g=Yi(f,this.wf),b=Yi(f,b),f=Ui(this.element,g,a,b,n,c,10,d);f&496&&(g=Yi(f,g),b=Yi(f,b),this.wi?Ui(this.element,g,a,b,n,c,this.eh(),d):Ui(this.element,g,a,b,n,c,0,d))}};function Yi(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Zi(a,b,c,d){Xi.call(this,a,b,c||d);this.nk=d}F(Zi,Xi);Zi.prototype.eh=function(){return 65|(this.nk?32:132)};function $i(){}F($i,mg);ca($i);$i.prototype.t=function(a){return a.Y().t("div",this.r())};$i.prototype.ka=function(a,b){if(b.tagName=="HR"){var c=b,b=this.t(a);c.parentNode&&c.parentNode.insertBefore(b,c);$c(c)}else Q(b,this.r());return b};$i.prototype.setContent=aa();$i.prototype.r=q("goog-menuseparator");function aj(a,b){X.call(this,n,a||$i.Ea(),b);yg(this,1,!1);yg(this,2,!1);yg(this,4,!1);yg(this,32,!1);this.p=1}F(aj,X);aj.prototype.da=function(){aj.b.da.call(this);qf(this.c(),"separator")};rg("goog-menuseparator",function(){return new aj});function bj(){}ca(bj);r=bj.prototype;r.vb=aa();function cj(a,b){if(a)a.tabIndex=b?0:-1}r.t=function(a){return a.Y().t("div",this.jd(a).join(" "))};r.X=function(a){return a};r.Za=function(a){return a.tagName=="DIV"};r.ka=function(a,b){b.id&&dg(a,b.id);var c=this.r(),d=!1,f=Ic(b);f&&N(f,function(b){b==c?d=!0:b&&(b==c+"-disabled"?a.oc(!1):b==c+"-horizontal"?a.ce(dj):b==c+"-vertical"&&a.ce(ej))},this);d||Q(b,c);fj(this,a,this.X(b));return b};
function fj(a,b,c){if(c)for(var d=c.firstChild,f;d&&d.parentNode==c;){f=d.nextSibling;if(d.nodeType==1){var g=a.Gf(d);if(g)g.f=d,b.isEnabled()||g.oc(!1),b.Dd(g),g.ka(d)}else(!d.nodeValue||sa(d.nodeValue)=="")&&c.removeChild(d);d=f}}r.Gf=function(a){a:{for(var b=Ic(a),c=0,d=b.length;c<d;c++)if(a=b[c]in sg?sg[b[c]]():n)break a;a=n}return a};r.pd=function(a){a=a.c();Qe(a,!0,J);if(I)a.hideFocus=!0;var b=this.vb();b&&qf(a,b)};r.Z=function(a){return a.c()};r.r=q("goog-container");
r.jd=function(a){var b=this.r(),c=[b,a.O==dj?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};function gj(){}F(gj,bj);ca(gj);r=gj.prototype;r.vb=q("menu");r.Za=function(a){return a.tagName=="UL"||gj.b.Za.call(this,a)};r.Gf=function(a){return a.tagName=="HR"?new aj:gj.b.Gf.call(this,a)};r.wc=function(a,b){return bd(a.c(),b)};r.r=q("goog-menu");r.pd=function(a){gj.b.pd.call(this,a);W(a.c(),"haspopup","true")};rg("goog-menuseparator",function(){return new aj});function hj(){this.Tg=[]}F(hj,mg);ca(hj);function ij(a,b){var c=a.Tg[b];if(!c){switch(b){case 0:c=a.r()+"-highlight";break;case 1:c=a.r()+"-checkbox";break;case 2:c=a.r()+"-content"}a.Tg[b]=c}return c}r=hj.prototype;r.vb=q("menuitem");r.t=function(a){var b=a.Y().t("div",this.jd(a).join(" "),jj(this,a.getContent(),a.Y()));kj(this,a,b,!!(a.T&8)||!!(a.T&16));return b};r.X=function(a){return a&&a.firstChild};
r.ka=function(a,b){var c=ad(b),d=ij(this,2);c&&c.className.indexOf(d)!=-1||b.appendChild(jj(this,b.childNodes,a.Y()));yb(Ic(b),"goog-option")&&(a.Ze(!0),this.Ze(a,b,!0));return hj.b.ka.call(this,a,b)};r.setContent=function(a,b){var c=this.X(a),d=lj(this,a)?c.firstChild:n;hj.b.setContent.call(this,a,b);d&&!lj(this,a)&&c.insertBefore(d,c.firstChild||n)};function jj(a,b,c){a=ij(a,2);return c.t("div",a,b)}r.Ze=function(a,b,c){b&&(qf(b,c?"menuitemcheckbox":this.vb()),kj(this,a,b,c))};
function lj(a,b){var c=a.X(b);if(c){var c=c.firstChild,d=ij(a,1);return!!c&&!!c.className&&c.className.indexOf(d)!=-1}return!1}function kj(a,b,c,d){d!=lj(a,c)&&(d?Q(c,"goog-option"):Jc(c,"goog-option"),c=a.X(c),d?(a=ij(a,1),c.insertBefore(b.Y().t("div",a),c.firstChild||n)):c.removeChild(c.firstChild))}r.Ld=function(a){switch(a){case 2:return ij(this,0);case 16:case 8:return"goog-option-selected";default:return hj.b.Ld.call(this,a)}};
r.If=function(a){var b=ij(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return hj.b.If.call(this,a)}};r.r=q("goog-menuitem");function mj(a,b,c,d){X.call(this,a,d||hj.Ea(),c);this.S(b)}F(mj,X);r=mj.prototype;r.o=function(){var a=this.hg;return a!=n?a:this.hd()};r.S=ba("hg");r.Ze=function(a){yg(this,16,a);var b=this.c();b&&this.k.Ze(this,b,a)};r.hd=function(){var a=this.getContent();return z(a)?(a=vb(a,function(a){return yb(Ic(a),"goog-menuitem-accel")?"":gd(a)}).join(""),ra(a)):mj.b.hd.call(this)};
r.Hc=function(a){var b=this.getParent();if(b){var c=b.Rh;b.Rh=n;if(b=c&&ea(a.clientX))b=new H(a.clientX,a.clientY),b=c==b?!0:!c||!b?!1:c.x==b.x&&c.y==b.y;if(b)return}mj.b.Hc.call(this,a)};rg("goog-menuitem",function(){return new mj(n)});function nj(a,b,c){$f.call(this,c);this.k=b||bj.Ea();this.O=a||ej}F(nj,$f);var dj="horizontal",ej="vertical";r=nj.prototype;r.Yf=n;r.L=n;r.k=n;r.O=n;r.U=!0;r.$a=!0;r.Cf=!0;r.la=-1;r.aa=n;r.Pb=!1;r.xi=!1;r.fk=!0;r.Eb=n;r.Z=function(){return this.Yf||this.k.Z(this)};r.Ae=function(){return this.L||(this.L=new If(this.Z()))};r.t=function(){this.f=this.k.t(this)};r.X=function(){return this.k.X(this.c())};r.Za=function(a){return this.k.Za(a)};
r.tb=function(a){this.f=this.k.ka(this,a);if(a.style.display=="none")this.U=!1};r.da=function(){nj.b.da.call(this);hg(this,function(a){a.H&&oj(this,a)},this);var a=this.c();this.k.pd(this);this.setVisible(this.U,!0);this.ua().h(this,"enter",this.Jf).h(this,"highlight",this.Kf).h(this,"unhighlight",this.Qf).h(this,"open",this.kj).h(this,"close",this.cj).h(a,"mousedown",this.Gc).h(R(a),"mouseup",this.ej).h(a,["mousedown","mouseup","mouseover","mouseout"],this.bj);this.ec()&&pj(this,!0)};
function pj(a,b){var c=a.ua(),d=a.Z();b?c.h(d,"focus",a.Fc).h(d,"blur",a.Nb).h(a.Ae(),"key",a.cb):c.ca(d,"focus",a.Fc).ca(d,"blur",a.Nb).ca(a.Ae(),"key",a.cb)}r.Pa=function(){qj(this,-1);this.aa&&this.aa.R(!1);this.Pb=!1;nj.b.Pa.call(this)};r.i=function(){nj.b.i.call(this);if(this.L)this.L.j(),this.L=n;this.k=this.aa=this.Eb=this.Yf=n};r.Jf=q(!0);
r.Kf=function(a){var b=lg(this,a.target);if(b>-1&&b!=this.la){var c=jg(this,this.la);c&&c.Bb(!1);this.la=b;c=jg(this,this.la);this.Pb&&c.setActive(!0);this.fk&&this.aa&&c!=this.aa&&(c.T&64?c.R(!0):this.aa.R(!1))}W(this.c(),"activedescendant",a.target.c().id)};r.Qf=function(a){if(a.target==jg(this,this.la))this.la=-1;W(this.c(),"activedescendant","")};r.kj=function(a){if((a=a.target)&&a!=this.aa&&a.getParent()==this)this.aa&&this.aa.R(!1),this.aa=a};r.cj=function(a){if(a.target==this.aa)this.aa=n};
r.Gc=function(a){if(this.$a)this.Pb=!0;var b=this.Z();b&&fd(b)?b.focus():a.preventDefault()};r.ej=function(){this.Pb=!1};r.bj=function(a){var b;a:{b=a.target;if(this.Eb)for(var c=this.c();b&&b!==c;){var d=b.id;if(d in this.Eb){b=this.Eb[d];break a}b=b.parentNode}b=n}if(b)switch(a.type){case "mousedown":b.Gc(a);break;case "mouseup":b.Hc(a);break;case "mouseover":b.Pf(a);break;case "mouseout":b.Of(a)}};r.Fc=aa();r.Nb=function(){qj(this,-1);this.Pb=!1;this.aa&&this.aa.R(!1)};
r.cb=function(a){return this.isEnabled()&&this.$()&&(ig(this)!=0||this.Yf)&&this.nd(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
r.nd=function(a){var b=jg(this,this.la);if(b&&typeof b.cb=="function"&&b.cb(a))return!0;if(this.aa&&this.aa!=b&&typeof this.aa.cb=="function"&&this.aa.cb(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case 27:if(this.ec())this.Z().blur();else return!1;break;case 36:rj(this);break;case 35:sj(this);break;case 38:if(this.O==ej)tj(this);else return!1;break;case 37:if(this.O==dj)kg(this)?uj(this):tj(this);else return!1;break;case 40:if(this.O==ej)uj(this);else return!1;
break;case 39:if(this.O==dj)kg(this)?tj(this):uj(this);else return!1;break;default:return!1}return!0};function oj(a,b){var c=b.c(),c=c.id||(c.id=cg(b));if(!a.Eb)a.Eb={};a.Eb[c]=b}r.Dd=function(a,b){nj.b.Dd.call(this,a,b)};r.Ed=function(a,b,c){a.cf|=2;a.cf|=64;(this.ec()||!this.xi)&&yg(a,32,!1);ug(a,!1);nj.b.Ed.call(this,a,b,c);c&&this.H&&oj(this,a);b<=this.la&&this.la++};
r.removeChild=function(a,b){if(a=C(a)?fg(this,a):a){var c=lg(this,a);c!=-1&&(c==this.la?a.Bb(!1):c<this.la&&this.la--);var d=a.c();if(d&&d.id&&this.Eb)c=this.Eb,d=d.id,d in c&&delete c[d]}a=nj.b.removeChild.call(this,a,b);ug(a,!0);return a};r.ce=function(a){this.c()&&e(Error("Component already rendered"));this.O=a};r.$=p("U");
r.setVisible=function(a,b){if(b||this.U!=a&&this.dispatchEvent(a?"show":"hide")){this.U=a;var c=this.c();c&&(Oe(c,a),this.ec()&&cj(this.Z(),this.$a&&this.U),b||this.dispatchEvent(this.U?"aftershow":"afterhide"));return!0}return!1};r.isEnabled=p("$a");r.oc=function(a){if(this.$a!=a&&this.dispatchEvent(a?"enable":"disable"))a?(this.$a=!0,hg(this,function(a){a.ri?delete a.ri:a.oc(!0)})):(hg(this,function(a){a.isEnabled()?a.oc(!1):a.ri=!0}),this.Pb=this.$a=!1),this.ec()&&cj(this.Z(),a&&this.U)};
r.ec=p("Cf");r.pc=function(a){a!=this.Cf&&this.H&&pj(this,a);this.Cf=a;this.$a&&this.U&&cj(this.Z(),a)};function qj(a,b){var c=jg(a,b);c?c.Bb(!0):a.la>-1&&jg(a,a.la).Bb(!1)}r.Bb=function(a){qj(this,lg(this,a))};function rj(a){vj(a,function(a,c){return(a+1)%c},ig(a)-1)}function sj(a){vj(a,function(a,c){a--;return a<0?c-1:a},0)}function uj(a){vj(a,function(a,c){return(a+1)%c},a.la)}function tj(a){vj(a,function(a,c){a--;return a<0?c-1:a},a.la)}
function vj(a,b,c){for(var c=c<0?lg(a,a.aa):c,d=ig(a),c=b.call(a,c,d),f=0;f<=d;){var g=jg(a,c);if(g&&a.Sg(g)){qj(a,c);break}f++;c=b.call(a,c,d)}}r.Sg=function(a){return a.$()&&a.isEnabled()&&!!(a.T&2)};function wj(){}F(wj,mg);ca(wj);wj.prototype.r=q("goog-menuheader");function xj(a,b,c){X.call(this,a,c||wj.Ea(),b);yg(this,1,!1);yg(this,2,!1);yg(this,4,!1);yg(this,32,!1);this.p=1}F(xj,X);rg("goog-menuheader",function(){return new xj(n)});function yj(a,b){nj.call(this,ej,b||gj.Ea(),a);this.pc(!1)}F(yj,nj);r=yj.prototype;r.nf=!0;r.yi=!1;r.r=function(){return this.k.r()};r.wc=function(a){if(this.k.wc(this,a))return!0;for(var b=0,c=ig(this);b<c;b++){var d=jg(this,b);if(typeof d.wc=="function"&&d.wc(a))return!0}return!1};r.Xb=function(a){this.Dd(a,!0)};r.$c=function(a,b){this.Ed(a,b,!0)};r.Md=function(a){return jg(this,a)};r.ze=function(){return ig(this)};
r.setPosition=function(a,b){var c=this.$();c||Oe(this.c(),!0);Ke(this.c(),a,b);c||Oe(this.c(),!1)};r.getPosition=function(){return this.$()?He(this.c()):n};r.setVisible=function(a,b,c){(b=yj.b.setVisible.call(this,a,b))&&a&&this.H&&this.nf&&this.Z().focus();this.Rh=a&&c&&ea(c.clientX)?new H(c.clientX,c.clientY):n;return b};r.Jf=function(a){this.nf&&this.Z().focus();return yj.b.Jf.call(this,a)};r.Sg=function(a){return(this.yi||a.isEnabled())&&a.$()&&!!(a.T&2)};
r.tb=function(a){var b=this.k,c;c=this.Y();c=Rc(c.A,"div",b.r()+"-content",a);for(var d,f=0;d=c[f];f++)fj(b,this,d);yj.b.tb.call(this,a)};function zj(){}F(zj,Eg);ca(zj);if(J)zj.prototype.setContent=function(a,b){var c=zj.b.X.call(this,a&&a.firstChild);if(c){var d=this.createCaption(b,Oc(a)),f=c.parentNode;f&&f.replaceChild(d,c)}};r=zj.prototype;r.X=function(a){a=zj.b.X.call(this,a&&a.firstChild);if(J&&a&&a.__goog_wrapper_div)a=a.firstChild;return a};r.ka=function(a,b){var c=Rc(document,"*","goog-menu",b)[0];if(c){Oe(c,!1);R(c).body.appendChild(c);var d=new yj;d.ka(c);a.be(d)}return zj.b.ka.call(this,a,b)};
r.se=function(a,b){return zj.b.se.call(this,[this.createCaption(a,b),b.t("div","goog-inline-block "+(this.r()+"-dropdown"),"\u00a0")],b)};r.createCaption=function(a,b){return b.t("div","goog-inline-block "+(this.r()+"-caption"),a)};r.r=q("goog-menu-button");function Aj(a,b,c,d){Dg.call(this,a,c||zj.Ea(),d);yg(this,64,!0);b&&this.be(b);this.v=new Ve(500);if((Ef||Ff)&&!L("533.17.9"))this.He=!0}F(Aj,Dg);r=Aj.prototype;r.Og=!0;r.ug=!1;r.He=!1;r.lk=!1;r.da=function(){Aj.b.da.call(this);this.l&&Bj(this,this.l,!0);W(this.c(),"haspopup","true")};r.Pa=function(){Aj.b.Pa.call(this);if(this.l){this.R(!1);this.l.Pa();Bj(this,this.l,!1);var a=this.l.c();a&&$c(a)}};r.i=function(){Aj.b.i.call(this);this.l&&(this.l.j(),delete this.l);delete this.jk;this.v.j()};
r.Gc=function(a){Aj.b.Gc.call(this,a);if(this.p&4&&(this.R(!this.Ra(),a),this.l))this.l.Pb=this.Ra()};r.Hc=function(a){Aj.b.Hc.call(this,a);if(this.l&&!(this.p&4))this.l.Pb=!1};r.td=function(){this.setActive(!1);return!0};r.dj=function(a){this.l&&this.l.$()&&!this.wc(a.target)&&this.R(!1)};r.wc=function(a){return a&&bd(this.c(),a)||this.l&&this.l.wc(a)||!1};
r.nd=function(a){if(a.keyCode==32){if(a.preventDefault(),a.type!="keyup")return!1}else if(a.type!="key")return!1;if(this.l&&this.l.$()){var b=this.l.cb(a);return a.keyCode==27?(this.R(!1),!0):b}return a.keyCode==40||a.keyCode==38||a.keyCode==32?(this.R(!0),!0):!1};r.Mf=function(){this.R(!1)};r.hj=function(){this.p&4||this.R(!1)};r.Nb=function(a){this.He||this.R(!1);Aj.b.Nb.call(this,a)};function Cj(a){a.l||a.be(new yj(a.Y()));return a.l||n}
r.be=function(a){var b=this.l;if(a!=b&&(b&&(this.R(!1),this.H&&Bj(this,b,!1),delete this.l),a)){this.l=a;eg(a,this);a.setVisible(!1);var c=this.He;(a.nf=c)&&a.pc(!0);this.H&&Bj(this,a,!0)}return b};r.Xb=function(a){Cj(this).Dd(a,!0)};r.$c=function(a,b){Cj(this).Ed(a,b,!0)};r.Md=function(a){return this.l?jg(this.l,a):n};r.ze=function(){return this.l?ig(this.l):0};r.setVisible=function(a,b){var c=Aj.b.setVisible.call(this,a,b);c&&!this.$()&&this.R(!1);return c};
r.oc=function(a){Aj.b.oc.call(this,a);this.isEnabled()||this.R(!1)};
r.R=function(a,b){Aj.b.R.call(this,a);if(this.l&&!!(this.p&64)==a){if(a)this.l.H||(this.lk?this.l.Ab(this.c().parentNode):this.l.Ab()),this.Zc=Ge(this.c()),this.vc=Ne(this.c()),Dj(this),qj(this.l,-1);else if(this.setActive(!1),this.l.Pb=!1,this.c()&&W(this.c(),"activedescendant",""),y(this.Se)){this.Se=i;var c=this.l.c();if(c){var d="",f;d instanceof Kc?(f=d.height,d=d.width):f="";c.style.width=Ce(d,!0);c.style.height=Ce(f,!0)}}this.l.setVisible(a,!1,b);this.ve||(c=this.ua(),d=a?c.h:c.ca,d.call(c,
id(this.Y()),"mousedown",this.dj,!0),this.He&&d.call(c,this.l,"blur",this.hj),d.call(c,this.v,Xe,this.sd),a?this.v.start():this.v.stop())}};function Dj(a){if(a.l.H){var b=new Zi(a.jk||a.c(),a.Og?5:7,!a.ug,a.ug),c=a.l.c();if(!a.l.$())c.style.visibility="hidden",Oe(c,!0);if(!a.Se&&a.ug)a.Se=Le(c);b.Xd(c,a.Og?4:6,n,a.Se);if(!a.l.$())Oe(c,!1),c.style.visibility="visible"}}
r.sd=function(){var a=Ne(this.c()),b=Ge(this.c());if(!(this.vc==a||(!this.vc||!a?0:this.vc.left==a.left&&this.vc.width==a.width&&this.vc.top==a.top&&this.vc.height==a.height))||!(this.Zc==b||(!this.Zc||!b?0:this.Zc.top==b.top&&this.Zc.right==b.right&&this.Zc.bottom==b.bottom&&this.Zc.left==b.left)))this.vc=a,this.Zc=b,Dj(this)};function Bj(a,b,c){var d=a.ua(),c=c?d.h:d.ca;c.call(d,b,"action",a.Mf);c.call(d,b,"highlight",a.Kf);c.call(d,b,"unhighlight",a.Qf)}
r.Kf=function(a){W(this.c(),"activedescendant",a.target.c().id)};r.Qf=function(){jg(this.l,this.l.la)||W(this.c(),"activedescendant","")};rg("goog-menu-button",function(){return new Aj(n)});function Ej(a){this.Kc=[];Fj(this,a)}F(Ej,fe);r=Ej.prototype;r.mc=n;r.nc=n;r.ze=function(){return this.Kc.length};r.Md=function(a){return this.Kc[a]||n};function Fj(a,b){b&&(N(b,function(a){Gj(this,a,!1)},a),Cb(a.Kc,b))}r.Xb=function(a){this.$c(a,this.ze())};r.$c=function(a,b){a&&(Gj(this,a,!1),Db(this.Kc,b,0,a))};r.Ce=p("mc");r.qc=function(a){if(a!=this.mc)Gj(this,this.mc,!1),this.mc=a,Gj(this,a,!0);this.dispatchEvent("select")};r.Hf=function(){return this.mc?tb(this.Kc,this.mc):-1};r.ci=function(a){this.qc(this.Md(a))};
r.clear=function(){var a=this.Kc;if(!z(a))for(var b=a.length-1;b>=0;b--)delete a[b];a.length=0;this.mc=n};r.i=function(){Ej.b.i.call(this);delete this.Kc;this.mc=n};function Gj(a,b,c){b&&(typeof a.nc=="function"?a.nc(b,c):typeof b.xg=="function"&&b.xg(c))};function Hj(a,b,c,d){Aj.call(this,a,b,c,d);this.ue=a;Ij(this);this.Ve="listbox"}F(Hj,Aj);r=Hj.prototype;r.J=n;r.ue=n;r.da=function(){Hj.b.da.call(this);Ij(this);Jj(this);W(this.c(),"haspopup","false")};r.tb=function(a){Hj.b.tb.call(this,a);(a=this.hd())?(this.ue=a,Ij(this)):this.ci(0)};r.i=function(){Hj.b.i.call(this);if(this.J)this.J.j(),this.J=n;this.ue=n};r.Mf=function(a){this.qc(a.target);Hj.b.Mf.call(this,a);a.stopPropagation();this.dispatchEvent("action")};
r.mj=function(){var a=this.Ce();Hj.b.S.call(this,a&&a.o());Ij(this)};r.be=function(a){var b=Hj.b.be.call(this,a);a!=b&&(this.J&&this.J.clear(),a&&(this.J?hg(a,function(a){Kj(a);this.J.Xb(a)},this):Lj(this,a)));return b};r.Xb=function(a){Kj(a);Hj.b.Xb.call(this,a);this.J?this.J.Xb(a):Lj(this,Cj(this))};r.$c=function(a,b){Kj(a);Hj.b.$c.call(this,a,b);this.J?this.J.$c(a,b):Lj(this,Cj(this))};r.qc=function(a){this.J&&this.J.qc(a)};r.ci=function(a){this.J&&this.qc(this.J.Md(a))};
r.S=function(a){if(y(a)&&this.J)for(var b=0,c;c=this.J.Md(b);b++)if(c&&typeof c.o=="function"&&c.o()==a){this.qc(c);return}this.qc(n)};r.Ce=function(){return this.J?this.J.Ce():n};r.Hf=function(){return this.J?this.J.Hf():-1};function Lj(a,b){a.J=new Ej;b&&hg(b,function(a){Kj(a);this.J.Xb(a)},a);Jj(a)}function Jj(a){a.J&&a.ua().h(a.J,"select",a.mj)}function Ij(a){var b=a.Ce();a.setContent(b?b.hd():a.ue)}function Kj(a){a.Ve=a instanceof mj?"option":"separator"}
r.R=function(a,b){Hj.b.R.call(this,a,b);this.Ra()&&qj(Cj(this),this.Hf())};rg("goog-select",function(){return new Hj(n)});function Mj(a,b){this.e=a;this.wd=new Hj("---");this.fa=T(this.wd,"action",function(b){a.W.Db(b.target.o())});this.wd.Ab(b)}F(Mj,G);Mj.prototype.qb=function(a,b){var c=new mj(a.name,a);this.wd.Xb(c);if(b||this.wd.ze()==1)this.wd.qc(c),this.e.W.Db(a)};Mj.prototype.i=function(){U(this.fa);this.wd.j()};function Nj(a){w(a)||function(){this.a=new Vg(a,Qc("weapp-fpsbox"),function(){window.document.location="http://www.webglearth.com/upgrade.html"});Wg(this.a);this.Bh=new Ve(15);T(this.Bh,Xe,D(function(){var a=this.a,b=a.g;if(!w(a.Ef)){var c=E();if(a.Zf<E()-2E3)a.Df=1E3*a.ye/(E()-a.Zf),a.Qg=a.Ff/a.ye,a.Zf=E(),a.ye=0,a.Ff=0,a.Ef.innerHTML=a.Qg.toFixed(2)+" ms / fps: "+a.Df.toFixed(2);a.ye++}b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);a.Ga.wa=Ig(4);a.n.draw();!w(a.Ef)&&(a.Ff+=E()-c);a=this.fg;N(a.gg.Ec(),
a.Dk,a)},this));this.a.Wd="http://srtm.webglearth.com/cgi-bin/corsproxy.fcgi?url=";var b=!1;this.a.jg=function(){if(!b)b=!0,window.location="http://data.webglearth.com/"};this.a.n=new Mh(this.a,Qc("weapp-infobox"),Qc("weapp-mapcopyright"),Qc("weapp-maplogo"));this.a.We();this.Fd=new wi(this.a.n.d);this.Ok=new Mi(this.a.n,this.Fd);this.Wk=new Si(this.a.n);this.Ck=new Mj(this.a.n,Qc("weapp-tileprovider"));this.Xk=new ui(this.a.n,Qc("weapp-zoomslider"));this.Tk=new Ni(this.a.n,Qc("weapp-pancontrol"));
this.a.n.W.Te=0.5;this.Sk=new Ii(this.a.n.W,Qc("weapp-opacityslider"));var c=Qc("weapp-nominatim");this.Lh=new Vf(c);this.fg=new Oi(this.a.n,a.parentNode);var d=new Ti(0,0);d.enable(!1);Pi(this.fg,"nominatimMarker",d);var f=D(function(a){var b=a.boundingbox,c,f=P(parseFloat(b[0])),g=P(parseFloat(b[1]));c=this.a.Cc;var m=(f+g)/2,b=Ih(m,P(parseFloat(b[2])),m,P(parseFloat(b[3]))),f=Ih(f,0,g,0),g=Math.min(Math.max(this.a.Gd,b/f),1);c=P(hc(c)/(g+0.4)-2);b=Math.max(f,b);b=Math.min(Math.PI/2,c+b/12756274);
c=9567205.5*(Math.sin(b)*Math.sqrt(1+1/Math.pow(Math.tan(c),2))-1);xi(this.Fd,P(parseFloat(a.lat)),P(parseFloat(a.lon)),c);d.enable(!0);d.lat=a.lat;d.eg=a.lon},this);this.Lh.addEventListener("update",function(a){f(a.row)});T(Qc("weapp-nominatimform"),"submit",D(function(a){a.preventDefault();this.Lh.search(c.value,1,function(a,b){b.length>0&&f(b[0])})},this));var g=D(function(){function a(c){c+="=";var d=xb(b,function(a){return a.indexOf(c)===0});if(y(d)&&(d=d.substr(c.length),d.length>0))return d}
var b=window.location.hash.substr(1).split(";"),c=a("zoom")||a("z");isNaN(c)||this.a.n.d.setZoom(c);c=a("alt");isNaN(c)||ih(this.a.n.d,c);c=a("t");isNaN(c)||this.a.n.d.setTilt(parseFloat(c));c=a("h");isNaN(c)||this.a.n.d.setHeading(parseFloat(c));c=a("ll");if(y(c))c=c.split(","),c.length>1&&!isNaN(c[0])&&!isNaN(c[1])&&this.a.n.d.setPosition(P(c[0]),P(c[1]));else{var c=a("lat"),d=a("lon")||a("long");!isNaN(c)&&!isNaN(d)&&this.a.n.d.setPosition(P(c),P(d))}},this);this.ph=new Ve(2E3);T(this.ph,Xe,D(function(){var a=
[hc(this.a.n.d.yb),hc(this.a.n.d.Ob)];window.location.hash="#ll="+a[0].toFixed(5)+","+a[1].toFixed(5)+";alt="+this.a.n.d.ia.toFixed(0)+";h="+this.a.n.d.getHeading().toFixed(3)+";t="+this.a.n.d.getTilt().toFixed(3)},this));this.ph.start();window.addEventListener("hashchange",g,!1);g();T(this.a.canvas,"click",D(function(a){if(a.ctrlKey){var b=lh(this.a.n,a.offsetX,a.offsetY);Pi(this.fg,n,new Ai(b[0],b[1],"Title",S("span",{},"This is an example of new PrettyMarker. You can easily customize this popup and even add links and other objects: ",
S("br"),S("br"),S("a",{target:"blank",href:"http://www.klokantech.com/"},"Klokan Technologies"),S("br"),S("br"))));a.preventDefault()}},this))}.call(this)}Nj.prototype.qb=function(a){this.Ck.qb(a)};Nj.prototype.start=function(){this.Bh.start()};
function Oj(){var a=new Nj(Qc("weapp-canvas"));a.qb(new Bi("Satellite"));a.qb(new Bi("Roadmap"));a.qb(new Bi("Terrain"));a.qb(new Zf);a.qb(new Yf);a.qb(new Ji("Aerial","AsLurrtJotbxkJmnsefUYbatUuBkeBTzTL930TvcOekeG8SaQPY9Z5LDKtiuzAOu"));a.qb(new Ji("AerialWithLabels","AsLurrtJotbxkJmnsefUYbatUuBkeBTzTL930TvcOekeG8SaQPY9Z5LDKtiuzAOu"));a.qb(new Ji("Road","AsLurrtJotbxkJmnsefUYbatUuBkeBTzTL930TvcOekeG8SaQPY9Z5LDKtiuzAOu"));var b=(new mc(document.location.toString())).ib.get("id"),b=new Ri(b?b.toString():
"4I8A6MZxOzQeiWpo2S37aZ/201009211223-ANwdJGv");a.a.n.W.Db(b,!1,!0);a.start()}var Pj="WEApp".split("."),Qj=s;!(Pj[0]in Qj)&&Qj.execScript&&Qj.execScript("var "+Pj[0]);for(var Rj;Pj.length&&(Rj=Pj.shift());)!Pj.length&&u(Oj)?Qj[Rj]=Oj:Qj=Qj[Rj]?Qj[Rj]:Qj[Rj]={};
