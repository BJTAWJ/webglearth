function h(a){throw a;}var k=void 0,n=null;function o(a){return function(){return this[a]}}function r(a){return function(){return a}}var s,t=this;function u(){}
function aa(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(c=="[object Window]")return"object";if(c=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(c=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b}function v(a){return a!==k}function w(a){return a===n}function x(a){return a!=n}function ba(a){return aa(a)=="array"}function y(a){var b=aa(a);return b=="array"||b=="object"&&typeof a.length=="number"}function z(a){return typeof a=="string"}function ca(a){return typeof a=="number"}function da(a){return aa(a)=="function"}function ea(a){a=aa(a);return a=="object"||a=="array"||a=="function"}
function ga(a){return a[ha]||(a[ha]=++ia)}var ha="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ia=0;function ja(a,b,c){return a.call.apply(a.bind,arguments)}function ka(a,b,c){a||h(Error());if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}else return function(){return a.apply(b,arguments)}}
function B(a,b,c){B=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ja:ka;return B.apply(n,arguments)}var C=Date.now||function(){return+new Date};function D(a,b){var c=a.split("."),d=t;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&v(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function E(a,b){function c(){}c.prototype=b.prototype;a.F=b.prototype;a.prototype=new c};function la(a){return function(){return a}}var ma=la(!0),na=la(n);function oa(a){var b=arguments,c=b.length;return function(){for(var a,e=0;e<c;e++)a=b[e].apply(this,arguments);return a}};function pa(a){if(!qa.test(a))return a;a.indexOf("&")!=-1&&(a=a.replace(ra,"&amp;"));a.indexOf("<")!=-1&&(a=a.replace(sa,"&lt;"));a.indexOf(">")!=-1&&(a=a.replace(ta,"&gt;"));a.indexOf('"')!=-1&&(a=a.replace(ua,"&quot;"));return a}var ra=/&/g,sa=/</g,ta=/>/g,ua=/\"/g,qa=/[&<>\"]/;
function va(a,b){for(var c=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(b).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(d.length,e.length),g=0;c==0&&g<f;g++){var i=d[g]||"",l=e[g]||"",j=RegExp("(\\d*)(\\D*)","g"),p=RegExp("(\\d*)(\\D*)","g");do{var m=j.exec(i)||["","",""],A=p.exec(l)||["","",""];if(m[0].length==0&&A[0].length==0)break;c=wa(m[1].length==0?0:parseInt(m[1],10),A[1].length==0?0:parseInt(A[1],10))||wa(m[2].length==0,A[2].length==0)||wa(m[2],A[2])}while(c==
0)}return c}function wa(a,b){if(a<b)return-1;else if(a>b)return 1;return 0};function F(){}F.prototype.Dc=!1;F.prototype.n=function(){if(!this.Dc)this.Dc=!0,this.q()};F.prototype.q=function(){this.xd&&xa.apply(n,this.xd)};function xa(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];y(d)?xa.apply(n,d):d&&typeof d.n=="function"&&d.n()}};function ya(a,b,c,d){this.zoom=a||0;this.x=b||0;this.y=c||0;this.Kb=0;this.ra=d||0;this.Ma=this.za=n;this.state=za}E(ya,F);ya.prototype.setData=function(a){this.Ma=a};ya.prototype.zc=na;function Aa(a){return a.Ma?a.zc(a.Ma):a.za}ya.prototype.xc=u;ya.prototype.q=function(){this.za=n;if(this.Ma)this.xc(this.Ma),this.Ma=n};var za=0;function Ba(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Ba.prototype.Ka=function(){return new Ba(this.top,this.right,this.bottom,this.left)};Ba.prototype.contains=function(a){return!this||!a?!1:a instanceof Ba?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};var Ca,Da,Ea,Fa,Ga;function Ha(){return t.navigator?t.navigator.userAgent:n}Fa=Ea=Da=Ca=!1;var Ia;if(Ia=Ha()){var Ja=t.navigator;Ca=Ia.indexOf("Opera")==0;Da=!Ca&&Ia.indexOf("MSIE")!=-1;Ea=!Ca&&Ia.indexOf("WebKit")!=-1;Fa=!Ca&&!Ea&&Ja.product=="Gecko"}var Ka=Ca,G=Da,La=Fa,Ma=Ea,Na,Oa=t.navigator;Na=Oa&&Oa.platform||"";Ga=Na.indexOf("Mac")!=-1;var Pa=Na.indexOf("Win")!=-1,Qa;
a:{var Ra="",Sa;if(Ka&&t.opera)var Ua=t.opera.version,Ra=typeof Ua=="function"?Ua():Ua;else if(La?Sa=/rv\:([^\);]+)(\)|;)/:G?Sa=/MSIE\s+([^\);]+)(\)|;)/:Ma&&(Sa=/WebKit\/(\S+)/),Sa)var Va=Sa.exec(Ha()),Ra=Va?Va[1]:"";if(G){var Wa,Xa=t.document;Wa=Xa?Xa.documentMode:k;if(Wa>parseFloat(Ra)){Qa=String(Wa);break a}}Qa=Ra}var Ya={};function Za(a){return Ya[a]||(Ya[a]=va(Qa,a)>=0)}var $a={};function ab(){return $a[9]||($a[9]=G&&document.documentMode&&document.documentMode>=9)};function bb(a,b){for(var c in a)b.call(k,a[c],c,a)}function cb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function db(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function eb(){var a=fb,b;for(b in a)return!1;return!0}var gb="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");
function hb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<gb.length;f++)c=gb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var H=Array.prototype,ib=H.indexOf?function(a,b,c){return H.indexOf.call(a,b,c)}:function(a,b,c){c=c==n?0:c<0?Math.max(0,a.length+c):c;if(z(a))return!z(b)||b.length!=1?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},I=H.forEach?function(a,b,c){H.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=z(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},jb=H.filter?function(a,b,c){return H.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=z(a)?a.split(""):
a,i=0;i<d;i++)if(i in g){var l=g[i];b.call(c,l,i,a)&&(e[f++]=l)}return e},kb=H.every?function(a,b,c){return H.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=z(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function lb(a,b){var c=ib(a,b),d;(d=c>=0)&&H.splice.call(a,c,1);return d}function mb(a){return H.concat.apply(H,arguments)}function nb(a){if(ba(a))return mb(a);else{for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}}
function ob(a,b,c){return arguments.length<=2?H.slice.call(a,b):H.slice.call(a,b,c)}function pb(a,b){H.sort.call(a,b||qb)}function qb(a,b){return a>b?1:a<b?-1:0}function rb(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];ba(d)?b.push.apply(b,rb.apply(n,d)):b.push(d)}return b};function sb(a){if(typeof a.ca=="function")a=a.ca();else if(y(a)||z(a))a=a.length;else{var b=0,c;for(c in a)b++;a=b}return a}function tb(a){if(typeof a.pa=="function")return a.pa();if(z(a))return a.split("");if(y(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return cb(a)}function ub(a){if(typeof a.Ob=="function")return a.Ob();if(typeof a.pa!="function"){if(y(a)||z(a)){for(var b=[],a=a.length,c=0;c<a;c++)b.push(c);return b}return db(a)}}
function vb(a,b){if(typeof a.forEach=="function")a.forEach(b,k);else if(y(a)||z(a))I(a,b,k);else for(var c=ub(a),d=tb(a),e=d.length,f=0;f<e;f++)b.call(k,d[f],c&&c[f],a)}function wb(a,b){if(typeof a.every=="function")return a.every(b,k);if(y(a)||z(a))return kb(a,b,k);for(var c=ub(a),d=tb(a),e=d.length,f=0;f<e;f++)if(!b.call(k,d[f],c&&c[f],a))return!1;return!0};function xb(a,b){this.s={};this.l=[];var c=arguments.length;if(c>1){c%2&&h(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.Cb(a)}s=xb.prototype;s.p=0;s.qc=0;s.ca=o("p");s.pa=function(){yb(this);for(var a=[],b=0;b<this.l.length;b++)a.push(this.s[this.l[b]]);return a};s.Ob=function(){yb(this);return this.l.concat()};s.wc=function(a){for(var b=0;b<this.l.length;b++){var c=this.l[b];if(zb(this.s,c)&&this.s[c]==a)return!0}return!1};
s.equals=function(a,b){if(this===a)return!0;if(this.p!=a.ca())return!1;var c=b||Ab;yb(this);for(var d,e=0;d=this.l[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function Ab(a,b){return a===b}s.clear=function(){this.s={};this.qc=this.p=this.l.length=0};s.remove=function(a){return zb(this.s,a)?(delete this.s[a],this.p--,this.qc++,this.l.length>2*this.p&&yb(this),!0):!1};
function yb(a){if(a.p!=a.l.length){for(var b=0,c=0;b<a.l.length;){var d=a.l[b];zb(a.s,d)&&(a.l[c++]=d);b++}a.l.length=c}if(a.p!=a.l.length){for(var e={},c=b=0;b<a.l.length;)d=a.l[b],zb(e,d)||(a.l[c++]=d,e[d]=1),b++;a.l.length=c}}s.get=function(a,b){return zb(this.s,a)?this.s[a]:b};s.set=function(a,b){zb(this.s,a)||(this.p++,this.l.push(a),this.qc++);this.s[a]=b};s.Cb=function(a){var b;a instanceof xb?(b=a.Ob(),a=a.pa()):(b=db(a),a=cb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};s.Ka=function(){return new xb(this)};
function zb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Bb(a){this.s=new xb;a&&this.Cb(a)}function Cb(a){var b=typeof a;return b=="object"&&a||b=="function"?"o"+ga(a):b.substr(0,1)+a}s=Bb.prototype;s.ca=function(){return this.s.ca()};s.add=function(a){this.s.set(Cb(a),a)};s.Cb=function(a){for(var a=tb(a),b=a.length,c=0;c<b;c++)this.add(a[c])};s.kc=function(a){for(var a=tb(a),b=a.length,c=0;c<b;c++)this.remove(a[c])};s.remove=function(a){return this.s.remove(Cb(a))};s.clear=function(){this.s.clear()};
s.contains=function(a){a=Cb(a);return zb(this.s.s,a)};s.pa=function(){return this.s.pa()};s.Ka=function(){return new Bb(this)};s.equals=function(a){return this.ca()==sb(a)&&Db(this,a)};function Db(a,b){var c=sb(b);if(a.ca()>c)return!1;!(b instanceof Bb)&&c>5&&(b=new Bb(b));return wb(a,function(a){if(typeof b.contains=="function")a=b.contains(a);else if(typeof b.wc=="function")a=b.wc(a);else if(y(b)||z(b))a=ib(b,a)>=0;else a:{for(var c in b)if(b[c]==a){a=!0;break a}a=!1}return a})};function Eb(a){this.name=a;this.S=0;this.Hb=[];this.Rc=-1.4844222297453324;this.Pc=1.4844222297453324;this.Sc=-Math.PI;this.Qc=Math.PI;this.jb=[];this.opacity=1}s=Eb.prototype;s.lc=function(a,b,c,d){this.Rc=J(a);this.Pc=J(b);this.Sc=J(c);this.Qc=J(d);this.jb=[]};
function Fb(a,b){if(!x(a.jb[b])){var c=1<<b,d=Math.floor((a.Sc/(2*Math.PI)+0.5)*c),e=Math.floor((a.Qc/(2*Math.PI)+0.5)*c),f=Math.floor((0.5-Gb(a.Pc)/(Math.PI*2))*c),c=Math.floor((0.5-Gb(a.Rc)/(Math.PI*2))*c);a.jb[b]=new Ba(f,e,c,d)}return a.jb[b]}s.ya=r(0);s.Eb=r(!1);s.mc=r(!1);s.Sb=r(!0);function Hb(a){I(a.Hb,function(a){this.S--;this.Xa(a.qe,a.onload,a.ee)},a);a.Hb=[]}function Ib(a,b,c,d){a.Sb()?a.Xa(b,c,d):(a.Hb.push(new Jb(b,c,d)),a.S++)}s.ta=function(){};s.nb=r(n);s.Yc=u;s.Gb=u;
function Kb(a,b,c,d,e){this.sd=a;this.td=b;this.me=c;this.ne=d;this.we=e}function Jb(a,b,c){this.qe=a;this.onload=b;this.ee=c};function K(a){Eb.call(this,a);this.jc=""}E(K,Eb);K.prototype.Eb=r(!0);K.prototype.mc=function(a){var b=this.jc!=a;this.jc=a;return b};K.prototype.Xa=function(a,b,c){var d=new Image;d.onload=B(function(){a.state=20;this.S--;b(a)},this);d.onerror=B(function(){a.Kb++;a.state=-10;this.S--;c&&c(a)},this);a.state=10;a.za=d;d.crossOrigin="";var e=this.Pb(a.zoom,a.x,a.y);d.src=this.jc+e;this.S++};function L(a,b,c){return Math.min(Math.max(a,b),c)}function M(a,b){var c=a%b;return c*b<0?c+b:c}function J(a){return a*Math.PI/180}function N(a){return a*180/Math.PI};function Lb(a){var b=v(k),c=new XMLHttpRequest;if(b)c.onreadystatechange=function(){c.readyState==4&&k(c.responseText)};c.open("GET",a,b);c.send(n);return b?"":c.responseText}function Mb(a){a=M(a,2*Math.PI);return a>Math.PI?a-2*Math.PI:a};function Nb(a,b,c,d,e,f,g,i){K.call(this,a);this.url=b;this.minZoom=c;this.maxZoom=d;this.tileSize=e;this.Cd=f===!0;this.nc=g||[];this.copyright=i||""}E(Nb,K);s=Nb.prototype;s.ya=o("minZoom");s.na=o("maxZoom");s.oa=o("tileSize");s.Pb=function(a,b,c){var d=this.url.replace("{z}",a.toFixed(0)),d=d.replace("{x}",b.toFixed(0)),d=d.replace("{y}",(this.Cd?(1<<a)-c-1:c).toFixed(0));this.nc.length>0&&(d=d.replace("{sub}",this.nc[M(b+c+a,this.nc.length)]));return d};
s.ta=function(a){this.copyright.length>0&&O(a,this.copyright)};function Ob(a,b,c,d,e,f,g,i,l,j){K.call(this,a);b.charAt(b.length-1)!="?"&&(b+="?");this.Bb=0;if(b.length>0)this.url=b,this.Bb=1;this.version=c;this.Id=d;this.format=f;this.minZoom=l;this.maxZoom=j;this.tileSize=256;e=="EPSG:900913"||e=="EPSG:3857"?this.bd=e:(this.Bb=0,h(Error(e+" is an unsupported CRS, please use either EPSG:900913 or EPSG:3857.  WMS Server must support one of these.")));this.styles=g;i.length>0&&i.charAt(0)!="&"&&(i="&"+i);this.Bd=i}E(Ob,K);Ob.prototype.ya=o("minZoom");
Ob.prototype.na=o("maxZoom");Ob.prototype.oa=r(256);
Ob.prototype.Pb=function(a,b,c){function d(a,b){var c=Math.PI-2*Math.PI*a/Math.pow(2,b);return 180/Math.PI*Math.atan(0.5*(Math.exp(c)-Math.exp(-c)))}function e(a){a>89.5&&(a=89.5);a<-89.5&&(a=-89.5);return 0-6378137*Math.log(Math.tan(0.5*(Math.PI*0.5-a*(Math.PI/180))))}var f="";if(this.Bb==1){var f=e(d(c,a)),g=e(d(c+1,a)),c=6378137*(b/Math.pow(2,a)*360-180)*(Math.PI/180),i=6378137*((b+1)/Math.pow(2,a)*360-180)*(Math.PI/180),a=Math.max(f,g),b=Math.max(c,i),g=Math.min(f,g),c=Math.min(c,i),f=this.url+
"service=WMS&request=GetMap&version="+this.version,f=f+"&Width="+this.tileSize+"&Height="+this.tileSize,f=f+"&Layers="+this.Id+"&Format="+this.format;this.version.substr(0,3)=="1.0"||this.version.substr(0,3)=="1.1"?f=f+"&SRS="+this.bd:this.version.substr(0,3)=="1.3"&&(f=f+"&CRS="+this.bd);f=f+"&STYLES="+this.styles;f=f+"&BBOX="+c+","+g+","+b+","+a;f+=this.Bd}return f};function Pb(a){this.Ja=a}Pb.prototype.lc=function(a,b,c,d){this.Ja.lc(a,b,c,d)};Pb.prototype.ke=function(a){this.Ja.opacity=a};Pb.prototype.Dd=function(){return this.Ja.opacity};function Qb(a){Nb.call(this,a||"MapQuest OSM","http://otile{sub}.mqcdn.com/tiles/1.0.0/osm/{z}/{x}/{y}.png",0,18,256,!1,["1","2","3","4"])}E(Qb,Nb);Qb.prototype.ta=function(a){O(a,"Map data \u00a9 ",P("a",{href:"http://www.openstreetmap.org/"},"OpenStreetMap")," contributors, CC-BY-SA",P("br"));O(a,"Tiles Courtesy of ",P("a",{href:"http://open.mapquest.co.uk/"},"MapQuest")," ",P("img",{src:"http://developer.mapquest.com/content/osm/mq_logo.png",border:0}))};function Rb(a){Nb.call(this,a||"OpenStreetMaps","http://{sub}.tile.openstreetmap.org/{z}/{x}/{y}.png",0,18,256,!1,["a","b","c"])}E(Rb,Nb);Rb.prototype.ta=function(a){O(a,"\u00a9 ",P("a",{href:"http://www.openstreetmap.org/"},"OpenStreetMap")," contributors, CC-BY-SA")};function Sb(a,b,c){function d(){w(Tb)&&(Tb=new google.maps.Map(document.createElement("div")));Ub?e():google.maps.event.addListenerOnce(Tb,"idle",function(){Ub=!0;e()})}Eb.call(this,"Google Maps - "+a);this.Z=n;this.Od=a;this.Hd=b||0;this.de=c||u;this.kb=new Bb;this.Xb=0;this.Yb=[];var e=B(function(){this.Z=Tb.mapTypes[Vb(a)];Hb(this);this.de()},this);x(t.Be)&&google.maps&&google.maps.Map?d():w(Wb)?(Wb="googleMapsCallback"+(Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*
2147483648)^C()).toString(36)),t[Wb]=B(d,this),b=document.createElement("script"),Xb()[0].appendChild(b),b.type="text/javascript",b.src="http://maps.google.com/maps/api/js?v=3.5&sensor=false&callback="+Wb):t[Wb]=oa(t[Wb],B(d,this))}E(Sb,Eb);Sb.prototype.Sb=function(){return!w(this.Z)};var Wb=n,Tb=n,Ub=!1;s=Sb.prototype;s.ya=function(){return w(this.Z)?0:this.Z.minZoom||0};s.na=function(){return w(this.Z)?18:this.Z.maxZoom};s.oa=function(){return w(this.Z)?256:this.Z.tileSize.width};
s.Xa=function(a,b,c){var d=B(function(a){a=a.getElementsByTagName("img");return a[this.Hd]||a[0]},this);a.zc=d;a.xc=B(function(a){this.Z.releaseTile(a)},this);var e=this.Z.getTile(new google.maps.Point(a.x,a.y),a.zoom,document),d=d(e);d.onload=B(function(){if(Aa(a).src==Aa(a).__src__)a.state=20,this.S--,b(a)},this);d.onerror=B(function(){a.Kb++;a.state=-10;this.S--;c&&c(a)},this);a.setData(e);a.state=10;this.S++};
s.ta=function(a){this.kb.ca()>0&&O(a,"Map Data \u00a9 "+(new Date).getFullYear()+" "+this.kb.pa().join(", ")+" \u2013 ");O(a,P("a",{href:"http://www.google.com/intl/en-US_US/help/terms_maps.html",target:"_blank"},"Terms of Use"))};s.nb=r("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAAYCAMAAACV6r5dAAABI1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABxcXEAAAAAAAAAAAAAAAAAAAAAAAAAAAAJCQkLCwsRERESEhIZGRkjIyMsLCw6OjpNTU1WVlZhYWFvb28AAABycnJ5eXl8fHzc3NyFhYWGhoaHiIeLi4uSkpKWlpaYmJiampqenp6mpqahoaGlpaWhoaGpqampqamrq6uqqqqur66vr6+usK6ysrK4uLi9vb3CwsLExMTJycnNzc3Q0NDT09PU1NTV1dXX19fZ2dmDg4Pg4ODi4uLj4+Pj4+Pl5eXk5OTl5eXk5OTl5eXk5OTo6Ojq6urv7+/x8fH5+fn9/f3////54OudAAAAYHRSTlNgXlpSTUY/Pjs5NTMwLSsoJiQiIB4cGhcUEgoBAAYXJy43QElWWV1SFRwQQp2LiaQyqYmwRIi1hwi5hyiEWrxsfwW/xMTJycW3qA2ajweNi4+YAdios7vFy5/g6vD2/P7aB358AAADLElEQVR4XpWUe3OiSBTFOxpMfDsqKt2dZGeiBBlx8zABx3EiZBJk8phsMyb4wvv9P8VexCpnq7aym/PX6Uv/qpt7uBDOuRB8IzRva2AYxinbbkNcrKvTqdGrMvtt2hoG4Es63+JIa9PAM03PX81GNf1NXPAR3O5av+GCn858kvlQLe+bcJfRORORYuB3G/sHuJXsbZ1wZbYgaU23bPrxcqd4wGMygsQ/bKynCN/WCTegsxtfWa8dHVhxe3oNigTaZ+OzorPIDofD62EtOv0H14a4RUGKKLOwWUAIxWxLcPr8apo+jDOHXJlGduXldT6YeuNwdWeWI5wNgnusf61YnJyu5uSQb4THTBckV8m44GaVl3kiV0n54JTkmZvKmeCT6PTUYPFtv7q3AFURZAgLUuds0xw+hG+7skVPQlCv4UzSbNqFkDxAK23lfThb49MVyQ8e/JtWXZDeKmy1t0n8BRd7GH47gL4LHQyCF2fwJ9q8YPfQLyGenC3V+8moKRUOOTlewFX+ERP9YaA+T8DZwxX7BTe3cJG1GVde4MqBm/QjN0CN8J0ZdLrpUlU/YJxQD+Y7mhDYZRNv7MFd0sJMnuHiNo6Y/oJOawnn5ePASTSe8HkAV/uyrq+DYydL+J7BmChNz8NPXVg265jZBMg5duUI669LkjlxfXfhJGSOuPSAe5Q4eSKULytw/6C4qmAz02NwU4z3wn4i/QLfs4wPw7NdrZ5NzKGTstafTdqHebfUGAyYIPyx3fVhOXm6vr5f+M1q1gn9kRH0E8d0zw1dtJdJ2eY058KyW8M3mTvNlg8wCzyZIs7tuqQ6ruuNTJVkNL3YMs2vrYxMLZpXTfNLMyMzakw8x4fVebmnqt3jekq96v+U2jpfz7teK2SzxUq7qumM2Uq7UqtpDOt2o12N7OHr/GczlezDItmoVeqKjkC+dKQzxONxsi1LtzaTiH7juLB0EcWgSkeaVRiDWheWiAE7nrj/EuP0BdRcNKGjJanheqP/iUdD7n/EpOSgL2mcvwtHRbdevk5x/qRP7P24oAX1YuxctnIy5e/HMZrGh0Kx3MY43o1vo/mX3/jfzoX94Q7k9zgAAAAASUVORK5CYII=");
s.Yc=function(a){this.kb=new Bb;var b=t.GAddCopyright,c=t.GVerify,d=t.GAppFeatures;t.GAddCopyright=B(function(){arguments.length>7&&arguments[7].length>0&&this.kb.add(arguments[7])},this);t.GVerify=ma;t.GAppFeatures=B(function(){this.Xb--;if(this.Xb<=0)t.GAddCopyright=b,t.GVerify=c,t.GAppFeatures=d,I(this.Yb,function(a){a.parentNode.removeChild(a)}),this.Yb=[],this.Gb()},this);I(a,function(a){var b=document.createElement("script");Xb()[0].appendChild(b);b.type="text/javascript";this.Yb.push(b);b.src=
"http://maps.google.com/maps?vp="+(N(a.sd)+","+N(a.td))+"&z="+a.we+"&spn="+(N(a.me)+","+N(a.ne))+"&t="+Yb(this.Od);this.Xb++},this)};function Vb(a){switch(a){case "Terrain":return google.maps.MapTypeId.TERRAIN;case "Hybrid":return google.maps.MapTypeId.HYBRID;case "Roadmap":return google.maps.MapTypeId.ROADMAP;default:case "Satellite":return google.maps.MapTypeId.SATELLITE}}
function Yb(a){switch(a){case "Terrain":return"p";case "Hybrid":return"h";case "Roadmap":return"m";default:case "Satellite":return"k"}}var Zb=B(document.createElement,document);document.createElement=function(a){var b=Zb(a);if(a=="img")b.crossOrigin="";return b};function $b(a,b){K.call(this,"Bing Maps - "+a);var c="bingsCallback_"+a,d="http://dev.virtualearth.net/REST/V1/Imagery/Metadata/"+a+"?key="+b+"&jsonp="+c;t[c]=v(t[c])?oa(B(this.ad,this),t[c]):B(this.ad,this);c=document.createElement("script");c.src=d;c.type="text/javascript";Xb()[0].appendChild(c)}E($b,K);s=$b.prototype;s.Sb=function(){return!w(this.U)};s.ad=function(a){this.Ya=a;if(a.resourceSets.length>0)this.U=a.resourceSets[0].resources[0],Hb(this);this.Gb()};
s.ya=function(){return w(this.U)?0:this.U.zoomMin};s.na=function(){return w(this.U)?18:this.U.zoomMax};s.oa=r(256);function ac(a,b,c){for(var d="",e=1;e<=a;e++)d+=(c>>a-e&1)<<1|b>>a-e&1;return d}s.Pb=function(a,b,c){return w(this.U)?"":this.U.imageUrl.replace("{subdomain}",this.U.imageUrlSubdomains[Math.floor(Math.random()*this.U.imageUrlSubdomains.length)]).replace("{quadkey}",ac(a,b,c))};s.Xa=function(a,b,c){return w(this.U)?!1:$b.F.Xa.call(this,a,b,c)};s.ta=function(a){w(this.Ya)||O(a,this.Ya.copyright)};
s.nb=function(){return!w(this.Ya)?this.Ya.brandLogoUri:n};s.Ya=n;s.U=n;var bc=new xb;function cc(a,b){var c=a;x(b)&&b.length>0&&(c+=b[0]);var d;switch(a){case "mapquest":d=Qb;break;case "osm":d=Rb;break;case "bing":d=$b;break;case "wms":d=Ob;break;case "gooogle":d=Sb;break;case "custom":d=Nb;break;default:return alert("Unknown MapType '"+a+"' !"),n}d=function(a,b){function c(b){a.apply(this,b)}c.prototype=a.prototype;return new c(b)}(d,b);d=new Pb(d);bc.set(c,d);return d}function dc(a,b){var c=a;x(b)&&(c+=b);return bc.get(c)};var ec;var fc=!G||ab(),gc=G&&!Za("8");function Q(a,b){this.type=a;this.currentTarget=this.target=b}E(Q,F);Q.prototype.q=function(){delete this.type;delete this.target;delete this.currentTarget};Q.prototype.Qa=!1;Q.prototype.ab=!0;Q.prototype.preventDefault=function(){this.ab=!1};function hc(a){hc[" "](a);return a}hc[" "]=u;function ic(a,b){a&&this.Ua(a,b)}E(ic,Q);var jc=[1,4,2];s=ic.prototype;s.target=n;s.relatedTarget=n;s.offsetX=0;s.offsetY=0;s.clientX=0;s.clientY=0;s.screenX=0;s.screenY=0;s.button=0;s.keyCode=0;s.charCode=0;s.ctrlKey=!1;s.altKey=!1;s.shiftKey=!1;s.metaKey=!1;s.he=!1;s.Oa=n;
s.Ua=function(a,b){var c=this.type=a.type;Q.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(La){var e;a:{try{hc(d.nodeName);e=!0;break a}catch(f){}e=!1}e||(d=n)}}else if(c=="mouseover")d=a.fromElement;else if(c=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==k?a.offsetX:a.layerX;this.offsetY=a.offsetY!==k?a.offsetY:a.layerY;this.clientX=a.clientX!==k?a.clientX:a.pageX;this.clientY=a.clientY!==k?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.he=Ga?a.metaKey:a.ctrlKey;this.state=a.state;this.Oa=a;delete this.ab;delete this.Qa};function kc(a,b){return fc?a.Oa.button==b:a.type=="click"?b==0:!!(a.Oa.button&jc[b])}
s.preventDefault=function(){ic.F.preventDefault.call(this);var a=this.Oa;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,gc)try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123)a.keyCode=-1}catch(b){}};s.q=function(){ic.F.q.call(this);this.relatedTarget=this.currentTarget=this.target=this.Oa=n};function lc(){}var mc=0;s=lc.prototype;s.key=0;s.Ra=!1;s.uc=!1;s.Ua=function(a,b,c,d,e,f){da(a)?this.Kc=!0:a&&a.handleEvent&&da(a.handleEvent)?this.Kc=!1:h(Error("Invalid listener argument"));this.Wa=a;this.Xc=b;this.src=c;this.type=d;this.capture=!!e;this.Qb=f;this.uc=!1;this.key=++mc;this.Ra=!1};s.handleEvent=function(a){return this.Kc?this.Wa.call(this.Qb||this.src,a):this.Wa.handleEvent.call(this.Wa,a)};var nc,oc=(nc="ScriptEngine"in t&&t.ScriptEngine()=="JScript")?t.ScriptEngineMajorVersion()+"."+t.ScriptEngineMinorVersion()+"."+t.ScriptEngineBuildVersion():"0";function R(a,b){this.Mc=b;this.xa=[];a>this.Mc&&h(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.xa.push(this.ba?this.ba():{})}E(R,F);R.prototype.ba=n;R.prototype.Cc=n;R.prototype.getObject=function(){return this.xa.length?this.xa.pop():this.ba?this.ba():{}};function pc(a,b){a.xa.length<a.Mc?a.xa.push(b):qc(a,b)}function qc(a,b){if(a.Cc)a.Cc(b);else if(ea(b))if(da(b.n))b.n();else for(var c in b)delete b[c]}
R.prototype.q=function(){R.F.q.call(this);for(var a=this.xa;a.length;)qc(this,a.pop());delete this.xa};var rc,sc,tc,uc,vc,wc,xc,yc,zc,Ac,Bc;
(function(){function a(){return{p:0,T:0}}function b(){return[]}function c(){function a(b){b=g.call(a.src,a.key,b);if(!b)return b}return a}function d(){return new lc}function e(){return new ic}var f=nc&&!(va(oc,"5.7")>=0),g;wc=function(a){g=a};if(f){rc=function(){return i.getObject()};sc=function(a){pc(i,a)};tc=function(){return l.getObject()};uc=function(a){pc(l,a)};vc=function(){return j.getObject()};xc=function(){pc(j,c())};yc=function(){return p.getObject()};zc=function(a){pc(p,a)};Ac=function(){return m.getObject()};
Bc=function(a){pc(m,a)};var i=new R(0,600);i.ba=a;var l=new R(0,600);l.ba=b;var j=new R(0,600);j.ba=c;var p=new R(0,600);p.ba=d;var m=new R(0,600);m.ba=e}else rc=a,sc=u,tc=b,uc=u,vc=c,xc=u,yc=d,zc=u,Ac=e,Bc=u})();var Cc={},S={},T={},Dc={};
function U(a,b,c,d,e){if(b)if(ba(b)){for(var f=0;f<b.length;f++)U(a,b[f],c,d,e);return n}else{var d=!!d,g=S;b in g||(g[b]=rc());g=g[b];d in g||(g[d]=rc(),g.p++);var g=g[d],i=ga(a),l;g.T++;if(g[i]){l=g[i];for(f=0;f<l.length;f++)if(g=l[f],g.Wa==c&&g.Qb==e){if(g.Ra)break;return l[f].key}}else l=g[i]=tc(),g.p++;f=vc();f.src=a;g=yc();g.Ua(c,f,a,b,d,e);c=g.key;f.key=c;l.push(g);Cc[c]=g;T[i]||(T[i]=tc());T[i].push(g);a.addEventListener?(a==t||!a.yc)&&a.addEventListener(b,f,d):a.attachEvent(b in Dc?Dc[b]:
Dc[b]="on"+b,f);return c}else h(Error("Invalid event type"))}function Ec(a,b,c,d,e){if(ba(b))for(var f=0;f<b.length;f++)Ec(a,b[f],c,d,e);else{d=!!d;a:{f=S;if(b in f&&(f=f[b],d in f&&(f=f[d],a=ga(a),f[a]))){a=f[a];break a}a=n}if(a)for(f=0;f<a.length;f++)if(a[f].Wa==c&&a[f].capture==d&&a[f].Qb==e){V(a[f].key);break}}}
function V(a){if(!Cc[a])return!1;var b=Cc[a];if(b.Ra)return!1;var c=b.src,d=b.type,e=b.Xc,f=b.capture;c.removeEventListener?(c==t||!c.yc)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Dc?Dc[d]:Dc[d]="on"+d,e);c=ga(c);e=S[d][f][c];if(T[c]){var g=T[c];lb(g,b);g.length==0&&delete T[c]}b.Ra=!0;e.Uc=!0;Fc(d,f,c,e);delete Cc[a];return!0}
function Fc(a,b,c,d){if(!d.pb&&d.Uc){for(var e=0,f=0;e<d.length;e++)if(d[e].Ra){var g=d[e].Xc;g.src=n;xc(g);zc(d[e])}else e!=f&&(d[f]=d[e]),f++;d.length=f;d.Uc=!1;f==0&&(uc(d),delete S[a][b][c],S[a][b].p--,S[a][b].p==0&&(sc(S[a][b]),delete S[a][b],S[a].p--),S[a].p==0&&(sc(S[a]),delete S[a]))}}
function Gc(a){var b,c=0,d=b==n;b=!!b;if(a==n)bb(T,function(a){for(var e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture)V(f.key),c++}});else if(a=ga(a),T[a])for(var a=T[a],e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture)V(f.key),c++}}function Hc(a,b,c,d,e){var f=1,b=ga(b);if(a[b]){a.T--;a=a[b];a.pb?a.pb++:a.pb=1;try{for(var g=a.length,i=0;i<g;i++){var l=a[i];l&&!l.Ra&&(f&=Ic(l,e)!==!1)}}finally{a.pb--,Fc(c,d,b,a)}}return Boolean(f)}
function Ic(a,b){var c=a.handleEvent(b);a.uc&&V(a.key);return c}
wc(function(a,b){if(!Cc[a])return!0;var c=Cc[a],d=c.type,e=S;if(!(d in e))return!0;var e=e[d],f,g;ec===k&&(ec=G&&!t.addEventListener);if(ec){var i;if(!(i=b))a:{i="window.event".split(".");for(var l=t;f=i.shift();)if(x(l[f]))l=l[f];else{i=n;break a}i=l}f=i;i=!0 in e;l=!1 in e;if(i){if(f.keyCode<0||f.returnValue!=k)return!0;a:{var j=!1;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(p){j=!0}if(j||f.returnValue==k)f.returnValue=!0}}j=Ac();j.Ua(f,this);f=!0;try{if(i){for(var m=tc(),A=j.currentTarget;A;A=
A.parentNode)m.push(A);g=e[!0];g.T=g.p;for(var q=m.length-1;!j.Qa&&q>=0&&g.T;q--)j.currentTarget=m[q],f&=Hc(g,m[q],d,!0,j);if(l){g=e[!1];g.T=g.p;for(q=0;!j.Qa&&q<m.length&&g.T;q++)j.currentTarget=m[q],f&=Hc(g,m[q],d,!1,j)}}else f=Ic(c,j)}finally{if(m)m.length=0,uc(m);j.n();Bc(j)}return f}d=new ic(b,this);try{f=Ic(c,d)}finally{d.n()}return f});function Jc(a,b){this.width=a;this.height=b}function Kc(a,b){return a==b?!0:!a||!b?!1:a.width==b.width&&a.height==b.height}s=Jc.prototype;s.Ka=function(){return new Jc(this.width,this.height)};s.Sa=function(){return this.width/this.height};s.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};s.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
s.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};s.scale=function(a){this.width*=a;this.height*=a;return this};function W(a,b){if(a instanceof W)this.i=a.eb();else{var c;if(c=y(a))a:{for(var d=c=0;d<a.length;d++){if(!y(a[d])||c>0&&a[d].length!=c){c=!1;break a}for(var e=0;e<a[d].length;e++)if(!ca(a[d][e])){c=!1;break a}if(c==0)c=a[d].length}c=c!=0}c?this.i=nb(a):a instanceof Jc?this.i=Lc(a.height,a.width):ca(a)&&ca(b)&&a>0&&b>0?this.i=Lc(a,b):h(Error("Invalid argument(s) for Matrix contructor"))}this.d=new Jc(this.i[0].length,this.i.length)}
function Mc(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new W(b)}function Nc(a,b,c){for(var d=0;d<a.d.height;d++)for(var e=0;e<a.d.width;e++)b.call(c,a.i[d][e],d,e,a)}function Oc(a,b){var c=new W(a.d);Nc(a,function(d,e,f){c.i[e][f]=b.call(k,d,e,f,a)});return c}function Lc(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}s=W.prototype;
s.add=function(a){Kc(this.d,a.d)||h(Error("Matrix summation is only supported on arrays of equal size"));return Oc(this,function(b,c,d){return b+a.i[c][d]})};function Pc(a,b){a.d.height!=b.d.height&&h(Error("The given matrix has height "+b.d.height+", but  needs to have height "+a.d.height+"."));var c=new W(a.d.height,a.d.width+b.d.width);Nc(a,function(a,b,f){c.i[b][f]=a});Nc(b,function(a,b,f){c.i[b][this.d.width+f]=a},a);return c}
s.equals=function(a,b){if(this.d.width!=a.d.width)return!1;if(this.d.height!=a.d.height)return!1;for(var c=b||0,d=0;d<this.d.height;d++)for(var e=0;e<this.d.width;e++)if(!(Math.abs(this.i[d][e]-a.i[d][e])<=(c||1.0E-6)))return!1;return!0};function Qc(a){var b=new W(a.d.width,a.d.height);Nc(a,function(a,d,e){b.i[e][d]=a});return b}function Rc(a,b,c){return!(b>=0&&b<a.d.height&&c>=0&&c<a.d.width)?n:a.i[b][c]}
function Sc(a,b,c,d){b>=0&&b<a.d.height&&c>=0&&c<a.d.width||h(Error("Index out of bounds when setting matrix value, ("+b+","+c+") in size ("+a.d.height+","+a.d.width+")"));a.i[b][c]=d}s.multiply=function(a){if(a instanceof W)return this.d.width!=a.d.height&&h(Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.")),Tc(this,a);else if(ca(a))return Uc(this,a);else h(Error("A matrix can only be multiplied by a number or another matrix."))};
s.cd=function(a){Kc(this.d,a.d)||h(Error("Matrix subtraction is only supported on arrays of equal size."));return Oc(this,function(b,c,d){return b-a.i[c][d]})};s.eb=o("i");function Vc(a,b,c,d){var e=new W((c?c:a.d.height-1)-0+1,(d?d:a.d.width-1)-b+1);Nc(e,function(a,c,d){e.i[c][d]=this.i[0+c][b+d]},a);return e}function Tc(a,b){var c=new W(a.d.height,b.d.width);Nc(c,function(a,e,f){for(var g=a=0;g<this.d.width;g++)a+=Rc(this,e,g)*Rc(b,g,f);Sc(c,e,f,a)},a);return c}
function Uc(a,b){return Oc(a,function(a){return a*b})};function Wc(){this.A=Mc(4)}Wc.prototype.translate=function(a,b,c){this.A=this.A.multiply(new W([[1,0,0,a],[0,1,0,b],[0,0,1,c],[0,0,0,1]]))};Wc.prototype.scale=function(a,b,c){this.A=this.A.multiply(new W([[a,0,0,0],[0,b,0,0],[0,0,c,0],[0,0,0,1]]))};function Xc(a,b){var c=Math.cos(b),d=Math.sin(b);a.A=a.A.multiply(new W([[1,0,0,0],[0,c,-d,0],[0,d,c,0],[0,0,0,1]]))}function Yc(a,b){var c=Math.cos(b),d=Math.sin(b);a.A=a.A.multiply(new W([[c,-d,0,0],[d,c,0,0],[0,0,1,0],[0,0,0,1]]))};function Zc(a,b,c){function d(a,b){try{var c=a.getContext(b);if(x(c))return c}catch(d){}return n}for(var e=n,f=["webgl","experimental-webgl"],g=0;w(e)&&g<f.length;++g)e=e||d(a,f[g]);w(e)&&(v(c)?c():h(Error("unable to get a valid WebGL context")));e.enable(e.CULL_FACE);e.cullFace(e.BACK);e.clearColor(0,0,0,0);e.clearDepth(1);e.enable(e.DEPTH_TEST);e.depthFunc(e.LEQUAL);e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA);this.canvas=a;this.Mb=b||n;this.c=e;this.ja=a.width;this.ia=a.height;e.viewport(0,0,
this.ja,this.ia);this.ib=this.wa=0;this.hb=1;this.Sa=this.ja/this.ia;this.Da=Mc(4);this.H=new Wc;this.$b=this.Zb=this.Da;this.Nb=this.mb=this.Ub=this.tc=this.Lb=0;U(t,"resize",this.$a,!1,this)}function $c(a){a.wa=J(50);a.ib=1.0E-6;a.hb=5;a.Sa=a.ja/a.ia;ad(a)}function ad(a){var b=1/Math.tan(a.wa/2);a.Da=new W([[b/a.Sa,0,0,0],[0,b,0,0],[0,0,0,0],[0,0,-1,0]]);bd(a)}function bd(a){var b=a.ib-a.hb;Sc(a.Da,2,2,(a.hb+a.ib)/b);Sc(a.Da,2,3,2*a.hb*a.ib/b)}
Zc.prototype.$a=function(){this.ja=this.canvas.width=this.canvas.clientWidth;this.ia=this.canvas.height=this.canvas.clientHeight;this.c.viewport(0,0,this.ja,this.ia);this.Sa=this.ja/this.ia;ad(this);cd(this.e)};Zc.prototype.e=n;
function dd(a){a.Zb=a.Da.multiply(a.H.A);var b,c=a.Zb;c.d.width!=c.d.height&&h(Error("An inverse can only be taken on a square matrix."));b=Mc(c.d.height);a:{for(var c=Pc(c,b),d=new W(c),e=0,f=0;f<d.d.height;f++){if(e>=d.d.width)break;for(var g=f;d.i[g][e]==0;)if(g++,g==d.d.height&&(g=f,e++,e==d.d.width)){c=d;break a}var i=c,l=f,j=i.i[g];i.i[g]=i.i[l];i.i[l]=j;g=d.i[f][e];for(i=e;i<d.d.width;i++)d.i[f][i]/=g;for(g=0;g<d.d.height;g++)if(g!=f){l=d.i[g][e];for(i=e;i<d.d.width;i++)d.i[g][i]-=l*d.i[f][i]}e++}c=
d}b=!Vc(c,0,b.d.width-1,b.d.height-1).equals(b)?n:Vc(c,b.d.width);a.$b=b;return a.Zb}Zc.prototype.Wc=u;Zc.prototype.qa="";function ed(a,b){var c;c=(c=a.className)&&typeof c.split=="function"?c.split(/\s+/):[];var d=ob(arguments,1),e;e=c;for(var f=0,g=0;g<d.length;g++)ib(e,d[g])>=0||(e.push(d[g]),f++);e=f==d.length;a.className=c.join(" ");return e};var fd=!G||ab();!La&&!G||G&&ab()||La&&Za("1.9.1");G&&Za("9");function Xb(){var a=document;return a.querySelectorAll&&a.querySelector&&(!Ma||document.compatMode=="CSS1Compat"||Za("528"))?a.querySelectorAll("HEAD"):a.getElementsByTagName("HEAD")}function gd(a,b){bb(b,function(b,d){d=="style"?a.style.cssText=b:d=="class"?a.className=b:d=="for"?a.htmlFor=b:d in hd?a.setAttribute(hd[d],b):d.lastIndexOf("aria-",0)==0?a.setAttribute(d,b):a[d]=b})}
var hd={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function P(a,b,c){var d=arguments,e=document,f=d[0],g=d[1];if(!fd&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',pa(g.name),'"');if(g.type){f.push(' type="',pa(g.type),'"');var i={};hb(i,g);g=i;delete g.type}f.push(">");f=f.join("")}f=e.createElement(f);if(g)z(g)?f.className=g:ba(g)?ed.apply(n,[f].concat(g)):gd(f,g);d.length>2&&id(e,f,d,2);return f}
function id(a,b,c,d){function e(c){c&&b.appendChild(z(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var f=c[d];y(f)&&!(ea(f)&&f.nodeType>0)?I(jd(f)?nb(f):f,e):e(f)}}function O(a,b){id(kd(a),a,arguments,1)}function kd(a){return a.nodeType==9?a:a.ownerDocument||a.document}function jd(a){if(a&&typeof a.length=="number")if(ea(a))return typeof a.item=="function"||typeof a.item=="string";else if(da(a))return typeof a.item=="function";return!1};function ld(a,b,c){c=a.c.createShader(c);a.c.shaderSource(c,b);a.c.compileShader(c);a.c.getShaderParameter(c,a.c.COMPILE_STATUS)?w(c)&&h(Error("Unknown")):h(Error("Shader err: "+a.c.getShaderInfoLog(c)));return c};var md={"earth-fs-overlay.glsl":"precision mediump float;uniform sampler2D uBufferL0A;uniform sampler2D uBufferL1A;uniform sampler2D uBufferL2A;uniform sampler2D uBufferLnA;varying float vFallbackA;varying vec2 vTCA;uniform sampler2D uBufferL0B;uniform sampler2D uBufferL1B;uniform sampler2D uBufferL2B;varying float vFallbackB;varying vec2 vTCB;uniform float uMixFactor;void main(){float fallbackA=floor(vFallbackA+0.5);vec4 colorA;if(fallbackA==0.0){colorA=texture2D(uBufferL0A,vTCA);}else if(fallbackA==1.0){colorA=texture2D(uBufferL1A,vTCA);}else if(fallbackA==2.0){colorA=texture2D(uBufferL2A,vTCA);}else if(fallbackA==-1.0){colorA=texture2D(uBufferLnA,vTCA);}else{discard;}float fallbackB=floor(vFallbackB+0.5);vec4 colorB=vec4(0.0);if(fallbackB==0.0){colorB=texture2D(uBufferL0B,vTCB);}else if(fallbackB==1.0){colorB=texture2D(uBufferL1B,vTCB);}else if(fallbackB==2.0){colorB=texture2D(uBufferL2B,vTCB);}gl_FragColor=mix(colorA,colorB,uMixFactor*colorB.a);}",
"earth-fs.glsl":"precision mediump float;uniform sampler2D uBufferL0A;uniform sampler2D uBufferL1A;uniform sampler2D uBufferL2A;uniform sampler2D uBufferLnA;varying float vFallbackA;varying vec2 vTCA;void main(){float fallback=floor(vFallbackA+0.5);if(fallback==0.0){gl_FragColor=texture2D(uBufferL0A,vTCA);}else if(fallback==1.0){gl_FragColor=texture2D(uBufferL1A,vTCA);}else if(fallback==2.0){gl_FragColor=texture2D(uBufferL2A,vTCA);}else if(fallback==-1.0){gl_FragColor=texture2D(uBufferLnA,vTCA);}else{discard;}}",
"earth-vs-overlay.glsl":"#define BUFF_SIDE 4.0\n#define BUFF_SIZE 16\n#define TERRAIN %TERRAIN_BOOL%\n#define BUFF_SIDE_T %BUFFER_SIDE_T_FLOAT%\n#define BUFF_SIZE_T int(BUFF_SIDE_T*BUFF_SIDE_T)\nprecision highp float;const float PI=3.1415927;const float PI2=6.2831855;const float EARTH_RADIUS=6378137.0;const float TERRAIN_MIN=-10000.0;const float TERRAIN_MAX=12000.0;attribute vec2 aVertexPosition;attribute vec2 aTextureCoord;uniform mat4 uMVPMatrix;uniform float uTileCount;uniform vec2 uOffset;uniform float uMetaL0A[BUFF_SIZE];uniform float uMetaL1A[BUFF_SIZE];uniform float uMetaL2A[BUFF_SIZE];uniform vec2 uOffLA[3];varying float vFallbackA;varying vec2 vTCA;uniform float uMetaL0B[BUFF_SIZE];uniform float uMetaL1B[BUFF_SIZE];uniform float uMetaL2B[BUFF_SIZE];uniform vec2 uOffLB[3];varying float vFallbackB;varying vec2 vTCB;\n#if TERRAIN\nuniform float uMetaL0T[BUFF_SIZE_T];uniform float uMetaL1T[BUFF_SIZE_T];uniform vec2 uOffLT[2];uniform sampler2D uBufferL0T;uniform sampler2D uBufferL1T;uniform sampler2D uBufferLnT;uniform float uDegradationT;bool validateOffsetT(vec2 off){return off.x>=0.0&&off.y>=0.0&&off.x<BUFF_SIDE_T&&off.y<BUFF_SIDE_T;}\n#endif\nbool validateOffset(vec2 off){return off.x>=0.0&&off.y>=0.0&&off.x<BUFF_SIDE&&off.y<BUFF_SIDE;}vec2 modFirst(vec2 x,float y){return vec2(x.x-y*floor(x.x/y),x.y);}void main(){vec2 phi=PI2*(aVertexPosition+uOffset)/uTileCount;vec2 tileCoords=vec2(mod(aVertexPosition.x-aTextureCoord.x+uOffset.x+uTileCount*0.5,uTileCount),-aTextureCoord.y-aVertexPosition.y-uOffset.y+uTileCount*0.5);float elev=0.0;\n#if TERRAIN\nvec2 TCT;float fallbackT=-1.0;float degradationModifier=exp2(uDegradationT);vec2 offT=modFirst(tileCoords/degradationModifier-uOffLT[0],uTileCount/degradationModifier);vec2 rawElev;if(validateOffsetT(offT)&&uMetaL0T[int(floor(offT.y)*BUFF_SIDE_T+offT.x)]==1.0){fallbackT=0.0;}else{offT=modFirst((tileCoords/(2.0*degradationModifier))-uOffLT[1],uTileCount/(2.0*degradationModifier));if(validateOffsetT(offT)&&uMetaL1T[int(floor(offT.y)*BUFF_SIDE_T+offT.x)]==1.0){fallbackT=1.0;}else{TCT=(tileCoords+aTextureCoord)/uTileCount;}}if(fallbackT>=0.0){TCT=(offT+aTextureCoord/(exp2(fallbackT)*degradationModifier)+mod(uOffLT[int(fallbackT)],BUFF_SIDE_T))/BUFF_SIDE_T;}TCT.y=1.0-TCT.y;if(fallbackT==0.0){rawElev=texture2D(uBufferL0T,TCT).rg;}else if(fallbackT==1.0){rawElev=texture2D(uBufferL1T,TCT).rg;}else{rawElev=texture2D(uBufferLnT,TCT).rg;}elev=((TERRAIN_MAX-TERRAIN_MIN)*(rawElev.r+rawElev.g/256.0)-TERRAIN_MAX)/EARTH_RADIUS;\n#endif\nfloat exp_2y=exp(2.0*phi.y);float tanh=((exp_2y-1.0)/(exp_2y+1.0));float cosy=sqrt(1.0-tanh*tanh);vec3 pos=vec3(sin(phi.x)*cosy,tanh,cos(phi.x)*cosy);gl_Position=uMVPMatrix*vec4(pos*(1.0+elev),1.0);if(abs(phi.y)>PI){vFallbackA=-1.0e3;return;}vFallbackA=-1.0;vec2 off=modFirst(tileCoords-uOffLA[0],uTileCount);if(validateOffset(off)&&uMetaL0A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=0.0;}else{off=modFirst((tileCoords/2.0)-uOffLA[1],uTileCount/2.0);if(validateOffset(off)&&uMetaL1A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=1.0;}else{off=modFirst((tileCoords/4.0)-uOffLA[2],uTileCount/4.0);if(validateOffset(off)&&uMetaL2A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=2.0;}}}if(vFallbackA>=0.0){vTCA=(off+aTextureCoord/exp2(vFallbackA)+mod(uOffLA[int(vFallbackA)],BUFF_SIDE))/BUFF_SIDE;}else{vTCA=(tileCoords+aTextureCoord)/uTileCount;}vTCA.y=1.0-vTCA.y;vFallbackB=-1.0;off=modFirst(tileCoords-uOffLB[0],uTileCount);if(validateOffset(off)&&uMetaL0B[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackB=0.0;}else{off=modFirst((tileCoords/2.0)-uOffLB[1],uTileCount/2.0);if(validateOffset(off)&&uMetaL1B[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackB=1.0;}else{off=modFirst((tileCoords/4.0)-uOffLB[2],uTileCount/4.0);if(validateOffset(off)&&uMetaL2B[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackB=2.0;}}}if(vFallbackB>=0.0){vTCB=(off+aTextureCoord/exp2(vFallbackB)+mod(uOffLB[int(vFallbackB)],BUFF_SIDE))/BUFF_SIDE;}else{vTCB=(tileCoords+aTextureCoord)/uTileCount;}vTCB.y=1.0-vTCB.y;}",
"earth-vs.glsl":"#define BUFF_SIDE 8.0\n#define BUFF_SIZE 64\n#define TERRAIN %TERRAIN_BOOL%\n#define BUFF_SIDE_T %BUFFER_SIDE_T_FLOAT%\n#define BUFF_SIZE_T int(BUFF_SIDE_T*BUFF_SIDE_T)\nprecision highp float;const float PI=3.1415927;const float PI2=6.2831855;const float EARTH_RADIUS=6378137.0;const float TERRAIN_MIN=-10000.0;const float TERRAIN_MAX=12000.0;attribute vec2 aVertexPosition;attribute vec2 aTextureCoord;uniform mat4 uMVPMatrix;uniform float uTileCount;uniform vec2 uOffset;uniform float uMetaL0A[BUFF_SIZE];uniform float uMetaL1A[BUFF_SIZE];uniform float uMetaL2A[BUFF_SIZE];uniform vec2 uOffLA[3];varying float vFallbackA;varying vec2 vTCA;\n#if TERRAIN\nuniform float uMetaL0T[BUFF_SIZE_T];uniform float uMetaL1T[BUFF_SIZE_T];uniform vec2 uOffLT[2];uniform sampler2D uBufferL0T;uniform sampler2D uBufferL1T;uniform sampler2D uBufferLnT;uniform float uDegradationT;bool validateOffsetT(vec2 off){return off.x>=0.0&&off.y>=0.0&&off.x<BUFF_SIDE_T&&off.y<BUFF_SIDE_T;}\n#endif\nbool validateOffset(vec2 off){return off.x>=0.0&&off.y>=0.0&&off.x<BUFF_SIDE&&off.y<BUFF_SIDE;}vec2 modFirst(vec2 x,float y){return vec2(x.x-y*floor(x.x/y),x.y);}void main(){vec2 phi=PI2*(aVertexPosition+uOffset)/uTileCount;vec2 tileCoords=vec2(mod(aVertexPosition.x-aTextureCoord.x+uOffset.x+uTileCount*0.5,uTileCount),-aTextureCoord.y-aVertexPosition.y-uOffset.y+uTileCount*0.5);float elev=0.0;\n#if TERRAIN\nvec2 TCT;float fallbackT=-1.0;float degradationModifier=exp2(uDegradationT);vec2 offT=modFirst(tileCoords/degradationModifier-uOffLT[0],uTileCount/degradationModifier);vec2 rawElev;if(validateOffsetT(offT)&&uMetaL0T[int(floor(offT.y)*BUFF_SIDE_T+offT.x)]==1.0){fallbackT=0.0;}else{offT=modFirst((tileCoords/(2.0*degradationModifier))-uOffLT[1],uTileCount/(2.0*degradationModifier));if(validateOffsetT(offT)&&uMetaL1T[int(floor(offT.y)*BUFF_SIDE_T+offT.x)]==1.0){fallbackT=1.0;}else{TCT=(tileCoords+aTextureCoord)/uTileCount;}}if(fallbackT>=0.0){TCT=(offT+aTextureCoord/(exp2(fallbackT)*degradationModifier)+mod(uOffLT[int(fallbackT)],BUFF_SIDE_T))/BUFF_SIDE_T;}TCT.y=1.0-TCT.y;if(fallbackT==0.0){rawElev=texture2D(uBufferL0T,TCT).rg;}else if(fallbackT==1.0){rawElev=texture2D(uBufferL1T,TCT).rg;}else{rawElev=texture2D(uBufferLnT,TCT).rg;}elev=((TERRAIN_MAX-TERRAIN_MIN)*(rawElev.r+rawElev.g/256.0)-TERRAIN_MAX)/EARTH_RADIUS;\n#endif\nfloat exp_2y=exp(2.0*phi.y);float tanh=((exp_2y-1.0)/(exp_2y+1.0));float cosy=sqrt(1.0-tanh*tanh);vec3 pos=vec3(sin(phi.x)*cosy,tanh,cos(phi.x)*cosy);gl_Position=uMVPMatrix*vec4(pos*(1.0+elev),1.0);if(abs(phi.y)>PI){vFallbackA=-1.0e3;return;}vFallbackA=-1.0;vec2 off=modFirst(tileCoords-uOffLA[0],uTileCount);if(validateOffset(off)&&uMetaL0A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=0.0;}else{off=modFirst((tileCoords/2.0)-uOffLA[1],uTileCount/2.0);if(validateOffset(off)&&uMetaL1A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=1.0;}else{off=modFirst((tileCoords/4.0)-uOffLA[2],uTileCount/4.0);if(validateOffset(off)&&uMetaL2A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=2.0;}}}if(vFallbackA>=0.0){vTCA=(off+aTextureCoord/exp2(vFallbackA)+mod(uOffLA[int(vFallbackA)],BUFF_SIDE))/BUFF_SIDE;}else{vTCA=(tileCoords+aTextureCoord)/uTileCount;}vTCA.y=1.0-vTCA.y;}",
"halo-fs.glsl":"precision lowp float;uniform sampler2D uGradient;varying vec2 vCoords;void main(){float distance=vCoords.x*vCoords.x+vCoords.y*vCoords.y;if(distance<0.98){discard;}else{gl_FragColor=texture2D(uGradient,vec2((sqrt(distance)-1.0)/0.1,0.5));}}","halo-vs.glsl":"precision lowp float;attribute vec2 aVertexPosition;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;varying vec2 vCoords;void main(){gl_Position=uPMatrix*(uMVMatrix[3]+uMVMatrix[0]*aVertexPosition.x+uMVMatrix[1]*aVertexPosition.y);gl_Position.z=0.0;vCoords=aVertexPosition;}"};function nd(a){return a in md?md[a]:Lb("../we/shaders/"+a)};function od(a){var c;this.a=a.a;c=this.c=a.a.c,a=c;this.fd=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.fd);a.bufferData(a.ARRAY_BUFFER,new Float32Array([1.1,1.1,-1.1,1.1,1.1,-1.1,-1.1,-1.1]),a.STATIC_DRAW);this.Gc=a.createTexture();var b=new Uint8Array([224,224,255,255,207,218,250,220,179,194,245,180,137,166,237,145,84,123,221,110,51,94,198,75,25,67,178,30,13,53,161,0]);a.bindTexture(a.TEXTURE_2D,this.Gc);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,8,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);b=nd("halo-fs.glsl");a=nd("halo-vs.glsl");b=ld(this.a,b,this.c.FRAGMENT_SHADER);a=ld(this.a,a,this.c.VERTEX_SHADER);this.O=this.c.createProgram();w(this.O)&&h(Error("Unknown"));this.c.attachShader(this.O,a);this.c.attachShader(this.O,b);this.c.bindAttribLocation(this.O,0,"aVertexPosition");
this.c.linkProgram(this.O);this.c.getProgramParameter(this.O,this.c.LINK_STATUS)||h(Error("Shader program err: "+this.c.getProgramInfoLog(this.O)));this.gb=this.c.getAttribLocation(this.O,"aVertexPosition");this.c.enableVertexAttribArray(this.gb);this.Yd=this.c.getUniformLocation(this.O,"uMVMatrix");this.fe=this.c.getUniformLocation(this.O,"uPMatrix");this.Ed=this.c.getUniformLocation(this.O,"uGradient")}
od.prototype.draw=function(){this.c.useProgram(this.O);this.c.bindBuffer(this.c.ARRAY_BUFFER,this.fd);this.c.vertexAttribPointer(this.gb,2,this.c.FLOAT,!1,0,0);this.c.activeTexture(this.c.TEXTURE0);this.c.bindTexture(this.c.TEXTURE_2D,this.Gc);this.c.uniform1i(this.Ed,0);var a=new Float32Array(rb(Qc(this.a.H.A).eb())),b=new Float32Array(rb(Qc(this.a.Da).eb()));this.c.uniformMatrix4fv(this.Yd,!1,a);this.c.uniformMatrix4fv(this.fe,!1,b);this.c.drawArrays(this.c.TRIANGLE_STRIP,0,4)};function pd(){}E(pd,F);s=pd.prototype;s.yc=!0;s.ic=n;s.addEventListener=function(a,b,c,d){U(this,a,b,c,d)};s.removeEventListener=function(a,b,c,d){Ec(this,a,b,c,d)};
s.dispatchEvent=function(a){var b=a.type||a,c=S;if(b in c){if(z(a))a=new Q(a,this);else if(a instanceof Q)a.target=a.target||this;else{var d=a,a=new Q(b,this);hb(a,d)}var d=1,e,c=c[b],b=!0 in c,f;if(b){e=[];for(f=this;f;f=f.ic)e.push(f);f=c[!0];f.T=f.p;for(var g=e.length-1;!a.Qa&&g>=0&&f.T;g--)a.currentTarget=e[g],d&=Hc(f,e[g],a.type,!0,a)&&a.ab!=!1}if(!1 in c)if(f=c[!1],f.T=f.p,b)for(g=0;!a.Qa&&g<e.length&&f.T;g++)a.currentTarget=e[g],d&=Hc(f,e[g],a.type,!1,a)&&a.ab!=!1;else for(e=this;!a.Qa&&e&&
f.T;e=e.ic)a.currentTarget=e,d&=Hc(f,e,a.type,!1,a)&&a.ab!=!1;a=Boolean(d)}else a=!0;return a};s.q=function(){pd.F.q.call(this);Gc(this);this.ic=n};function qd(a){this.f=a;this.Y=this.R=0;this.v=1E7;this.ub=this.ha=this.Pa=0}E(qd,pd);s=qd.prototype;s.setPosition=function(a,b){this.R=L(a,-1.57,1.57);this.Y=Mb(b);this.dispatchEvent(new rd(sd))};function td(a,b,c){function d(a){var d=c;c=d*Math.cos(a)-2*b*Math.sin(a);b=d*Math.sin(a)/2+b*Math.cos(a)}d(a.ub);b/=Math.max(Math.abs(Math.cos(a.ha)),0.1);d(a.Pa);a.setPosition(a.R+b,a.Y+c)}s.getPosition=function(){return[this.R,this.Y]};function X(a,b){a.v=L(b,250,1E7);a.dispatchEvent(new rd(ud))}
function vd(a){return wd(a.f,a.f.a.ja/2,a.f.a.ia/2)}s.setHeading=function(a){this.Pa=a};s.setTilt=function(a){this.ha=a};s.getHeading=o("Pa");s.getTilt=o("ha");var sd="poschanged",ud="altchanged";function rd(a){Q.call(this,a)}E(rd,Q);function xd(a,b,c,d,e){function f(a,b,c,d){a?a=b:(a=b/Math.max(1,Math.sqrt(c*c+d*d)),a=Math.max(1,Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))));return a}a=a.c;this.W=[];this.La=[];this.h=[];for(var g=-b/2;g<b/2;++g)for(var i=-c/2;i<c/2;++i){var l=f(e,d,g,i),j=[i+1<c/2&&f(e,d,g,i+1)>l,g+1<b/2&&f(e,d,g+1,i)>l,i-1>-c/2&&f(e,d,g,i-1)>l,g-1>-b/2&&f(e,d,g-1,i)>l];yd(this,g,i,l,j)}this.Ab=a.createBuffer();this.yb=a.createBuffer();this.Ic=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.Ab);a.bufferData(a.ARRAY_BUFFER,
new Float32Array(this.W),a.STATIC_DRAW);this.Ab.Tb=2;a.bindBuffer(a.ARRAY_BUFFER,this.yb);a.bufferData(a.ARRAY_BUFFER,new Float32Array(this.La),a.STATIC_DRAW);this.yb.Tb=2;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Ic);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.h),a.STATIC_DRAW);this.ae=this.h.length}
function yd(a,b,c,d,e){for(var f=a.W.length/2,g=0;g<=d;++g)for(var i=0;i<=d;++i)a.W.push(b+i/d,c+g/d),a.La.push(i/d,1-g/d);var l=[0,0,0,0];if(e[0]){l[0]=a.W.length/2;for(i=0;i<d;++i)a.W.push(b+(i+0.5)/d,c+1),a.La.push((i+0.5)/d,0)}if(e[1]){l[1]=a.W.length/2;for(g=0;g<d;++g)a.W.push(b+1,c+(g+0.5)/d),a.La.push(1,1-(g+0.5)/d)}if(e[2]){l[2]=a.W.length/2;for(i=0;i<d;++i)a.W.push(b+(i+0.5)/d,c),a.La.push((i+0.5)/d,1)}if(e[3]){l[3]=a.W.length/2;for(g=0;g<d;++g)a.W.push(b,c+(g+0.5)/d),a.La.push(0,1-(g+0.5)/
d)}b=B(function(){},a);c=d+1;for(g=0;g<d;++g)for(i=0;i<d;++i){var j=f+g*c+i;a.h.push(j);var p=g==0&&e[2],m=i==0&&e[3];p&&!m?(a.h.push(l[2]+i),a.h.push(j+c),b(),a.h.push(l[2]+i)):m&&!p?(a.h.push(j+1),a.h.push(l[3]+g),b(),a.h.push(l[3]+g)):m&&p&&(a.h.push(l[2]+i),a.h.push(l[3]+g),b(),a.h.push(l[3]+g),a.h.push(l[2]+i),a.h.push(j+c),b(),a.h.push(l[2]+i));a.h.push(j+1);a.h.push(j+c);b();a.h.push(j+c+1);p=g==d-1&&e[0];m=i==d-1&&e[1];p&&!m?(a.h.push(l[0]+i),a.h.push(j+1),b(),a.h.push(l[0]+i)):m&&!p?(a.h.push(j+
c),a.h.push(l[1]+g),b(),a.h.push(l[1]+g)):p&&m&&(a.h.push(l[0]+i),a.h.push(l[1]+g),b(),a.h.push(l[1]+g),a.h.push(l[0]+i),a.h.push(j+1),b(),a.h.push(l[0]+i));a.h.push(j+c);a.h.push(j+1);b()}};function zd(a,b,c,d){b=b.c;this.j=a;this.gb=b.getAttribLocation(this.j,"aVertexPosition");b.enableVertexAttribArray(this.gb);this.dd=b.getAttribLocation(this.j,"aTextureCoord");b.enableVertexAttribArray(this.dd);this.Zd=Y(b,this.j,"uMVPMatrix");this.Pd=Y(b,this.j,"uMetaL0A");this.Sd=Y(b,this.j,"uMetaL1A");this.Vd=Y(b,this.j,"uMetaL2A");this.Jd=Y(b,this.j,"uOffLA");this.hd=Y(b,this.j,"uBufferL0A");this.ld=Y(b,this.j,"uBufferL1A");this.od=Y(b,this.j,"uBufferL2A");this.qd=Y(b,this.j,"uBufferLnA");if(c)this.Qd=
Y(b,this.j,"uMetaL0B"),this.Td=Y(b,this.j,"uMetaL1B"),this.Wd=Y(b,this.j,"uMetaL2B"),this.Kd=Y(b,this.j,"uOffLB"),this.jd=Y(b,this.j,"uBufferL0B"),this.md=Y(b,this.j,"uBufferL1B"),this.pd=Y(b,this.j,"uBufferL2B"),this.Xd=Y(b,this.j,"uMixFactor");if(d)this.wd=Y(b,this.j,"uDegradationT"),this.Rd=Y(b,this.j,"uMetaL0T"),this.Ud=Y(b,this.j,"uMetaL1T"),this.Ld=Y(b,this.j,"uOffLT"),this.kd=Y(b,this.j,"uBufferL0T"),this.nd=Y(b,this.j,"uBufferL1T"),this.rd=Y(b,this.j,"uBufferLnT");this.se=Y(b,this.j,"uTileCount");
this.be=Y(b,this.j,"uOffset")}function Y(a,b,c){a=a.getUniformLocation(b,c);w(a)&&h(Error("Invalid name "+c));return a};function Ad(a,b){this.ob=a||1;this.cb=b||Bd;this.Db=B(this.pe,this);this.Wb=C()}E(Ad,pd);Ad.prototype.enabled=!1;var Bd=t.window;s=Ad.prototype;s.Ia=n;s.pe=function(){if(this.enabled){var a=C()-this.Wb;if(a>0&&a<this.ob*0.8)this.Ia=this.cb.setTimeout(this.Db,this.ob-a);else if(this.dispatchEvent(Cd),this.enabled)this.Ia=this.cb.setTimeout(this.Db,this.ob),this.Wb=C()}};s.start=function(){this.enabled=!0;if(!this.Ia)this.Ia=this.cb.setTimeout(this.Db,this.ob),this.Wb=C()};
s.stop=function(){this.enabled=!1;if(this.Ia)this.cb.clearTimeout(this.Ia),this.Ia=n};s.q=function(){Ad.F.q.call(this);this.stop();delete this.cb};var Cd="tick";function Dd(a){this.ga=new xb;this.Ba=[];this.oe=512;this.vc=new Ad(2E4);U(this.vc,Cd,this.ud,!1,this);this.vc.start();Ed(this,a)}function Ed(a,b){a.ed=C();a.M=b;vb(a.ga,function(a){a.n()});a.ga.clear();a.Ba=[]}s=Dd.prototype;s.M=n;s.ed=0;s.re=u;
s.ud=function(){var a=jb(this.ga.pa(),function(a){return a.state==20||a.state==za||a.state==-10});for(pb(a,function(a,b){return a.ra-b.ra});this.ga.ca()>this.oe&&a.length>0;){var b=a.shift();b.state==za&&lb(this.Ba,b);this.ga.remove(b.zoom+"_"+b.x+"_"+b.y);b.n()}};s.te=function(a){a.ra<this.ed?(a.state=-10,this.ga.remove(a.zoom+"_"+a.x+"_"+a.y),a.n()):this.re(a)};
function Fd(a){pb(a.Ba,function(a,b){return a.ra-b.ra});for(var b=Math.min(a.Ba.length,5-a.M.S),c=0;c<b;c++)Ib(a.M,a.Ba.pop(),B(a.te,a))};function Gd(a,b,c,d){this.X=b;this.ka=[];this.g=c;this.M=a;this.oc=new Dd(a);this.G=d;this.L=1<<this.G;this.Na=this.g>=this.L;this.ea=this.Ca=0;this.buffer=n;this.B=[];Hd(this)}function Hd(a){a.B=[];for(var b=0;b<a.g;++b)a.B.push(Array(a.g));a.buffer&&a.buffer.clear()}Gd.prototype.disable=function(){this.ka=[];Hd(this);this.buffer=n};Gd.prototype.aa=function(a){this.M=a;Ed(this.oc,a);this.ka=[];Hd(this)};
function Id(a){a.ka=[];for(var b=B(function(a,b){var c=(this.Na?this.L:this.g)/2;a+=c;b+=c;this.B[b][a]!==1&&Jd(this,this.Ca+a,this.ea+b,d)},a),c=B(function(a,c){for(var d=-c;d<c;++d)b(d,-c),b(d,c-1);for(d=-c;d<c;++d)b(-c,d),b(c-1,d)},a),d=C(),a=Math.min(a.g,a.L)/2;a>0;--a)c(d+a,a)}
function Jd(a,b,c,d){var b=M(b,a.L),c=M(c,a.L),e;a:{e=a.oc;var f=a.G,g=b,i=c,c=f+"_"+g+"_"+i,b=e.ga.get(c);if(x(b))b.state==-10?d-b.ra>7E3&&(b.n(),b=new ya(f,g,i,d),e.ga.set(c,b),e.Ba.push(b)):b.ra=d;else{d=b=new ya(f,g,i,d);f=Fb(e.M,d.zoom);if(!(d.x>=f.left&&d.x<=f.right&&d.y>=f.top&&d.y<=f.bottom)){e=n;break a}e.ga.set(c,b);e.Ba.push(b)}e=b}!w(e)&&e.state==20&&a.ka.push(e)};function Kd(a,b,c){var d;d=this.da=a.c,a=d;this.rc=b;this.Rb=c;this.P=a.createTexture();Ld(this)}Kd.prototype.$a=function(a,b){if(!(this.rc==a&&this.Rb==b))this.rc=a,this.Rb=b,this.da.deleteTexture(this.P),this.P=this.da.createTexture(),Ld(this)};
function Ld(a){var b=a.da;b.bindTexture(b.TEXTURE_2D,a.P);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,1);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,a.rc,a.Rb,0,b.RGBA,b.UNSIGNED_BYTE,n);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR_MIPMAP_LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR_MIPMAP_LINEAR)}Kd.prototype.clear=function(){this.da.deleteTexture(this.P);this.P=this.da.createTexture();Ld(this)};function Md(a,b,c){function d(b){f.isTexture(g)&&(b.Kb>=3||Ib(a,b,e,d))}function e(c){if(f.isTexture(g)){f.bindTexture(f.TEXTURE_2D,g);try{f.texSubImage2D(f.TEXTURE_2D,0,c.x*l,(i-c.y-1)*l,f.RGBA,f.UNSIGNED_BYTE,Aa(c))}catch(j){a.Eb()&&(a.mc(b.qa)||!(c.za&&c.za.src.lastIndexOf(b.qa,0)==0))?Ib(a,c,e,d):b.Wc()}}}var f=this.da=b.c,g=f.createTexture();this.P=g;var i=1<<c,l=a.oa();f.bindTexture(f.TEXTURE_2D,g);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,1);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,l*i,l*i,0,f.RGBA,f.UNSIGNED_BYTE,
n);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR);for(var j=0;j<i;++j)for(var p=0;p<i;++p)Ib(a,new ya(c,j,p),e,d)}E(Md,F);Md.prototype.q=function(){this.da.deleteTexture(this.P)};function Nd(a,b,c,d,e,f,g){this.X=b;this.g=c;this.N=e;this.qb=f;this.M=a;var i=a.oa();this.$=[];for(var l=0;l<d;++l)this.$.push(new Kd(b,this.g*i,this.g*i));for(this.t=[];e<=f;++e)this.t.push(new Gd(a,b,c,e));for(l=0;l<d;++l)this.t[l].buffer=this.$[l];this.Q=0;this.Va=g?n:new Md(a,b,2)}Nd.prototype.aa=function(a){if(!w(this.Va))this.Va.n(),this.Va=new Md(a,this.X,2);this.M=a;var b=this.g*a.oa();I(this.$,function(a){a.$a(b,b)});I(this.t,function(b){b.aa(a)});Od(this)};
function Pd(a,b,c,d,e,f){for(var f=L(f,a.N,a.qb),g=f-(a.N+a.Q+a.$.length-1);g>0;){var i=a.t[a.Q].buffer;a.t[a.Q].disable();a.t[++a.Q+a.$.length-1].buffer=i;g--}for(;g<0&&a.Q>0;)i=a.t[a.Q+a.$.length-1].buffer,a.t[a.Q+a.$.length-1].disable(),a.t[--a.Q].buffer=i,g++;for(var g=1<<f,l=!1,c=(c/(2*Math.PI)+0.5)*g,b=(0.5-Gb(b)/(Math.PI*2))*g,e=(e/(2*Math.PI)+0.5)*g,i=(0.5-Gb(d)/(Math.PI*2))*g,d=f-a.N;d>=a.Q;d--){var j=L(c-a.g/2,e-a.g,e),p=L(b-a.g/2,i-a.g,i),m=Fb(a.M,a.N+d),j=L(j,m.left,m.right+1-a.g),p=L(p,
m.top,m.bottom+1-a.g),j=M(Math.round(j),g),p=Math.round(p),m=a.t[d],A=p,p=!1;if(!m.Na){var q=j-m.Ca,fa=A-m.ea;Math.abs(q)>m.L/2&&(q=(q-(q==0?0:q<0?-1:1)*m.L)%m.L);m.Ca=j;m.ea=A;if(Math.abs(q)>=m.g||Math.abs(fa)>=m.g)Hd(m),p=!0;else{p=q!=0||fa!=0;if(q>0)for(j=0;j<m.g;++j)m.B[j].splice(0,q),m.B[j].push.apply(m.B[j],Array(q));if(q<0)for(j=0;j<m.g;++j)m.B[j].splice(m.g+q,-q),m.B[j].unshift.apply(m.B[j],Array(-q));if(fa>0)for(j=0;j<fa;++j)m.B.shift(),m.B.push(Array(m.g));if(fa<0)for(j=0;j<-fa;++j)m.B.pop(),
m.B.unshift(Array(m.g))}}Id(m);l|=p;c/=2;b/=2;e/=2;i/=2}l&&Od(a);e=1;for(d=a.Q;e>0&&d<=f-a.N;d++){g=e;c=a.t[d];b=0;if(c.ka.length>0){e=Math.min(c.ka.length,e>=0?1:0);for(i=0;i<e;i++){j=c;l=c.ka.pop();if(!w(j.buffer)&&l.zoom==j.G&&(m=l.x-j.Ca,p=l.y-j.ea,q=1<<j.G,m=M(m,q),p=M(p,q),!(m<0||m>=j.g||p<0||p>=j.g))){q=j.X.c;A=j.M.oa();q.bindTexture(q.TEXTURE_2D,j.buffer.P);fa=M(m+j.Ca,j.g)*A;A*=j.g-M(p+j.ea,j.g)-1;try{q.texSubImage2D(q.TEXTURE_2D,0,fa,A,q.RGBA,q.UNSIGNED_BYTE,Aa(l)),j.B[p][m]=1}catch(Be){j.M.Eb()&&
(j.M.mc(j.X.qa)||!(l.za&&l.za.src.lastIndexOf(j.X.qa,0)==0))?Jd(j,l.x,l.y,l.ra):j.X.Wc()}}b++}}Fd(c.oc);b>0&&(c.X.c.bindTexture(c.X.c.TEXTURE_2D,c.buffer.P),c.X.c.generateMipmap(c.X.c.TEXTURE_2D));e=g-b}}function Qd(a,b,c){return b>a.qb||b-c<a.N?Array(a.g*a.g):rb(a.t[b-a.N-c].B)}function Rd(a,b,c){return b>a.qb||b-c<a.N?n:a.t[b-a.N-c].buffer.P}
function Sd(a,b,c){if(b>a.qb)return Array(2*c);for(var d=[],e=b-a.N;e>b-a.N-c;--e)d.push(Math.round(a.t[Math.max(0,e)].Ca),Math.round(a.t[Math.max(0,e)].ea));return d}function Od(a){for(var b=Array(a.$.length),c=0;c<a.$.length;c++){var d=a.t[a.Q+c],e=Td((0.5-d.ea/d.L)*2*Math.PI),f=Td((0.5-(d.ea+d.g)/d.L)*2*Math.PI);b[c]=new Kb(d.Na?0:Td((0.5-(d.ea+d.g/2)/d.L)*2*Math.PI),d.Na?0:((d.Ca+d.g/2)/d.L-0.5)*2*Math.PI,d.Na?Math.PI/2:Math.abs(e-f),d.Na?Math.PI:d.g/d.L*2*Math.PI,d.G)}a.M.Yc(b)};function Ud(a,b){this.a=a.a;this.e=a;this.z=b||new Qb;this.I=new Nd(this.z,this.a,8,3,1,19);this.w=this.va=n;this.Ga=!1;this.aa(this.z,!0);this.Ha=1;this.ac=[0,0];this.$c=[new xd(this.a,1,1,1),new xd(this.a,4,4,16,!0),new xd(this.a,6,6,8,!0),new xd(this.a,8,8,8,!0),new xd(this.a,10,10,8),new xd(this.a,64,64,this.Ga?8:4)];this.Md=Vd(this,!1);this.Nd=Vd(this,!0);this.G=n;U(this.e.b,ud,this.ve,!1,this)}s=Ud.prototype;
s.aa=function(a,b,c){if(a)a.Gb=B(this.e.pc,this.e);if(c)if(this.va=a)x(this.w)?this.w.aa(a):(this.I=new Nd(this.z,this.a,4,3,1,19),this.w=new Nd(this.va,this.a,4,3,0,15));else{if(x(this.w))this.I=new Nd(this.z,this.a,8,3,1,19),this.w=n}else{if(!a)return;this.I.aa(a);this.z=a}b!==!0&&(cd(this.e),this.e.pc(),this.setZoom(this.getZoom()))};
s.draw=function(){var a=this.a.c;this.Ha=1<<this.getZoom();var b=this.e.b.getPosition(),c=vd(this.e.b)||b;this.ac[0]=Math.floor(b[1]/(2*Math.PI)*this.Ha);this.ac[1]=L(Math.floor(Gb(b[0])/(Math.PI*2)*this.Ha),-this.Ha/2,this.Ha/2);Pd(this.I,c[0],c[1],b[0],b[1],Math.floor(this.getZoom()));this.w&&Pd(this.w,c[0],c[1],b[0],b[1],Math.floor(this.getZoom()));this.Ga&&Pd(this.ma,c[0],c[1],b[0],b[1],Math.floor(this.getZoom())-5);c=Math.floor(this.getZoom());this.Ha=1<<c;b=this.w?this.Nd:this.Md;a.useProgram(b.j);
a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,Rd(this.I,c,0));a.uniform1i(b.hd,0);a.activeTexture(a.TEXTURE1);a.bindTexture(a.TEXTURE_2D,Rd(this.I,c,1));a.uniform1i(b.ld,1);a.activeTexture(a.TEXTURE2);a.bindTexture(a.TEXTURE_2D,Rd(this.I,c,2));a.uniform1i(b.od,2);a.activeTexture(a.TEXTURE3);a.bindTexture(a.TEXTURE_2D,this.I.Va.P);a.uniform1i(b.qd,3);a.uniform1fv(b.Pd,new Float32Array(Qd(this.I,c,0)));a.uniform1fv(b.Sd,new Float32Array(Qd(this.I,c,1)));a.uniform1fv(b.Vd,new Float32Array(Qd(this.I,
c,2)));a.uniform2fv(b.Jd,new Float32Array(Sd(this.I,c,3)));this.w&&(a.activeTexture(a.TEXTURE4),a.bindTexture(a.TEXTURE_2D,Rd(this.w,c,0)),a.uniform1i(b.jd,4),a.activeTexture(a.TEXTURE5),a.bindTexture(a.TEXTURE_2D,Rd(this.w,c,1)),a.uniform1i(b.md,5),a.activeTexture(a.TEXTURE6),a.bindTexture(a.TEXTURE_2D,Rd(this.w,c,2)),a.uniform1i(b.pd,6),a.uniform1fv(b.Qd,new Float32Array(Qd(this.w,c,0))),a.uniform1fv(b.Td,new Float32Array(Qd(this.w,c,1))),a.uniform1fv(b.Wd,new Float32Array(Qd(this.w,c,2))),a.uniform2fv(b.Kd,
new Float32Array(Sd(this.w,c,3))),a.uniform1f(b.Xd,this.va.opacity));if(this.Ga){var d=L(c-5,2,this.xb.na());a.uniform1f(b.wd,c-d);a.activeTexture(a.TEXTURE7);a.bindTexture(a.TEXTURE_2D,Rd(this.ma,d,0));a.uniform1i(b.kd,7);a.activeTexture(a.TEXTURE8);a.bindTexture(a.TEXTURE_2D,Rd(this.ma,d,1));a.uniform1i(b.nd,8);a.activeTexture(a.TEXTURE9);a.bindTexture(a.TEXTURE_2D,this.ma.Va.P);a.uniform1i(b.rd,9);a.uniform1fv(b.Rd,new Float32Array(Qd(this.ma,d,0)));a.uniform1fv(b.Ud,new Float32Array(Qd(this.ma,
d,1)));a.uniform2fv(b.Ld,new Float32Array(Sd(this.ma,d,2)))}d=new Float32Array(rb(Qc(dd(this.a)).eb()));c=this.$c[Math.min(c,this.$c.length-1)];a.bindBuffer(a.ARRAY_BUFFER,c.Ab);a.vertexAttribPointer(b.gb,c.Ab.Tb,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,c.yb);a.vertexAttribPointer(b.dd,c.yb.Tb,a.FLOAT,!1,0,0);a.uniformMatrix4fv(b.Zd,!1,d);a.uniform1f(b.se,this.Ha);a.uniform2fv(b.be,new Float32Array(this.ac));a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c.Ic);a.drawElements(a.TRIANGLES,c.ae,a.UNSIGNED_SHORT,
0)};
function Vd(a,b){var c=a.a.c,d=nd("earth-fs"+(b?"-overlay":"")+".glsl"),e=nd("earth-vs"+(b?"-overlay":"")+".glsl"),e=e.replace("%TERRAIN_BOOL%",a.Ga?"1":"0");a.Ga&&(e=e.replace("%BUFFER_SIDE_T_FLOAT%",a.ma.g.toFixed(1)));var d=ld(a.a,d,c.FRAGMENT_SHADER),e=ld(a.a,e,c.VERTEX_SHADER),f=c.createProgram();w(f)&&h(Error("Unknown"));c.attachShader(f,e);c.attachShader(f,d);c.bindAttribLocation(f,0,"aVertexPosition");c.linkProgram(f);c.getProgramParameter(f,c.LINK_STATUS)||h(Error("Shader program err: "+c.getProgramInfoLog(f)));
return new zd(f,a.a,b,a.Ga)}s.setZoom=function(a){this.G=L(a,this.z.ya(),this.z.na());X(this.e.b,Wd(this,this.G,this.e.b.R))};s.ve=function(){this.G=n};s.getZoom=function(){w(this.G)&&Xd(this);return this.G};function Xd(a,b){var c=a.e.b,c=Math.log(Math.cos(Math.abs(c.R))*2*Math.PI/(2*(c.v/6378137)*Math.tan(a.a.wa/2)/a.e.zb))/Math.LN2;return b?c:(a.G=L(c,a.z.ya(),a.z.na()),a.G)}function Wd(a,b,c){return 1/Math.tan(a.a.wa/2)*(Math.cos(Math.abs(c))*2*Math.PI/Math.pow(2,b)*a.e.zb/2)*6378137}
function Yd(a,b,c,d){var e=Math.sin((c-a)/2),b=Math.sin((d-b)/2);return 6378137*2*Math.asin(Math.sqrt(e*e+Math.cos(a)*Math.cos(c)*b*b))};function Zd(a,b,c){this.x=v(a)?a:0;this.y=v(b)?b:0;this.k=v(c)?c:0}Zd.prototype.Ka=function(){return new Zd(this.x,this.y,this.k)};Zd.prototype.eb=function(){return[this.x,this.y,this.k]};function $d(a,b,c){this.x=a;this.y=b;this.k=c}E($d,Zd);s=$d.prototype;s.Ka=function(){return new $d(this.x,this.y,this.k)};s.scale=function(a){this.x*=a;this.y*=a;this.k*=a;return this};s.normalize=function(){return this.scale(1/Math.sqrt(this.x*this.x+this.y*this.y+this.k*this.k))};s.add=function(a){this.x+=a.x;this.y+=a.y;this.k+=a.k;return this};s.cd=function(a){this.x-=a.x;this.y-=a.y;this.k-=a.k;return this};s.equals=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.k==a.k};function ae(a,b,c,d,e,f){if(w(d))return n;a=d.multiply(new W([[a/e*2-1],[1-2*b/f],[c*2-1],[1]]));if(Rc(a,3,0)==0)return n;a=a.multiply(1/Rc(a,3,0));return new $d(Rc(a,0,0),Rc(a,1,0),Rc(a,2,0))};function be(a,b,c,d,e,f,g){this.a=a;this.Jc=b||n;this.sa=c||document.createElement("div");if(!v(c))a=this.a.canvas,a.parentNode&&a.parentNode.insertBefore(this.sa,a.nextSibling);this.fb=d||document.createElement("img");if(!v(d))d=this.sa,d.parentNode&&d.parentNode.insertBefore(this.fb,d.nextSibling);this.gd=f||n;this.b=new qd(this);this.r=new Ud(this,e);this.Hc=g===!0?n:new od(this);this.zb=0;cd(this);this.pc()}
be.prototype.pc=function(){if(!w(this.sa)){for(var a=this.sa,b;b=a.firstChild;)a.removeChild(b);O(this.sa,this.gd);this.r.z.ta(this.sa);this.r.va&&(O(this.sa,P("br"),P("strong",{},"Overlay data:"),P("br")),this.r.va.ta(this.sa))}if(!w(this.fb))w(this.r.z.nb())?this.fb.style.visibility="hidden":(this.fb.src=this.r.z.nb(),this.fb.style.visibility="visible")};function cd(a){a.zb=0.7*a.a.canvas.height/a.r.z.oa()}
be.prototype.draw=function(){var a=this.a.c;if(!w(this.Jc)){for(var b=this.Jc,c=N(this.b.R).toFixed(4)+"; "+N(this.b.Y).toFixed(4)+" @ "+this.b.v.toFixed(0)+"m -> z="+this.r.getZoom().toFixed(3)+"; ",d=this.r,e=d.I,f="",g=0;g<e.t.length;++g)f+=g+e.N+":"+e.t[g].ka.length+" ";e="BufferQueue size: "+f+"; Loading tiles: "+d.z.S;d.va&&(e+=" + "+d.va.S);b.innerHTML=c+e}b=this.b.v/6378137;c=this.a;c.ib=0.25*b;c.hb=1+b;bd(c);if(this.Hc)a.enable(a.BLEND),a.disable(a.DEPTH_TEST),b=Math.sin((Math.PI-this.a.wa)/
2),c=Math.sin(this.a.wa/2),this.a.H.A=Mc(4),Xc(this.a.H,-this.b.getTilt()),this.a.H.translate(0,0,c-1-this.b.v/6378137),this.a.H.scale(b,b,b),this.Hc.draw(),a.disable(a.BLEND),a.enable(a.DEPTH_TEST);this.a.H.A=Mc(4);Yc(this.a.H,-this.b.ub);Xc(this.a.H,-this.b.getTilt());Yc(this.a.H,-this.b.getHeading());this.a.H.translate(0,0,-1-this.b.v/6378137);Xc(this.a.H,this.b.R);a=this.a.H;c=-this.b.Y;b=Math.cos(c);c=Math.sin(c);a.A=a.A.multiply(new W([[b,0,c,0],[0,1,0,0],[-c,0,b,0],[0,0,0,1]]));this.r.draw()};
function wd(a,b,c){var d=ae(b,c,0,a.a.$b,a.a.ja,a.a.ia),a=ae(b,c,1,a.a.$b,a.a.ja,a.a.ia);if(w(d)||w(a))return n;a.cd(d);a.normalize();c=d.Ka();c.x=-c.x;c.y=-c.y;c.k=-c.k;var b=a.x*c.x+a.y*c.y+a.k*c.k,e=b*b-(c.x*c.x+c.y*c.y+c.k*c.k)+1;e<0?b=n:(c=Math.min(b+Math.sqrt(e),b-Math.sqrt(e)),b=Math.max(b+Math.sqrt(e),b-Math.sqrt(e)),b=[c,b]);if(w(b))return n;a=a.scale(b[0]);d=new $d(d.x+a.x,d.y+a.y,d.k+a.k);a=Math.asin(d.x/Math.sqrt(1-d.y*d.y));d.k<0&&(a=Math.PI-a);return[Math.asin(d.y),Mb(a)]}
function Gb(a){return Math.log(Math.tan(a/2+Math.PI/4))}function Td(a){return 2*Math.atan(Math.exp(a))-Math.PI/2};function Z(a,b,c,d){(!ba(a)||!ba(b))&&h(Error("Start and end parameters must be arrays"));a.length!=b.length&&h(Error("Start and end points must be the same length"));this.bb=a;this.zd=b;this.duration=c;this.sc=d;this.coords=[]}E(Z,pd);var fb={},ce=n;function de(){ee();var a=C(),b;for(b in fb)fe(fb[b],a);ce=eb()?n:Bd.setTimeout(de,20)}function ee(){ce&&(Bd.clearTimeout(ce),ce=n)}function ge(a){a=ga(a);delete fb[a];eb()&&ee()}s=Z.prototype;s.V=0;s.Fc=0;s.C=0;s.startTime=n;s.Ec=n;s.Vb=n;
s.play=function(a){if(a||this.V==0)this.C=0,this.coords=this.bb;else if(this.V==1)return!1;ge(this);this.startTime=a=C();this.V==-1&&(this.startTime-=this.duration*this.C);this.Ec=this.startTime+this.duration;this.Vb=this.startTime;this.C||this.Za();he(this,"play");this.V==-1&&this.gc();this.V=1;var b=ga(this);b in fb||(fb[b]=this);ce||(ce=Bd.setTimeout(de,20));fe(this,a);return!0};s.stop=function(a){ge(this);this.V=0;if(a)this.C=1;ie(this,this.C);this.hc();this.tb()};
s.q=function(){this.V!=0&&this.stop(!1);this.bc();Z.F.q.call(this)};function fe(a,b){a.C=(b-a.startTime)/(a.Ec-a.startTime);if(a.C>=1)a.C=1;a.Fc=1E3/(b-a.Vb);a.Vb=b;ie(a,a.C);a.C==1?(a.V=0,ge(a),he(a,"finish"),a.tb()):a.V==1&&he(a,"animate")}function ie(a,b){da(a.sc)&&(b=a.sc(b));a.coords=Array(a.bb.length);for(var c=0;c<a.bb.length;c++)a.coords[c]=(a.zd[c]-a.bb[c])*b+a.bb[c]}s.Za=function(){he(this,"begin")};s.bc=function(){he(this,"destroy")};s.tb=function(){he(this,"end")};
s.gc=function(){he(this,"resume")};s.hc=function(){he(this,"stop")};function he(a,b){a.dispatchEvent(new je(b,a))}function je(a,b){Q.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.k=b.coords[2];this.duration=b.duration;this.C=b.C;this.Lb=b.Fc;this.state=b.V;this.ye=b}E(je,Q);function ke(a){this.yd=a;this.o=U(this.yd,La?"DOMMouseScroll":"mousewheel",this)}E(ke,pd);
ke.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.Oa;if(a.type=="mousewheel"){c=1;if(G||Ma&&(Pa||Za("532.0")))c=40;d=Ma&&Ga&&-a.wheelDelta%c!=0?-a.wheelDelta:-a.wheelDelta/c;v(a.wheelDeltaX)?(b=Ma&&Ga&&-a.wheelDeltaX%c!=0?-a.wheelDeltaX:-a.wheelDeltaX/c,c=Ma&&Ga&&-a.wheelDeltaY%c!=0?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,d>100?d=3:d<-100&&(d=-3),v(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;ca(this.Nc)&&(b=L(b,-this.Nc,this.Nc));ca(this.Oc)&&(c=L(c,-this.Oc,this.Oc));b=new le(d,
a,b,c);try{this.dispatchEvent(b)}finally{b.n()}};ke.prototype.q=function(){ke.F.q.call(this);V(this.o);delete this.o};function le(a,b,c,d){b&&this.Ua(b,k);this.type="mousewheel";this.detail=a;this.Ae=c;this.Ac=d}E(le,ic);function me(a){this.f=a;this.Tc=new ke(a.a.canvas);this.o=U(this.Tc,"mousewheel",function(a){this.G(-(a.Ac==0?0:a.Ac<0?-1:1));a.preventDefault()},!1,this);this.vd=U(a.a.canvas,"dblclick",B(function(a){X(this.b,this.b.v/2);var c=wd(this,a.offsetX,a.offsetY)||vd(this.b);if(c){var d=(this.b.Y+c[1])/2;Math.abs(this.b.Y-c[1])>Math.PI&&(d+=Math.PI);this.b.setPosition((this.b.R+c[0])/2,d)}a.preventDefault()},a));this.ie=U(a.a.canvas,"mouseup",B(function(a){if(kc(a,2)){X(this.b,this.b.v*2);var c=wd(this,
a.offsetX,a.offsetY)||vd(this.b);c&&this.b.setPosition(2*this.b.R-c[0],2*this.b.Y-c[1]);a.preventDefault()}},a));this.$d=U(a.a.canvas,"contextmenu",function(a){a.preventDefault()});this.m=n;this.Fa=this.Ea=0}E(me,F);
me.prototype.G=function(a){var b=120;a*=-1;if(this.m)if(this.Fa>this.Ea==a>0)return;else this.m.n(),this.m=n,b*=(this.f.b.v-this.Ea)/(this.Fa-this.Ea),a=this.Fa,this.Fa=this.Ea,this.Ea=a;else this.Ea=this.f.b.v,this.Fa=L(this.Ea*Math.pow(2,a),250,1E7);if(!(isNaN(b)||b<=0)){var a=this.f.b.getPosition(),c=vd(this.f.b)||a,d=this.Fa/this.f.b.v;a.push(this.f.b.v);this.m=new Z(a,[c[0]+d*(a[0]-c[0]),c[1]+d*(a[1]-c[1]),this.Fa],b);U(this.m,["animate","finish"],function(a){this.f.b.setPosition(a.x,a.y);X(this.f.b,
a.k)},!1,this);U(this.m,["finish"],this.Ad,!1,this);this.m.play(!1)}};me.prototype.Ad=function(){if(this.m)this.m.n(),this.m=n};me.prototype.q=function(){V(this.o);V(this.vd);V(this.ie);V(this.$d);this.Tc.n();this.m.n()};function ne(a){this.Fd=a;this.l=[]}E(ne,F);var oe=[];function pe(a,b,c){var d="finish";ba(d)||(oe[0]=d,d=oe);for(var e=0;e<d.length;e++)a.l.push(U(b,d[e],c||a,!1,a.Fd||a))}ne.prototype.kc=function(){I(this.l,V);this.l.length=0};ne.prototype.q=function(){ne.F.q.call(this);this.kc()};ne.prototype.handleEvent=function(){h(Error("EventHandler.handleEvent not implemented"))};function $(){Z.call(this,[0],[0],0);this.D=[]}E($,Z);$.prototype.gc=function(){this.Jb(function(a){a.play(a.C==0)});$.F.gc.call(this)};$.prototype.hc=function(){this.Jb(function(a){a.stop()});$.F.hc.call(this)};$.prototype.bc=function(){this.Bc();$.F.bc.call(this)};$.prototype.Bc=function(){I(this.D,function(a){a.n()})};function qe(){$.call(this)}E(qe,$);qe.prototype.Za=function(){for(var a=0;a<this.D.length;a++)this.D[a].play();qe.F.Za.call(this)};qe.prototype.Jb=function(a){I(this.D,a)};
qe.prototype.add=function(a){this.D.push(a);this.duration=Math.max(this.duration,a.duration)};qe.prototype.remove=function(a){if(lb(this.D,a)&&a.duration==this.duration)this.duration=0,I(this.D,function(a){this.duration=Math.max(a.duration,this.duration)},this)};function re(){$.call(this);this.Fb=new ne(this)}E(re,$);s=re.prototype;s.ua=0;s.Za=function(){se(this);re.F.Za.call(this)};s.tb=function(){te(this);re.F.tb.call(this)};function te(a){a.ua=0;a.Fb.kc()}
function se(a){a.V==-1&&(te(a),I(a.D,function(a){a.C=0;ie(a,a.C);a.stop()}));a.D[a.ua].play();a.ua++;a.ua<a.D.length&&pe(a.Fb,a.D[a.ua-1],function(){se(this)})}s.add=function(a){this.D.push(a);this.duration+=a.duration};s.remove=function(a){lb(this.D,a)&&(this.duration-=a.duration)};s.Jb=function(a){this.ua>0&&a(this.D[this.ua-1])};s.Bc=function(){I(this.D,function(a){a.n()});this.Fb.n()};function ue(a){this.la=a;this.m=n;this.wb=[];this.lb=[]}
function ve(a,b,c,d,e,f){function g(a){var b=a*a;a*=a*a;return 6*a*b+-15*b*b+10*a}x(a.m)&&a.cc();a.m=new qe;var i=a.la.getPosition();a.wb=[0,0,a.la.getHeading(),a.la.getTilt()];a.lb=[0,0,e||0,f||0];we(a,i[0],i[1],b,c);e=["begin","animate","end"];f=new Z(a.wb,a.lb,3E3,g);U(f,e,a.ce,!1,a);a.m.add(f);if(d)c=Yd(i[0],i[1],b,c),b=a.la.v,c=Math.min(b,d)+c*0.2,c=Math.max(Math.max(b,d),c),b=new Z([b],[c],1500,g),d=new Z([c],[d],1500,g),U(b,e,a.Vc,!1,a),U(d,e,a.Vc,!1,a),e=new re,e.add(b),e.add(d),a.m.add(e);
U(a.m,"end",a.cc,!1,a);a.m.play()}function we(a,b,c,d,e){var c=M(c,2*Math.PI),e=M(e,2*Math.PI),f=c-e;f<-Math.PI?c+=2*Math.PI:f>Math.PI&&(e+=2*Math.PI);a.wb[0]=b;a.wb[1]=c;a.lb[0]=d;a.lb[1]=e}ue.prototype.ce=function(a){this.la.setPosition(a.coords[0],a.coords[1]);this.la.setHeading(a.coords[2]);this.la.setTilt(a.coords[3])};ue.prototype.Vc=function(a){X(this.la,a.coords[0])};ue.prototype.cc=function(){if(x(this.m))this.m.n(),this.m=n};ue.prototype.cancel=function(){this.cc()};function xe(a,b){this.f=a;this.fa=k;this.K=this.J=this.Zc=0;this.o=n;U(this.f.a.canvas,"mousedown",B(this.dc,this));U(kd(this.f.a.canvas),"mouseup",B(this.fc,this));this.u=b||n}
xe.prototype.dc=function(a){if(!kc(a,2)&&!a.ctrlKey&&!a.altKey){x(this.u)&&this.u.cancel();this.J=a.screenX;this.K=a.screenY;if(kc(a,1)||kc(a,0)&&a.shiftKey)if(this.fa=vd(this.f.b),x(this.fa)){if(window.Ta)window.Ta.lat=N(this.fa[0]),window.Ta.Ce=N(this.fa[1]),window.Ta.enable(!0);this.Zc=this.f.b.getTilt()==0?this.f.b.v:Math.sin(Math.PI-this.f.b.getTilt()-(Math.PI-Math.asin((1+this.f.b.v/6378137)*Math.sin(this.f.b.getTilt()))))/Math.sin(this.f.b.getTilt())*6378137}if(!w(this.o))V(this.o),this.o=
n;this.o=U(kd(this.f.a.canvas),"mousemove",B(this.ec,this));a.preventDefault()}};xe.prototype.fc=function(a){a.preventDefault();this.fa=k;window.Ta&&window.Ta.enable(!1);if(!w(this.o))V(this.o),this.o=n};
xe.prototype.vb=function(a,b){if(v(this.fa)){var c=a/this.f.a.canvas.width*Math.PI*-2,d=b/this.f.a.canvas.height*Math.PI/2;if(w(this.fa))this.f.b.setHeading(this.f.b.getHeading()+c),this.f.b.setTilt(this.f.b.getTilt()+d);else{var e=this.f.b,f=this.fa[0],g=this.fa[1],i=this.Zc;e.Pa+=c;c=Math.asin(6378137/Math.sqrt(i*i+40680631590769));e.ha=L(e.ha+d,-c,c);d=Math.asin(i/6378137*Math.sin(e.ha));Math.abs(e.ha)<1.0E-4?X(e,i):X(e,(Math.sin(Math.PI-e.ha-d)/Math.sin(e.ha)-1)*6378137);f-=Math.cos(e.Pa)*d;e.setPosition(f,
g+Math.sin(e.Pa)*d/Math.cos(f))}}};xe.prototype.ec=function(a){this.vb(a.screenX-this.J,a.screenY-this.K);this.J=a.screenX;this.K=a.screenY;a.preventDefault()};function ye(a){return 1-Math.pow(1-a,3)};function ze(a,b){this.f=a;this.Ib=!1;this.sb=this.rb=this.K=this.J=0;this.Aa=this.o=n;U(this.f.a.canvas,"mousedown",B(this.dc,this));U(kd(this.f.a.canvas),"mouseup",B(this.fc,this));this.u=b||n}s=ze.prototype;s.dc=function(a){if(kc(a,0)&&!a.ctrlKey&&!a.altKey){x(this.u)&&this.u.cancel();if(this.Aa)this.Aa.stop(!1),this.Aa.n(),this.Aa=n;this.Ib=!0;this.rb=this.J=a.screenX;this.sb=this.K=a.screenY;if(!w(this.o))V(this.o),this.o=n;this.o=U(kd(this.f.a.canvas),"mousemove",B(this.ec,this));a.preventDefault()}};
s.fc=function(a){if(this.Ib){a.preventDefault();this.Ib=!1;if(!w(this.o))V(this.o),this.o=n;if(kc(a,0)){var b=a.screenX-this.rb,c=a.screenY-this.sb,a=Math.sqrt(Math.pow(b,2)+Math.pow(c,2));b/=a;c/=a;this.J==this.rb&&this.K==this.sb&&(a*=2);if(a>6)a=Math.max(15,a)*6,this.Aa=new Z([this.J,this.K],[this.J+a*b,this.K+a*c],1300,ye),U(this.Aa,["animate"],this.Gd,!1,this),this.Aa.play(!1)}}};
s.vb=function(a,b){var c=Math.PI*(1/this.f.a.canvas.height)*(this.f.zb/Math.pow(2,Xd(this.f.r,!0)));td(this.f.b,b*c,-2*a*c)};s.ec=function(a){this.vb(a.screenX-this.J,a.screenY-this.K);this.rb=this.J;this.sb=this.K;this.J=a.screenX;this.K=a.screenY;a.preventDefault()};s.Gd=function(a){this.vb(a.x-this.J,a.y-this.K);this.J=a.x;this.K=a.y};function Ae(a,b){var c=b||{},d=z(a)?document.getElementById(a):a;if(!w(d)){var e=P("canvas",{style:"width:100%;height:100%;"});this.a=new Zc(e,n,function(){var a=P("a",{style:"font-size:110%;display:block;width:100%;top:50%;position:relative;text-align:center;color:#800000;text-shadow:rgba(0,0,0,0.4) 0 0 6px;",href:"http://www.webglearth.com/upgrade.html"},"You need a WebGL-enabled browser to run this application.");O(d,a)});if(x(this.a)){$c(this.a);var f=P("div",{style:"width:100%;height:100%;position:relative;"});
O(d,f);O(f,e);cc("mapquest");cc("osm");this.Lc=new Ad(15);U(this.Lc,Cd,B(function(){var a=this.a,b=a.c;if(!w(a.Mb)){var c=C();if(a.Ub<C()-2E3)a.Lb=1E3*a.mb/(C()-a.Ub),a.tc=a.Nb/a.mb,a.Ub=C(),a.mb=0,a.Nb=0,a.Mb.innerHTML=a.tc.toFixed(2)+" ms / fps: "+a.Lb.toFixed(2);a.mb++}b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);a.H.A=Mc(4);a.e.draw();!w(a.Mb)&&(a.Nb+=C()-c)},this));var e=P("img",{style:"position:absolute;bottom:0;right:0"}),g=P("div",{style:"position:absolute;bottom:5px;left:5px;width:75%;font-size:8px;text-align:justify;color:#fff;font-family:Verdana,Arial;text-shadow:rgba(0,0,0,0.8) 0 0 4px;"});
O(f,e);O(f,g);this.a.e=new be(this.a,k,g,e,x(c.map)?dc(c.map).Ja:k,P("p",n,"Powered by ",P("a",{href:"http://www.webglearth.org/",style:"color:#00f"},"WebGL Earth"),"."),c.ze===!1);x(c.position)&&c.position.length>1?this.a.e.b.setPosition(J(c.position[0]),J(c.position[1])):x(c.center)&&c.center.length>1&&this.a.e.b.setPosition(J(c.center[0]),J(c.center[1]));x(c.zoom)&&this.a.e.r.setZoom(c.zoom);x(c.altitude)&&X(this.a.e.b,c.altitude);if(x(c.qa))this.a.qa=c.qa;this.u=new ue(this.a.e.b);this.ge=n;if(c.De!==
!1)this.ge=new ze(this.a.e,this.u);this.ue=n;if(c.Ee!==!1)this.ue=new xe(this.a.e,this.u);this.xe=n;if(c.Fe!==!1)this.xe=new me(this.a.e);this.a.$a();this.Lc.start()}}}Ae.prototype.setMap=function(a,b){var c=dc(a,b);x(c)&&this.a.e.r.aa(c.Ja)};Ae.prototype.je=function(a){this.a.e.r.aa(a.Ja)};Ae.prototype.le=function(a){this.a.e.r.aa(x(a)?a.Ja:n,!1,!0)};D("WebGLEarth",Ae);D("WebGLEarth.prototype.setCenter",function(a){this.u.cancel();this.a.e.b.setPosition(J(a[0]),J(a[1]));this.a.e.b.setTilt(0)});D("WebGLEarth.prototype.getCenter",function(){return[N(this.a.e.b.R),N(this.a.e.b.Y)]});D("WebGLEarth.prototype.setPosition",function(a,b,c){this.u.cancel();this.a.e.b.setPosition(J(a),J(b));x(c)&&this.a.e.r.setZoom(c)});D("WebGLEarth.prototype.getPosition",function(){return[N(this.a.e.b.R),N(this.a.e.b.Y)]});
D("WebGLEarth.prototype.setAltitude",function(a){this.u.cancel();X(this.a.e.b,a)});D("WebGLEarth.prototype.getAltitude",function(){return this.a.e.b.v});D("WebGLEarth.prototype.setHeading",function(a){this.u.cancel();this.a.e.b.setHeading(J(a))});D("WebGLEarth.prototype.getHeading",function(){return N(this.a.e.b.getHeading())});D("WebGLEarth.prototype.setTilt",function(a){this.u.cancel();this.a.e.b.setTilt(J(a))});D("WebGLEarth.prototype.getTilt",function(){return N(this.a.e.b.getTilt())});
D("WebGLEarth.prototype.setRoll",function(a){this.u.cancel();this.a.e.b.ub=J(a)});D("WebGLEarth.prototype.getRoll",function(){return N(this.a.e.b.ub)});D("WebGLEarth.prototype.setZoom",function(a){this.u.cancel();this.a.e.r.setZoom(a)});D("WebGLEarth.prototype.getZoom",function(){return this.a.e.r.getZoom()});D("WebGLEarth.prototype.flyTo",function(a,b,c,d,e){ve(this.u,J(a),J(b),c,d,e)});
D("WebGLEarth.prototype.flyToFitBounds",function(a,b,c,d){var a=J(a),b=J(b),c=J(c),d=J(d),e;e=this.a.wa;var f=(a+b)/2,f=Yd(f,c,f,d),g=Yd(a,0,b,0),i=Math.min(Math.max(this.a.Sa,f/g),1);e=J(N(e)/(i+0.4)-2);f=Math.max(g,f);f=Math.min(Math.PI/2,e+f/12756274);e=9567205.5*(Math.sin(f)*Math.sqrt(1+1/Math.pow(Math.tan(e),2))-1);c=M(c,2*Math.PI);d=M(d,2*Math.PI);f=c-d;f<-Math.PI?c+=2*Math.PI:f>Math.PI&&(d+=2*Math.PI);a=[(a+b)/2,(c+d)/2];ve(this.u,a[0],a[1],Math.max(e,Wd(this.a.e.r,this.a.e.r.z.na()+0.1,a[0])))});
D("WebGLEarth.prototype.handleResize",function(){return this.a.$a()});D("WebGLEarth.prototype.setProxyHost",function(a){this.a.qa=a});D("WebGLEarth.AppOptions",function(){});D("WebGLEarth.Maps",{MAPQUEST:"mapquest",OSM:"osm",BING:"bing",WMS:"wms",GOOGLE:"gooogle",CUSTOM:"custom"});D("WebGLEarth.prototype.initMap",cc);D("WebGLEarth.prototype.setMap",Ae.prototype.setMap);D("WebGLEarth.prototype.setBaseMap",Ae.prototype.je);D("WebGLEarth.prototype.setOverlayMap",Ae.prototype.le);D("WebGLEarth.Map",Pb);
D("WebGLEarth.Map.prototype.setBoundingBox",Pb.prototype.lc);D("WebGLEarth.Map.prototype.setOpacity",Pb.prototype.ke);D("WebGLEarth.Map.prototype.getOpacity",Pb.prototype.Dd);
